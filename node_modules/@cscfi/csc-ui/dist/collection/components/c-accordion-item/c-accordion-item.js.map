{"version":3,"file":"c-accordion-item.js","sourceRoot":"","sources":["../../../../src/components/c-accordion-item/c-accordion-item.tsx"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,CAAC,EACD,IAAI,EACJ,KAAK,EAEL,MAAM,EACN,OAAO,EACP,IAAI,EACJ,KAAK,GACN,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,eAAe,EAAE,MAAM,SAAS,CAAC;AAY1C,MAAM,OAAO,cAAc;;IA4CjB,kBAAa,GAAG,KAAK,CAAC;IAEtB,iBAAY,GAAG,KAAK,CAAC;uBAvCP,KAAK;;;oBAeR,KAAK;oBAML,KAAK;2BA2IG,KAAK;mBAEb,KAAK;;EAtHxB,aAAa,CAAC,KAAoB;IAChC,IACG,KAAK,CAAC,MAAsB,CAAC,OAAO,KAAK,kBAAkB;MAC5D,CAAC,KAAK,CAAC,GAAG,KAAK,OAAO,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,EACjD;MACA,KAAK,CAAC,cAAc,EAAE,CAAC;MAEvB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;KAChC;EACH,CAAC;EAGD,IAAI,CAAC,KAAY;IACf,KAAK,CAAC,eAAe,EAAE,CAAC;EAC1B,CAAC;EAED,IAAY,gBAAgB;IAC1B,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAE5C,OAAO,IAAI,CAAC,gBAAgB,CAAC,YAAY,GAAG,aAAa,CAAC;EAC5D,CAAC;EAED,IAAY,eAAe;IACzB,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5C,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC;IACxD,MAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC;IAE1D,OAAO,YAAY,GAAG,aAAa,GAAG,aAAa,CAAC;EACtD,CAAC;EAEO,kBAAkB,CAAC,CAAC;IAC1B,CAAC,CAAC,cAAc,EAAE,CAAC;IAEnB,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,QAAQ;MAAE,OAAO;IAE/C,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;IAEpE,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;MACxC,IAAI,CAAC,OAAO,EAAE,CAAC;KAChB;SAAM,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,QAAQ,EAAE;MAC7C,IAAI,CAAC,SAAS,EAAE,CAAC;KAClB;EACH,CAAC;EAEO,SAAS;IACf,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAE1B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAEtB,MAAM,WAAW,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,IAAI,CAAC;IAE/D,MAAM,SAAS,GAAG,GAAG,IAAI,CAAC,gBAAgB,IAAI,CAAC;IAE/C,IAAI,IAAI,CAAC,UAAU,EAAE;MACnB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;KAC1B;IAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;IAErE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAC9C,EAAE,MAAM,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC,EAAE,EACpC,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,qCAAqC,EAAE,CACjE,CAAC;IAEF,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;IAChE,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,CAAC;EAChE,CAAC;EAEO,OAAO;IACb,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,IAAI,CAAC;IAEjF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IAErB,MAAM,CAAC,qBAAqB,CAAC,GAAG,EAAE;MAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;MAEzB,MAAM,WAAW,GAAG,GAAG,IAAI,CAAC,gBAAgB,IAAI,CAAC;MAEjD,MAAM,SAAS,GAAG,GAAG,IAAI,CAAC,eAAe,IAAI,CAAC;MAE9C,IAAI,IAAI,CAAC,UAAU,EAAE;QACnB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;OAC1B;MAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;MAErE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAC9C,EAAE,MAAM,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC,EAAE,EACpC,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,iCAAiC,EAAE,CAC7D,CAAC;MAEF,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;MAC/D,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC;EACL,CAAC;EAEO,kBAAkB,CAAC,MAAe;IACxC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;IAEvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IAEvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAE3B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAE1B,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IAEzC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,6BAA6B,CAAC,CAAC;IAEvE,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;EACzB,CAAC;EAED,iBAAiB;IACf,cAAc,CAAC,SAAS,IAAI,CAAC,CAAC;EAChC,CAAC;EAMD,gBAAgB;IACd,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;IAClE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;EAC1D,CAAC;EAED,MAAM;IACJ,MAAM,gBAAgB,GAAG;MACvB,kBAAkB,EAAE,IAAI;MACxB,4BAA4B,EAAE,IAAI,CAAC,QAAQ;MAC3C,4BAA4B,EAAE,IAAI,CAAC,QAAQ;KAC5C,CAAC;IAEF,MAAM,aAAa,GAAG;MACpB,0BAA0B,EAAE,IAAI;MAChC,uCAAuC,EAAE,IAAI,CAAC,WAAW;MACzD,oCAAoC,EAAE,IAAI,CAAC,QAAQ;MACnD,oCAAoC,EAAE,IAAI,CAAC,OAAO;KACnD,CAAC;IAEF,MAAM,gBAAgB,GAAG;MACvB,6BAA6B,EAAE,IAAI;MACnC,uCAAuC,EAAE,IAAI,CAAC,QAAQ;KACvD,CAAC;IAEF,OAAO,CACL,EAAC,IAAI;MACH,eACE,EAAE,EAAE,UAAU,cAAc,CAAC,SAAS,EAAE,EACxC,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAwB,CAAC,EAChE,KAAK,EAAE,gBAAgB,EACvB,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ;QAErB,eACE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,EAAwB,CAAC,EAC/D,KAAK,EAAE,aAAa,EACpB,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;UAEjD,IAAI,CAAC,OAAO,IAAI,CACf,WAAK,KAAK,EAAC,wBAAwB,kBAAc,QAAQ;YACvD,YAAM,IAAI,EAAC,MAAM,GAAQ,CACrB,CACP;UAEA,IAAI,CAAC,eAAe,IAAI,YAAM,IAAI,EAAC,QAAQ,GAAQ;UAEnD,CAAC,IAAI,CAAC,eAAe,IAAI,CACxB,WAAK,KAAK,EAAC,yBAAyB,IAAE,IAAI,CAAC,OAAO,CAAO,CAC1D;UAED,WAAK,KAAK,EAAE,gBAAgB;YAC1B,cACE,IAAI,EAAE,eAAe,EACrB,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,GAC1B,CACN,CACE;QAEV,WACE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,EAAoB,CAAC,EAC5D,KAAK,EAAC,mCAAmC;UAEzC,WACE,KAAK,EAAC,2BAA2B,EACjC,IAAI,EAAC,QAAQ,qBACI,WAAW,cAAc,CAAC,SAAS,EAAE;YAEtD,eAAa,CACT,CACF,CACE,CACL,CACR,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnMc,wBAAS,GAAG,CAAC,AAAJ,CAAK","sourcesContent":["import {\n  Component,\n  h,\n  Prop,\n  Event,\n  EventEmitter,\n  Listen,\n  Element,\n  Host,\n  State,\n} from '@stencil/core';\nimport { mdiChevronRight } from '@mdi/js';\n\n/**\n * @parent c-accordion\n * @slot Default slot - Default slot\n * @slot header - Custom header slot\n */\n@Component({\n  tag: 'c-accordion-item',\n  styleUrl: 'c-accordion-item.scss',\n  shadow: true,\n})\nexport class CAccordionItem {\n  @Element() el: HTMLCAccordionItemElement;\n\n  /**\n   * Marks the item as collapsable\n   * @private\n   */\n  @Prop() collapsable = false;\n\n  /**\n   * Heading of the accordion item\n   */\n  @Prop() heading: string;\n\n  /**\n   * Value of the accordion item\n   */\n  @Prop() value: number | string;\n\n  /**\n   * Expansion status of the item\n   */\n  @Prop() expanded = false;\n\n  /**\n   * Show an outline around the expanded item\n   * @private\n   */\n  @Prop() outlined = false;\n\n  /**\n   * Emit changes to the c-accordion\n   * @private\n   */\n  @Event() itemChange: EventEmitter;\n\n  private _animation: Animation;\n\n  private _accordionElement: HTMLDetailsElement;\n\n  private _accordionHeader: HTMLDetailsElement;\n\n  private _accordionContent: HTMLDivElement;\n\n  private _isCollapsing = false;\n\n  private _isExpanding = false;\n\n  private static _uniqueId = 0;\n\n  @Listen('keydown', { capture: true })\n  handleKeyDown(event: KeyboardEvent) {\n    if (\n      (event.target as HTMLElement).tagName === 'C-ACCORDION-ITEM' &&\n      (event.key === 'Enter' || event.code === 'Space')\n    ) {\n      event.preventDefault();\n\n      this._onToggleAccordion(event);\n    }\n  }\n\n  @Listen('changeValue')\n  stop(event: Event) {\n    event.stopPropagation();\n  }\n\n  private get _collapsedHeight() {\n    const outlineHeight = this.outlined ? 4 : 0;\n\n    return this._accordionHeader.offsetHeight + outlineHeight;\n  }\n\n  private get _expandedHeight() {\n    const outlineHeight = this.outlined ? 4 : 0;\n    const headerHeight = this._accordionHeader.offsetHeight;\n    const contentHeight = this._accordionContent.offsetHeight;\n\n    return headerHeight + contentHeight + outlineHeight;\n  }\n\n  private _onToggleAccordion(e) {\n    e.preventDefault();\n\n    if (!this.collapsable && this.expanded) return;\n\n    this._accordionElement.classList.add('c-accordion-item--expanding');\n\n    if (this._isCollapsing || !this.expanded) {\n      this._expand();\n    } else if (this._isExpanding || this.expanded) {\n      this._collapse();\n    }\n  }\n\n  private _collapse() {\n    this._isCollapsing = true;\n\n    this.expanded = false;\n\n    const startHeight = `${this._accordionElement.offsetHeight}px`;\n\n    const endHeight = `${this._collapsedHeight}px`;\n\n    if (this._animation) {\n      this._animation.cancel();\n    }\n\n    this.itemChange.emit({ value: this.value, expanded: this.expanded });\n\n    this._animation = this._accordionElement.animate(\n      { height: [startHeight, endHeight] },\n      { duration: 300, easing: 'cubic-bezier(0.075, 0.82, 0.165, 1)' },\n    );\n\n    this._animation.onfinish = () => this._onAnimationFinish(false);\n    this._animation.oncancel = () => (this._isCollapsing = false);\n  }\n\n  private _expand() {\n    this._accordionElement.style.height = `${this._accordionElement.offsetHeight}px`;\n\n    this.expanded = true;\n\n    window.requestAnimationFrame(() => {\n      this._isExpanding = true;\n\n      const startHeight = `${this._collapsedHeight}px`;\n\n      const endHeight = `${this._expandedHeight}px`;\n\n      if (this._animation) {\n        this._animation.cancel();\n      }\n\n      this.itemChange.emit({ value: this.value, expanded: this.expanded });\n\n      this._animation = this._accordionElement.animate(\n        { height: [startHeight, endHeight] },\n        { duration: 300, easing: 'cubic-bezier(0.25, 0.8, 0.5, 1)' },\n      );\n\n      this._animation.onfinish = () => this._onAnimationFinish(true);\n      this._animation.oncancel = () => (this._isExpanding = false);\n    });\n  }\n\n  private _onAnimationFinish(isOpen: boolean) {\n    this.expanded = isOpen;\n\n    this._animation = null;\n\n    this._isCollapsing = false;\n\n    this._isExpanding = false;\n\n    this._accordionElement.style.height = '';\n\n    this._accordionElement.classList.remove('c-accordion-item--expanding');\n\n    this.expanded = isOpen;\n  }\n\n  componentWillLoad() {\n    CAccordionItem._uniqueId += 1;\n  }\n\n  @State() hasCustomHeader = false;\n\n  @State() hasIcon = false;\n\n  componentDidLoad() {\n    this.hasCustomHeader = !!this.el.querySelector('[slot=\"header\"]');\n    this.hasIcon = !!this.el.querySelector('[slot=\"icon\"]');\n  }\n\n  render() {\n    const accordionClasses = {\n      'c-accordion-item': true,\n      'c-accordion-item--expanded': this.expanded,\n      'c-accordion-item--outlined': this.outlined,\n    };\n\n    const headerClasses = {\n      'c-accordion-item__header': true,\n      'c-accordion-item__header--collapsable': this.collapsable,\n      'c-accordion-item__header--expanded': this.expanded,\n      'c-accordion-item__header--has-icon': this.hasIcon,\n    };\n\n    const indicatorClasses = {\n      'c-accordion-item__indicator': true,\n      'c-accordion-item__indicator--expanded': this.expanded,\n    };\n\n    return (\n      <Host>\n        <details\n          id={`panel__${CAccordionItem._uniqueId}`}\n          ref={(el) => (this._accordionElement = el as HTMLDetailsElement)}\n          class={accordionClasses}\n          open={!!this.expanded}\n        >\n          <summary\n            ref={(el) => (this._accordionHeader = el as HTMLDetailsElement)}\n            class={headerClasses}\n            onClick={(event) => this._onToggleAccordion(event)}\n          >\n            {this.hasIcon && (\n              <div class=\"c-accordion-item__icon\" aria-visible=\"hidden\">\n                <slot name=\"icon\"></slot>\n              </div>\n            )}\n\n            {this.hasCustomHeader && <slot name=\"header\"></slot>}\n\n            {!this.hasCustomHeader && (\n              <div class=\"c-accordion-item__title\">{this.heading}</div>\n            )}\n\n            <div class={indicatorClasses}>\n              <c-icon\n                path={mdiChevronRight}\n                class={{ expanded: this.expanded }}\n              ></c-icon>\n            </div>\n          </summary>\n\n          <div\n            ref={(el) => (this._accordionContent = el as HTMLDivElement)}\n            class=\"c-accordion-item__content-wrapper\"\n          >\n            <div\n              class=\"c-accordion-item__content\"\n              role=\"region\"\n              aria-labelledby={`header__${CAccordionItem._uniqueId}`}\n            >\n              <slot></slot>\n            </div>\n          </div>\n        </details>\n      </Host>\n    );\n  }\n}\n"]}