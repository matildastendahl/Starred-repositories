{"version":3,"file":"c-steps.js","sourceRoot":"","sources":["../../../../src/components/c-steps/c-steps.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Host,\n  h,\n  Prop,\n  EventEmitter,\n  Event,\n  Element,\n  Watch,\n  State,\n} from '@stencil/core';\n\n/**\n * @group Indicators\n * @slot Default slot - Default slot\n */\n@Component({\n  tag: 'c-steps',\n  styleUrl: 'c-steps.scss',\n  shadow: true,\n})\nexport class CSteps {\n  @Element() host: HTMLCStepsElement;\n\n  /**\n   * Value of the accordion (current step number)\n   */\n  @Prop() value!: number | string;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  @State() isMobile = false;\n\n  @State() label = '';\n\n  @Watch('value')\n  watchPropHandler() {\n    this._handleDividers();\n  }\n\n  private _isInitialized = false;\n\n  private _resizeObserver: ResizeObserver;\n\n  private _stepElements: NodeListOf<HTMLCStepElement>;\n\n  private _handleDividers() {\n    this._stepElements = this.host.querySelectorAll('c-step');\n    const dividers: NodeListOf<HTMLDivElement> =\n      this.host.querySelectorAll('.divider');\n\n    this._stepElements.forEach((item, index) => {\n      item.current = index + 1 === +this.value;\n      item.complete = index + 1 < +this.value;\n\n      if (index + 1 < this._stepElements.length) {\n        const div = this._isInitialized\n          ? dividers[index]\n          : document.createElement('div');\n\n        div.classList.toggle('complete', !!item.complete);\n\n        if (!this._isInitialized) {\n          div.classList.add('divider');\n\n          item.after(div);\n        }\n      }\n\n      if (item.current) {\n        this.label = item.textContent;\n      }\n    });\n\n    this._isInitialized = true;\n  }\n\n  componentDidLoad() {\n    this._handleDividers();\n\n    this._resizeObserver = new ResizeObserver(([entry]) => {\n      const maxWidth = this._stepElements.length * 180;\n\n      this.isMobile = maxWidth > entry.contentRect.width;\n\n      this.host.shadowRoot\n        .querySelector('.c-steps')\n        .classList.toggle('mobile', this.isMobile);\n\n      this._stepElements.forEach((node) => {\n        node.classList.toggle('mobile', this.isMobile);\n      });\n    });\n\n    window.requestAnimationFrame(() => {\n      this._resizeObserver.observe(this.host);\n    });\n  }\n\n  private _getA11yMessage(total: number, current: number) {\n    return `\n      Steps, step ${Math.min(current, total)} of ${total}.\n      ${this.label}.\n      ${current - 1} step${current - 1 !== 1 ? 's' : ''} marked as completed.\n    `;\n  }\n\n  render() {\n    return (\n      <Host tabindex=\"0\">\n        {this._stepElements && (\n          <span class=\"visuallyhidden\">\n            {this._getA11yMessage(this._stepElements.length, +this.value)}\n          </span>\n        )}\n        <div class=\"c-steps\" aria-hidden=\"true\">\n          <slot></slot>\n        </div>\n        {this.isMobile && (\n          <div class=\"c-steps__label\" aria-hidden=\"true\">\n            {this.label}\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"]}