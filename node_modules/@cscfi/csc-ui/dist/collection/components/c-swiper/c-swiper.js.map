{"version":3,"file":"c-swiper.js","sourceRoot":"","sources":["../../../../src/components/c-swiper/c-swiper.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Event,\n  EventEmitter,\n  h,\n  Listen,\n  Prop,\n  State,\n} from '@stencil/core';\nimport { Swiper, Navigation, SwiperOptions } from 'swiper';\nimport { mdiChevronLeft, mdiChevronRight } from '@mdi/js';\n\n/**\n * @group Content Selectors\n * @slot Default slot - Default slot for the c-swiper-tab elements\n */\n@Component({\n  tag: 'c-swiper',\n  styleUrl: 'c-swiper.scss',\n  shadow: false,\n})\nexport class CSwiper {\n  /**\n   * Value of the swiper\n   */\n  @Prop({ reflect: true, mutable: true }) value: number | string;\n\n  /**\n   * Id of the swiper element\n   */\n  @Prop({ attribute: 'id' }) elementId!: string;\n\n  @State() isBeginning = true;\n\n  @State() isEnd = false;\n\n  @State() statusText = '';\n\n  /**\n   * Emit value change to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  private _container?: HTMLDivElement;\n\n  private _wrapper?: HTMLDivElement;\n\n  private _swiper: Swiper;\n\n  private _options: SwiperOptions;\n\n  private _debounce = null;\n\n  private static _uniqueId = 0;\n\n  @Listen('changeValue')\n  onTabClick(event: MouseEvent) {\n    event.stopPropagation();\n\n    this.value = event.detail;\n\n    this._updateStatusText();\n  }\n\n  @Listen('keyup', { capture: true })\n  handleKeyUp(event: KeyboardEvent) {\n    const index = +(event.target as HTMLCSwiperTabElement).dataset.index;\n    const isArrowLeft = event.key === 'ArrowLeft';\n    const isArrowRight = event.key === 'ArrowRight';\n    const isBeginning = index === 0;\n    const isEnd = index === this.slotItems.length - 1;\n\n    if (!isArrowRight && !isArrowLeft) return;\n\n    if (isArrowLeft) {\n      if (isBeginning) return;\n\n      this.value = this.slotItems[index - 1].value;\n    }\n\n    if (isArrowRight) {\n      if (isEnd) return;\n\n      this.value = this.slotItems[index + 1].value;\n    }\n\n    this._slideToTab(index - 1);\n\n    this.slotItems.forEach((child) => {\n      const isActive = child.value === this.value;\n\n      // child.active = isActive;\n\n      if (isActive) {\n        child.focus();\n      }\n    });\n\n    this.changeValue.emit(this.value);\n  }\n\n  get id() {\n    return this.elementId || `c-swiper--${CSwiper._uniqueId}`;\n  }\n\n  get slotItems() {\n    return Array.from(this._wrapper.children) as HTMLCSwiperTabElement[];\n  }\n\n  private _slideToTab(index) {\n    this._swiper.slideTo(index);\n    this._swiper.update();\n  }\n\n  componentDidLoad() {\n    this._options = {\n      modules: [Navigation],\n      breakpointsBase: 'container',\n      loop: false,\n      speed: 300,\n      slideToClickedSlide: true,\n      slidesPerView: 1,\n      spaceBetween: 8,\n      threshold: 4,\n      breakpoints: {\n        480: {\n          slidesPerView: 2,\n        },\n        720: {\n          slidesPerView: 3,\n        },\n        960: {\n          slidesPerView: 4,\n        },\n      },\n      navigation: {\n        nextEl: '.c-icon-button--next',\n        prevEl: '.c-icon-button--prev',\n      },\n      keyboard: true,\n    };\n\n    this._initializeSwiper();\n  }\n\n  private _initializeSwiper() {\n    for (const [index, slide] of this.slotItems.entries()) {\n      slide.classList.add('swiper-slide');\n      slide.setAttribute('data-index', index.toString());\n\n      slide.value = slide.value ?? index;\n      slide.position = index + 1;\n      slide.setsize = this.slotItems.length;\n\n      if (slide.active) {\n        requestAnimationFrame(() => {\n          this._slideToTab(index);\n        });\n      }\n    }\n\n    this._swiper = new Swiper(this._container, {\n      ...this._options,\n    });\n\n    this._swiper.on('activeIndexChange', ({ isBeginning, isEnd }) => {\n      this.isBeginning = isBeginning;\n      this.isEnd = isEnd;\n    });\n  }\n\n  private _updateStatusText() {\n    this.statusText = '';\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = window.setTimeout(() => {\n      const selection = this.slotItems?.find(\n        (item) => item.value === this.value,\n      );\n\n      this.statusText += `Currently selected - ${selection?.label}`;\n\n      this._debounce = null;\n    }, 1400);\n  }\n\n  componentWillLoad() {\n    CSwiper._uniqueId += 1;\n  }\n\n  render() {\n    return (\n      <div class=\"c-swiper swiper\">\n        <div\n          id={'announce-' + this.id}\n          class=\"visuallyhidden\"\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          {this.statusText}\n        </div>\n\n        <div\n          class=\"swiper-container\"\n          ref={(el) => (this._container = el as HTMLDivElement)}\n        >\n          <div\n            role=\"tablist\"\n            class=\"swiper-wrapper\"\n            ref={(el) => (this._wrapper = el as HTMLDivElement)}\n          >\n            <slot></slot>\n          </div>\n\n          <div class=\"c-swiper__navigation\">\n            <c-icon-button\n              aria-disabled={this.isBeginning ? 'true' : 'false'}\n              aria-label=\"previous page\"\n              class=\"c-icon-button--prev\"\n              disabled={this.isBeginning}\n              size=\"small\"\n              ghost\n            >\n              <span class=\"visuallyhidden\">\n                Previous\n                <span>page</span>\n              </span>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d={mdiChevronLeft} />\n              </svg>\n            </c-icon-button>\n\n            <c-icon-button\n              aria-disabled={this.isEnd ? 'true' : 'false'}\n              aria-label=\"next page\"\n              class=\"c-icon-button--next\"\n              disabled={this.isEnd}\n              size=\"small\"\n              ghost\n            >\n              <span class=\"visuallyhidden\">\n                Next\n                <span>page</span>\n              </span>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d={mdiChevronRight} />\n              </svg>\n            </c-icon-button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]}