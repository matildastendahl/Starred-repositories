{"version":3,"file":"c-accordion.js","sourceRoot":"","sources":["../../../../src/components/c-accordion/c-accordion.tsx"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,OAAO,EACP,KAAK,EAEL,CAAC,EACD,MAAM,EACN,IAAI,EACJ,KAAK,GACN,MAAM,eAAe,CAAC;AAWvB,MAAM,OAAO,UAAU;;;qBASD,KAAK;oBAKN,KAAK;oBAKL,KAAK;;EAUxB,gBAAgB,CAAC,KAAsB;IACrC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC7B,IAAI,CAAC,oBAAoB,EAAE,CAAC;EAC9B,CAAC;EAGD,qBAAqB,CACnB,KAAiE;IAEjE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;IAEzC,IAAI,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;MAC9C,IAAI,QAAQ,EAAE;QACZ,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACxB;WAAM;QACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC;OACpD;KACF;SAAM;MACL,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;KACtC;EACH,CAAC;EAED,IAAI,KAAK;IACP,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAgC,CAAC;EACvE,CAAC;EAEO,oBAAoB;IAC1B,MAAM,UAAU,GAAG,CAAC,IAAI,EAAE,EAAE,CAC1B,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;MACvB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;MACjC,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;IAEhC,MAAM,kBAAkB,GAAG,CAAC,IAAI,EAAE,EAAE,CAClC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;MACvB,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;MAC7C,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAEvB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;MAC7B,IAAI,CAAC,WAAW;QACd,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;MACnE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;MAC9B,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;KAClC;EACH,CAAC;EAED,gBAAgB;IACd,IAAI,CAAC,oBAAoB,EAAE,CAAC;EAC9B,CAAC;EAED,MAAM;IACJ,OAAO,CACL,WAAK,KAAK,EAAC,aAAa;MACtB,eAAa,CACT,CACP,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Listen,\n  Prop,\n  Watch,\n} from '@stencil/core';\n\n/**\n * @group Content Selectors\n * @slot Default slot - Default slot for the c-accordion-item components\n */\n@Component({\n  tag: 'c-accordion',\n  styleUrl: 'c-accordion.scss',\n  shadow: true,\n})\nexport class CAccordion {\n  /**\n   * Value of the accordion\n   */\n  @Prop({ mutable: true }) value!: number | string | (number | string)[];\n\n  /**\n   * Disallow collapsing all the items\n   */\n  @Prop() mandatory = false;\n\n  /**\n   * Allow expanding multiple items\n   */\n  @Prop() multiple = false;\n\n  /**\n   * Show an outline around expanded items\n   */\n  @Prop() outlined = false;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  @Element() el: HTMLCAccordionElement;\n\n  @Watch('value')\n  watchPropHandler(value: string | number) {\n    this.changeValue.emit(value);\n    this._handleItemExpansion();\n  }\n\n  @Listen('itemChange', { passive: true })\n  onAccordionItemChange(\n    event: CustomEvent<{ value: number | string; expanded: boolean }>,\n  ) {\n    const { value, expanded } = event.detail;\n\n    if (this.multiple && Array.isArray(this.value)) {\n      if (expanded) {\n        this.value.push(value);\n      } else {\n        this.value = this.value.filter((v) => v !== value);\n      }\n    } else {\n      this.value = expanded ? value : null;\n    }\n  }\n\n  get items() {\n    return Array.from(this.el.childNodes) as HTMLCAccordionItemElement[];\n  }\n\n  private _handleItemExpansion() {\n    const isExpanded = (item) =>\n      Array.isArray(this.value)\n        ? this.value.includes(item.value)\n        : item.value === this.value;\n\n    const isLastExpandedItem = (item) =>\n      Array.isArray(this.value)\n        ? isExpanded(item) && this.value.length === 1\n        : isExpanded(item);\n\n    for (const item of this.items) {\n      item.collapsable =\n        !this.mandatory || (this.mandatory && !isLastExpandedItem(item));\n      item.outlined = this.outlined;\n      item.expanded = isExpanded(item);\n    }\n  }\n\n  componentDidLoad() {\n    this._handleItemExpansion();\n  }\n\n  render() {\n    return (\n      <div class=\"c-accordion\">\n        <slot></slot>\n      </div>\n    );\n  }\n}\n"]}