{"version":3,"file":"c-tab-buttons.js","sourceRoot":"","sources":["../../../../src/components/c-tab-buttons/c-tab-buttons.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  h,\n  Element,\n  Prop,\n  Event,\n  EventEmitter,\n  Watch,\n  Listen,\n  Host,\n} from '@stencil/core';\n\n/**\n * @group Content Selectors\n * @slot Default slot - Default slot for the c-button elements\n */\n@Component({\n  tag: 'c-tab-buttons',\n  styleUrl: 'c-tab-buttons.scss',\n  shadow: true,\n})\nexport class CTabButtons {\n  /**\n   * Value of tab buttons\n   */\n  @Prop({ mutable: true }) value: number | string = 0;\n\n  /**\n   * Always require a selection\n   */\n  @Prop() mandatory = false;\n\n  /**\n   * Used as controller for c-tabs\n   * @private\n   */\n  @Prop() tabs = false;\n\n  /**\n   * Size of the buttons\n   */\n  @Prop() size: 'default' | 'small' = 'default';\n\n  /**\n   * Disable tab buttons\n   */\n  @Prop({ attribute: 'disabled' }) hostDisabled = false;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  @Element() el: HTMLCTabButtonsElement;\n\n  private _isIndexBased: boolean;\n\n  private _focusedTabValue = this.value;\n\n  @Watch('value')\n  onValueChange(value: string | number) {\n    this.buttons.forEach((button: HTMLCButtonElement) => {\n      if (!button.disabled) {\n        button.setAttribute('outlined', 'true');\n      }\n    });\n\n    if (value !== null) {\n      this.buttons.forEach((button: HTMLCButtonElement) => {\n        if (!button.disabled) {\n          button.setAttribute('outlined', 'true');\n        }\n      });\n\n      const button =\n        this.buttons.find((btn) => btn.value === value) || this.buttons[value];\n\n      if (button) {\n        button.removeAttribute('outlined');\n      }\n    }\n\n    this.changeValue.emit(this.buttons[value]?.value ?? value);\n  }\n\n  @Listen('tabFocus', { passive: true })\n  tabFocusHandler(event: CustomEvent) {\n    event.stopPropagation();\n\n    this._focusedTabValue = event.detail;\n  }\n\n  @Listen('keyup', { capture: true })\n  handleKeyUp(event: KeyboardEvent) {\n    event.stopPropagation();\n\n    const isArrowLeft = event.key === 'ArrowLeft';\n    const isArrowRight = event.key === 'ArrowRight';\n\n    if (!isArrowRight && !isArrowLeft) return;\n\n    const tabIndex =\n      this._getTabIndex(this._focusedTabValue) ??\n      +this.buttons[this._focusedTabValue]?.dataset.index;\n\n    const firstAvailableValue = this.availableValues.at(0);\n    const lastAvailableValue = this.availableValues.at(-1);\n\n    const isBeginning = this._focusedTabValue === firstAvailableValue;\n    const isEnd = this._focusedTabValue === lastAvailableValue;\n\n    const nextValue = isEnd\n      ? firstAvailableValue\n      : this.availableValues[tabIndex + 1];\n\n    const previousValue = isBeginning\n      ? lastAvailableValue\n      : this.availableValues[tabIndex - 1];\n\n    const value = isArrowLeft ? previousValue : nextValue;\n\n    const item = this.buttons\n      .find(\n        (button) => button.value === value || button.dataset.index === value,\n      )\n      .shadowRoot.querySelector('button');\n\n    requestAnimationFrame(() => {\n      item?.focus();\n    });\n  }\n\n  @Listen('tabChange', { passive: true })\n  onTabChange(\n    event: CustomEvent<{\n      value: number | string;\n      element: HTMLCButtonElement;\n    }>,\n  ) {\n    if (!this.tabs) event.stopPropagation();\n\n    const isActive =\n      this.value !== null &&\n      (this._isIndexBased\n        ? +event.detail.value === +this.value\n        : event.detail.value === this.value);\n\n    // Disable deselection if mandatory prop is set to true\n    if (this.mandatory && isActive) {\n      return;\n    }\n\n    const nullValue = this._isIndexBased ? null : '';\n    const value = this._isIndexBased ? +event.detail.value : event.detail.value;\n\n    this.value = isActive ? nullValue : value;\n  }\n\n  get availableValues() {\n    return this.buttons.map((button) => button.value ?? button.dataset.index);\n  }\n\n  get buttons() {\n    return Array.from(\n      this.el.querySelectorAll(':scope > c-button'),\n    ) as HTMLCButtonElement[];\n  }\n\n  private _getTabIndex(value: string | number) {\n    const index = this.availableValues.findIndex(\n      (buttonValue) => buttonValue === value,\n    );\n\n    return index;\n  }\n\n  componentDidLoad() {\n    this._isIndexBased = this.buttons.every(\n      (button) => typeof button.value === 'undefined',\n    );\n\n    this.buttons.forEach((button: HTMLCButtonElement, index) => {\n      button.setAttribute('data-index', String(index));\n      button.setAttribute('tabs', 'true');\n\n      if (!button.disabled) {\n        button.setAttribute('outlined', 'true');\n        button.outlined = true;\n      }\n\n      button.disabled = this.hostDisabled || button.disabled;\n      button.size = this.size;\n\n      const isActive =\n        this.value !== null &&\n        (this._isIndexBased\n          ? index === +this.value\n          : button.value === this.value);\n\n      button.shadowRoot\n        .querySelector('button')\n        ?.setAttribute('tabindex', isActive && !this.hostDisabled ? '0' : '-1');\n\n      if (isActive) {\n        button.removeAttribute('outlined');\n      }\n    });\n  }\n\n  render() {\n    const classes = {\n      'c-tab-buttons': true,\n      disabled: this.hostDisabled,\n    };\n\n    return (\n      <Host class={classes}>\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"]}