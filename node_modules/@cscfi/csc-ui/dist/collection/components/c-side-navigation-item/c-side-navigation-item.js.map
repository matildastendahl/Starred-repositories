{"version":3,"file":"c-side-navigation-item.js","sourceRoot":"","sources":["../../../../src/components/c-side-navigation-item/c-side-navigation-item.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  h,\n  Host,\n  Prop,\n  Element,\n  Event,\n  EventEmitter,\n  Listen,\n  Watch,\n} from '@stencil/core';\nimport { mdiChevronRight } from '@mdi/js';\n\n/**\n * @parent c-side-navigation\n */\n@Component({\n  tag: 'c-side-navigation-item',\n  styleUrl: 'c-side-navigation-item.scss',\n  shadow: true,\n})\nexport class CSideNavigationItem {\n  @Element() hostElement: HTMLCSideNavigationItemElement;\n\n  /**\n   * Indicate active state\n   */\n  @Prop() active: boolean;\n\n  /**\n   * Hyperlink url\n   */\n  @Prop() href: string;\n\n  /**\n   * Hyperlink target\n   */\n  @Prop() target: string = null;\n\n  /**\n   * Loading state\n   */\n  @Prop() loading = false;\n\n  /**\n   * Emit changes to the c-accordion\n   * @private\n   */\n  @Event() itemChange: EventEmitter;\n\n  @Listen('itemChange')\n  handleChange(event: Event) {\n    if (this._isSubItem) {\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n      event.preventDefault();\n\n      this.active = !this.active;\n    }\n  }\n\n  @Watch('active')\n  onActiveChange(active: boolean) {\n    this._handleChildFocusableChange(active);\n  }\n\n  private _ariaLabel: string;\n\n  private _isSubItem = false;\n\n  private _handleChildFocusableChange(focusable: boolean) {\n    if (!this._slotHasContent) return;\n\n    Array.from(this.hostElement.querySelectorAll('[slot=\"sub-item\"]')).forEach(\n      (child: HTMLCSubNavigationItemElement) => {\n        child.ariaHidden = (!focusable).toString();\n        child.focusable = focusable;\n      },\n    );\n  }\n\n  private _redirect(event: KeyboardEvent | Event) {\n    if (\n      (event instanceof KeyboardEvent && event?.key === 'Enter') ||\n      !(event instanceof KeyboardEvent)\n    ) {\n      if (this._isSubItem) {\n        event.stopPropagation();\n        event.stopImmediatePropagation();\n        event.preventDefault();\n      }\n\n      this.itemChange.emit(event);\n\n      if (!this._slotHasContent) {\n        const sidenav = document.querySelector('c-side-navigation');\n        sidenav.menuVisible = false;\n      }\n\n      if (this.href) {\n        if (this.target) {\n          window.open(this.href, this.target);\n        } else {\n          window.location.href = this.href;\n        }\n      }\n    }\n  }\n\n  private _slotHasContent = false;\n\n  private _assignSubItemSlots() {\n    const subItems = this.hostElement.querySelectorAll(\n      'c-side-navigation-item',\n    );\n\n    Array.from(subItems).forEach((item) => {\n      item.setAttribute('slot', 'sub-item');\n    });\n  }\n\n  componentWillLoad() {\n    this._assignSubItemSlots();\n\n    this._slotHasContent =\n      !!this.hostElement.querySelector('[slot=\"sub-item\"]');\n\n    this._isSubItem = !!this.hostElement.getAttribute('slot');\n\n    this._handleChildFocusableChange(this.active);\n  }\n\n  componentDidLoad() {\n    for (const node of this.hostElement.childNodes) {\n      if (node.nodeName === '#text') {\n        this._ariaLabel = node.nodeValue.trim();\n        break;\n      }\n    }\n\n    this._handleChildClasses();\n  }\n\n  private _handleChildClasses() {\n    if (!this._isSubItem) return;\n\n    Array.from(this.hostElement.children)\n      .filter((child) => child.tagName === 'C-SUB-NAVIGATION-ITEM')\n      .forEach((child: HTMLCSubNavigationItemElement) => {\n        child.classList.add('c-sub-navigation-item--sub-level');\n      });\n  }\n\n  render() {\n    const classes = {\n      'c-side-navigation-item': true,\n      'c-side-navigation-item--parent': this._slotHasContent,\n      active: this.active,\n    };\n\n    const subNavigationClasses = {\n      subnavactive: this.active,\n      'sub-item': !this.active,\n    };\n\n    const a11y = {\n      role: 'menuitem',\n      tabindex: '0',\n    };\n\n    if (this._slotHasContent) {\n      a11y['aria-expanded'] = (!!this.active)?.toString();\n    } else if (this.active) {\n      a11y['aria-current'] = 'page';\n    }\n\n    return (\n      <Host\n        {...a11y}\n        class={classes}\n        onClick={(e) => this._redirect(e)}\n        onKeyDown={(e) => this._redirect(e)}\n      >\n        <div\n          class={{\n            'c-side-navigation-item__header': true,\n            'c-side-navigation-item__header--expandable': this._slotHasContent,\n          }}\n        >\n          {this._slotHasContent && (\n            <c-icon class=\"svg\" path={mdiChevronRight}></c-icon>\n          )}\n          <div class=\"c-side-navigation-item__slot\">\n            <slot></slot>\n          </div>\n        </div>\n\n        {this._slotHasContent && (\n          <nav\n            role=\"menubar\"\n            aria-label={this._ariaLabel}\n            aria-expanded={(!!this.active)?.toString()}\n            class={subNavigationClasses}\n          >\n            <slot name=\"sub-item\"></slot>\n          </nav>\n        )}\n\n        <c-loader\n          size={32}\n          hide={!this.loading}\n          style={{ pointerEvents: 'none' }}\n        ></c-loader>\n      </Host>\n    );\n  }\n}\n"]}