{"version":3,"file":"c-toast.js","sourceRoot":"","sources":["../../../../src/components/c-toast/c-toast.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Host,\n  h,\n  Prop,\n  EventEmitter,\n  Event,\n  Element,\n  Method,\n} from '@stencil/core';\n\nimport {\n  mdiClose,\n  mdiAlert,\n  mdiCloseCircle,\n  mdiCheckCircle,\n  mdiInformation,\n} from '@mdi/js';\n\nimport { CToastMessage } from '../../types';\n\n/**\n * @parent none\n */\n@Component({\n  tag: 'c-toast',\n  styleUrl: 'c-toast.scss',\n  shadow: true,\n})\nexport class CToast {\n  @Element() el: HTMLCToastElement;\n\n  /**\n   * Messages\n   */\n  @Prop() message: CToastMessage;\n\n  /**\n   * Emit inner value change to parent\n   */\n  @Event() close: EventEmitter<CToastMessage>;\n\n  private _closed = false;\n\n  private _startTime: number;\n\n  private _remainingTime: number;\n\n  private _icons = {\n    close: mdiClose,\n    warning: mdiAlert,\n    error: mdiCloseCircle,\n    success: mdiCheckCircle,\n    info: mdiInformation,\n  };\n\n  private _timeout;\n\n  /**\n   * Close toast\n   *\n   * @emits close\n   */\n  @Method()\n  async closeToast() {\n    if (this._closed) return;\n\n    this._closed = true;\n\n    this.el.classList.remove('show');\n    this.el.ontransitionend = () => this.close.emit(this.message);\n  }\n\n  componentDidLoad() {\n    window.requestAnimationFrame(() => {\n      this.el.classList.add('show');\n    });\n\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._startTime = Date.now();\n    this._remainingTime = this.message.duration;\n\n    this._timeout = window.setTimeout(\n      () => this.closeToast(),\n      +this.message.duration,\n    );\n  }\n\n  disconnectedCallback() {\n    window.clearTimeout(this._timeout);\n  }\n\n  private _onMouseEnter() {\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._remainingTime = this._remainingTime - (Date.now() - this._startTime);\n\n    window.clearTimeout(this._timeout);\n  }\n\n  private _onMouseLeave() {\n    if (this.message.persistent || this.message.indeterminate) return;\n\n    this._startTime = Date.now();\n    this._timeout = window.setTimeout(\n      () => this.closeToast(),\n      this._remainingTime,\n    );\n  }\n\n  private _renderCloseButton() {\n    const Tag = !!this.message.closeText ? 'c-button' : 'c-icon-button';\n\n    return (\n      <Tag\n        aria-label=\"close\"\n        size=\"small\"\n        text\n        onClick={() => this.closeToast()}\n      >\n        <c-icon\n          {...{ ...(!!this.message.closeText && { slot: 'icon' }) }}\n          color=\"var(--_c-toast-color)\"\n          path={this._icons.close}\n        />\n\n        {this.message.closeText}\n      </Tag>\n    );\n  }\n\n  render() {\n    const showProgressBar = !this.message.persistent && this.message.progress;\n\n    return (\n      <Host\n        id={`c-toast--${this.message.id}`}\n        class={{ [this.message.type]: true }}\n        role=\"alert\"\n        aria-atomic=\"true\"\n        aria-live=\"assertive\"\n        onMouseEnter={() => this._onMouseEnter()}\n        onMouseLeave={() => this._onMouseLeave()}\n      >\n        <span class=\"visuallyhidden\">{this.message.type} notification</span>\n\n        {this.message.custom ? (\n          <div class=\"c-toast__custom-item\">\n            <div class=\"c-toast__content\">\n              <slot></slot>\n            </div>\n          </div>\n        ) : (\n          <div class=\"c-toast__item\">\n            <svg viewBox=\"0 0 24 24\">\n              <path d={this._icons[this.message.type]}></path>\n            </svg>\n\n            <div class=\"c-toast__content\">\n              {!!this.message.title && <p>{this.message.title}</p>}\n\n              {this.message.message}\n            </div>\n\n            {!this.message.indeterminate && this._renderCloseButton()}\n          </div>\n        )}\n\n        {showProgressBar && (\n          <div\n            class=\"c-toast__progress\"\n            style={{ '--_c-toast-duration': `${this.message.duration}ms` }}\n          >\n            <div\n              class={{\n                'c-toast__progress__bar': true,\n                indeterminate: this.message.indeterminate,\n              }}\n            ></div>\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"]}