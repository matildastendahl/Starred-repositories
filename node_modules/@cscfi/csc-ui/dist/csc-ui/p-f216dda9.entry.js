import{r as t,c as a,h as i,F as e,H as o,g as s}from"./p-565ec8e4.js";import{m as r,o as n,i as l,p as d,q as c,r as h}from"./p-d32e42fe.js";const b="html{box-sizing:border-box}body{margin:0}*,*:before,*:after{box-sizing:inherit;-webkit-tap-highlight-color:transparent}:host{font-family:var(--c-font-family)}::-ms-reveal{display:none}:host{--_c-data-table-background-color:var(--c-data-table-background-color, var(--c-white));--_c-data-table-border-color:var(--c-data-table-border-color, var(--c-tertiary-200));--_c-data-table-background-color-hover:var(--c-data-table-background-color-hover, var(--c-primary-100));--_c-data-table-selected-row-background-color:var(--c-data-table-selected-row-background-color, rgba(var(--c-primary-rgb), 0.1));--_c-data-table-highlighted-column-background-color:var(--c-data-table-highlighted-column-background-color, rgba(var(--c-primary-rgb), 0.1));--_c-data-table-active:var(--c-data-table-active, var(--c-primary-600));--_c-data-table-checkbox-color:var(--c-data-table-checkbox-color, var(--c-primary-600));--_c-data-table-checkbox-color-active:var(--c-data-table-checkbox-color-active, var(--_c-data-table-checkbox-color));--_c-data-table-checkbox-background-color-hover:var(--c-data-table-checkbox-background-color-hover, rgba(var(--c-primary-rgb), 0.1));--_c-data-table-pagination-button-active-background-color:var(--c-data-table-pagination-button-active-background-color, var(--c-primary-600));--_c-data-table-pagination-button-active-background-color-hover:var(--c-data-table-pagination-button-active-background-color-hover, var(--c-primary-400));--_c-data-table-pagination-button-active-text-color:var(--c-data-table-pagination-button-active-text-color, var(--c-white));--_c-data-table-pagination-button-background-color:var(--c-data-table-pagination-button-background-color, var(--c-transparent));--_c-data-table-pagination-button-background-color-hover:var(--c-data-table-pagination-button-background-color-hover, rgba(var(--c-primary-rgb), 0.1));--_c-data-table-pagination-button-text-color:var(--c-data-table-pagination-button-text-color, var(--_c-data-table-pagination-button-active-background-color));--_c-data-table-menu-text-color:var(--c-data-table-menu-text-color, var(--c-text-system));--_c-data-table-menu-text-color-active:var(--c-data-table-menu-text-color-active, var(--c-primary-600));--_c-data-table-menu-background-color-hover:var(--c-data-table-menu-background-color-hover, var(--c-primary-200));--_c-data-table-menu-outline-color:var(--c-data-table-menu-outline-color, var(--c-primary-600));display:block;position:relative;width:100%;max-width:100%}:host c-checkbox{--c-checkbox-color:var(--_c-data-table-checkbox-color);--c-checkbox-color-active:var(--_c-data-table-checkbox-color-active);--c-checkbox-background-color-hover:var(--_c-data-table-checkbox-background-color-hover)}:host table,:host caption,:host tbody,:host tfoot,:host thead,:host tr,:host th,:host td{border:0;font-size:100%;font-family:inherit;margin:0;padding:0}:host table{background-color:var(--_c-data-table-background-color);border-collapse:collapse;border-spacing:0}:host .c-data-table{box-shadow:inset 0 0 0 1px var(--_c-data-table-border-color);width:100%}:host .c-data-table .children{display:flex;flex-wrap:wrap;gap:4px;width:100%}:host .c-data-table .children pre{font-family:inherit;white-space:pre-wrap}:host .c-data-table [data-justify=end],:host .c-data-table [data-align=end] .children{align-items:flex-end}:host .c-data-table [data-justify=start],:host .c-data-table [data-align=start] .children{align-items:flex-start}:host .c-data-table [data-justify=center],:host .c-data-table [data-align=center] .children{align-items:center}:host .c-data-table [data-align=end],:host .c-data-table [data-justify=end] .children{justify-content:flex-end}:host .c-data-table [data-align=start],:host .c-data-table [data-justify=start] .children{justify-content:flex-start}:host .c-data-table [data-align=center],:host .c-data-table [data-justify=center] .children{justify-content:center}:host .c-data-table th,:host .c-data-table td{font-weight:400}:host .c-data-table th>div,:host .c-data-table td>div{align-items:center;box-sizing:border-box;display:flex;line-height:normal;padding:12px;width:100%}:host .c-data-table th{font-size:14px;padding:4px}:host .c-data-table th.selection{width:56px}:host .c-data-table th.indicator{width:46px}:host .c-data-table th>div{border-radius:4px;flex-wrap:nowrap;gap:8px;height:48px;white-space:nowrap}:host .c-data-table th>div.sortable:hover{background-color:var(--_c-data-table-background-color-hover);color:var(--_c-data-table-active);cursor:pointer}:host .c-data-table th>div.sortable:hover svg{fill:var(--_c-data-table-active)}:host .c-data-table th>div.selection--heading{padding-left:8px;padding-right:0;margin-right:-8px}:host .c-data-table td{font-size:16px}:host .c-data-table td>div{align-items:flex-start;flex-direction:column;gap:8px;justify-content:center;min-height:56px;padding:12px}:host .c-data-table td>div.selection{margin-right:-4px;padding:7px 0 7px 12px}:host .c-data-table td>div c-tag{--c-tag-margin:0}:host .c-data-table td.loader{background-color:var(--_c-data-table-border-color);height:2px;position:relative}:host .c-data-table td.loader>div{height:2px;min-height:auto;padding:0}:host .c-data-table td.info>div{height:108px;justify-content:center}:host .c-data-table td svg{transition:transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1)}:host .c-data-table thead{background-color:var(--_c-data-table-background-color);position:relative}:host .c-data-table thead.sticky{box-shadow:0 2px 0 0 var(--_c-data-table-border-color);position:sticky;top:0;z-index:3}:host .c-data-table thead .c-data-table__header-indicators{pointer-events:none}:host .c-data-table thead .c-data-table__header-indicators th>div{margin-top:-56px;display:flex;justify-items:space-between}:host .c-data-table thead .c-data-table__header-indicators c-icon-button{background-color:rgba(255, 255, 255, 0.75);border-radius:50%;pointer-events:all}:host .c-data-table tfoot{background-color:var(--_c-data-table-background-color)}:host .c-data-table tfoot tr{box-shadow:inset 0 1px 0 0 var(--_c-data-table-border-color)}:host .c-data-table tfoot td>div{align-items:center;flex-direction:row;justify-content:flex-start;min-height:48px}:host .c-data-table tfoot td c-pagination{--c-pagination-button-active-background-color:var(--_c-data-table-pagination-button-active-background-color);--c-pagination-button-active-background-color-hover:var(--_c-data-table-pagination-button-active-background-color-hover);--c-pagination-button-active-text-color:var(--_c-data-table-pagination-button-active-text-color);--c-pagination-button-background-color:var(--_c-data-table-pagination-button-background-color);--c-pagination-button-background-color-hover:var(--_c-data-table-pagination-button-background-color-hover);--c-pagination-button-text-color:var(--_c-data-table-pagination-button-text-color);--c-pagination-menu-text-color:var(--_c-data-table-menu-text-color);--c-pagination-menu-text-color-active:var(--_c-data-table-menu-text-color-active);--c-pagination-menu-background-color-hover:var(--_c-data-table-menu-background-color-hover);--c-pagination-menu-outline-color:var(--_c-data-table-menu-text-color);flex:1}:host .c-data-table tbody{}@supports (-webkit-hyphens: none){:host .c-data-table tbody tr{border-bottom:1px solid var(--_c-data-table-border-color)}}:host .c-data-table tbody tr{box-shadow:inset 0 1px 0 0 var(--_c-data-table-border-color)}:host .c-data-table tbody tr.actions{box-shadow:none}:host .c-data-table tbody tr.actions td>div{background-color:rgba(0, 0, 0, 0.015);height:auto}:host .c-data-table tbody tr.active{box-shadow:inset 2px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 2px 0 var(--_c-data-table-active);border-radius:6px 6px 0 0}:host .c-data-table tbody tr.active svg{transform:rotate(180deg)}:host .c-data-table tbody tr.active+.additional-data{border-radius:0 0 6px 6px;box-shadow:inset 2px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 -2px 0 var(--_c-data-table-active)}:host .c-data-table tbody tr.active.selected{box-shadow:inset 4px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 2px 0 var(--_c-data-table-active)}:host .c-data-table tbody tr.selected{background-color:var(--_c-data-table-selected-row-background-color);box-shadow:inset 4px 0 0 var(--_c-data-table-active), inset 0 1px 0 0 var(--_c-data-table-border-color)}:host .c-data-table tbody tr.selected+.additional-data{box-shadow:inset 4px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 -2px 0 var(--_c-data-table-active)}:host .c-data-table__loader{background-color:var(--_c-data-table-border-color);height:2px;overflow:hidden;position:absolute;width:100%}:host .c-data-table .loading-bar{animation:loading 1s ease-in 0.5s infinite;background-color:var(--_c-data-table-active);height:100%;left:-50%;position:absolute;width:50%}@keyframes loading{0%{transform:translateX(0)}100%{transform:translateX(400%)}}:host .c-data-table .additional-data{display:none}:host .c-data-table .additional-data.active{display:table-row}:host .c-data-table .additional-data ul{list-style:none;margin:0;padding:0;width:100%}:host .c-data-table .additional-data ul li{padding:12px}:host .c-data-table .additional-data ul li:not(:last-child){box-shadow:inset 0 -1px 0 0 var(--_c-data-table-border-color)}:host .c-data-table .additional-data ul li span{color:var(--_c-data-table-active);font-weight:600}:host .c-data-table .additional-data ul li .title{display:flex;gap:8px}:host .c-data-table .additional-data ul li .title+.children{margin-top:8px}:host .c-data-table--scrollable{position:relative}:host .c-data-table--hoverable tbody tr:not(.additional-data){cursor:pointer}:host .c-data-table--hoverable tbody tr:not(.additional-data):hover{background-color:var(--_c-data-table-background-color-hover);border-radius:6px;box-shadow:inset 0 0 0 2px var(--_c-data-table-active);overflow:hidden}:host .c-data-table--hoverable tbody tr:not(.additional-data):hover c-button.text,:host .c-data-table--hoverable tbody tr:not(.additional-data):hover c-button.ghost{--c-button-hover:var(--c-primary-200)}:host .c-data-table--hoverable tbody tr:not(.additional-data).active:hover{border-radius:6px 6px 0 0;box-shadow:inset 2px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 2px 0 var(--_c-data-table-active)}:host .c-data-table--hoverable tbody tr:not(.additional-data).selected.active:hover{border-radius:6px 6px 0 0;box-shadow:inset 4px 0 0 var(--_c-data-table-active), inset -2px 0 0 var(--_c-data-table-active), inset 0 2px 0 var(--_c-data-table-active)}:host .c-data-table--hoverable tbody tr:not(.additional-data).selected:hover{border-radius:6px;box-shadow:inset 4px 0 0 var(--_c-data-table-active), inset 0 0 0 2px var(--_c-data-table-active)}:host .sorted-column{background-color:var(--_c-data-table-highlighted-column-background-color)}:host([horizontal-scrolling]){overflow-x:scroll}";var v=undefined&&undefined.__rest||function(t,a){var i={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&a.indexOf(e)<0)i[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++){if(a.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o]))i[e[o]]=t[e[o]]}return i};const u=class{constructor(i){t(this,i);this.paginate=a(this,"paginate",7);this.expand=a(this,"expand",7);this.sort=a(this,"sort",7);this.selection=a(this,"selection",7);this._debounce=null;this._extraHeaders=[];this._isValidated=false;this._isVisible=false;this._sortedData=[];this.data=[];this.externalData=false;this.headers=[];this.hideFooter=false;this.footerOptions={hideDetails:false,simple:false,hideRange:false,size:"default"};this.loading=false;this.loadingText="Loading data";this.noDataText="No data";this.pagination=undefined;this.selectable=false;this.singleSelection=false;this.selectionProperty=null;this.singleExpansion=false;this.sortBy=null;this.sortDirection=null;this.stickyHeader=false;this.horizontalScrolling=false;this._activeRows=[];this._data=[];this._isIndeterminate=false;this._isPaginationSimple=false;this._selections=[];this.hasOverflow=false;this.hiddenHeaders=[];this.initiallyHiddenHeaders=[];this.forceRender=false;this.breakpoints=[];this.markedFooterWidth=0;this.parentWidth=0;this.firstCellHidden=false;this.lastCellHidden=false}onHiddenHeaderChange(){this._getData()}onDataChange(){this._getData();this._handleInitialHeaders()}onHeaderChange(){this._handleInitialHeaders()}onSingleSelectionChange(){this.clearSelections()}onLoadingChange(t){if(!t){this._setIndeterminateStatus()}}async clearSelections(){this._selections=[];this._emitChange();this._setIndeterminateStatus()}async getData(){return this._sortedData}componentWillLoad(){var t,a;this.sortBy=(t=this.sortBy)!==null&&t!==void 0?t:this.headers[0].key;this.sortDirection=(a=this.sortDirection)!==null&&a!==void 0?a:"asc";this._getData();this._handleInitialHeaders()}componentDidLoad(){if(!this.horizontalScrolling){this._rootIntersectionObserver=new IntersectionObserver((([t])=>{if(t.isIntersecting){this._handleResponsiveHeaders();this._isVisible=true}}));this._resizeObserver=new ResizeObserver((()=>{this._handleResize()}));this._rootIntersectionObserver.observe(this.element)}else{const[t]=this._headerKeys;const a=this._headerKeys[this._headerKeys.length-1];this._firstCellIntersectionObserver=new IntersectionObserver((([t])=>{this.firstCellHidden=!t.isIntersecting}),{threshold:1,rootMargin:"16px",root:this.element});this._lastCellIntersectionObserver=new IntersectionObserver((([t])=>{this.lastCellHidden=!t.isIntersecting}),{threshold:1,rootMargin:"16px",root:this.element});this._resizeObserver=new ResizeObserver((()=>{this._handleScrollWidth()}));this._firstCellIntersectionObserver.observe(this._tableElement.querySelector(`[data-id="${t}"]`));this._lastCellIntersectionObserver.observe(this._tableElement.querySelector(`[data-id="${a}"]`))}this._resizeObserver.observe(this.element)}disconnectedCallback(){var t,a,i,e;(t=this._resizeObserver)===null||t===void 0?void 0:t.disconnect();(a=this._rootIntersectionObserver)===null||a===void 0?void 0:a.disconnect();(i=this._firstCellIntersectionObserver)===null||i===void 0?void 0:i.disconnect();(e=this._lastCellIntersectionObserver)===null||e===void 0?void 0:e.disconnect()}_handleInitialHeaders(){this.initiallyHiddenHeaders=this.headers.filter((t=>!!t.hidden)).map((t=>t.key));this.hiddenHeaders=[...new Set([...this.hiddenHeaders,...this.initiallyHiddenHeaders])]}_handleHeaderVisibility(t,a,i){var e;const o=this._headers.findIndex((a=>a.key===t.dataset.id));const s=t.getBoundingClientRect();const r=s.right-i<=a;const n=t.dataset.id===Array.from(this._headerRefs.keys()).at(0);const l=(e=this._headers[o])===null||e===void 0?void 0:e.pinned;if(!r&&l&&o>=1){const a=Array.from(this._headerRefs.values()).reverse().find((t=>{var a;if(!t)return false;return!((a=this._headers.find((a=>a.key===t.dataset.id)))===null||a===void 0?void 0:a.pinned)}));this.hiddenHeaders=[...new Set([...this.initiallyHiddenHeaders,...this.hiddenHeaders,(a||t).dataset.id])];return}if(!r&&!n){this.hiddenHeaders=[...new Set([...this.initiallyHiddenHeaders,...this.hiddenHeaders,t.dataset.id])]}}_handleResponsiveHeaders(){const{width:t}=this._tableElement.getBoundingClientRect();const{width:a,x:i}=this.element.getBoundingClientRect();if(this._debounce!==null){clearTimeout(this._debounce);this._debounce=null}if(a<t){this.breakpoints=[...new Set([...this.breakpoints,t])];setTimeout((()=>{for(const t of this._headerRefs.values()){if(t){this._handleHeaderVisibility(t,a,i)}}this._debounce=setTimeout((()=>{var t,i;const e=((i=(t=this._footerElement)===null||t===void 0?void 0:t.getBoundingClientRect())===null||i===void 0?void 0:i.width)||0;if(a<e){this.markedFooterWidth=e;this._isPaginationSimple=true}}),200)}),0)}else if(this.breakpoints.length>0&&t>=this.breakpoints[this.breakpoints.length-1]){this.breakpoints.pop();const t=this.headers.find((t=>this.hiddenHeaders.includes(t.key)));if(!!t){const a=this.hiddenHeaders.indexOf(t.key);this.hiddenHeaders.splice(a,1);this.hiddenHeaders=[...new Set([...this.hiddenHeaders,...this.initiallyHiddenHeaders])]}}this._debounce=setTimeout((()=>{if(a>=this.markedFooterWidth&&this.markedFooterWidth>0){this._isPaginationSimple=false}}),200)}_addHeaderRef(t,a){if(!this._headerRefs){this._headerRefs=new Map([[t,a]]);return}this._headerRefs.set(t,a)}_getData(){this._extraHeaders=this.headers.filter((t=>{var a;return!Object.keys(((a=this.data)===null||a===void 0?void 0:a[0])||{}).includes(t.key)}));const t=this._extraHeaders.reduce(((t,a)=>Object.assign(Object.assign({},t),{[a.key]:{value:null}})),{});const a=this.data.map((a=>Object.assign(Object.assign({},a),t))).reduce(((t,a)=>{const i={_hiddenData:[]};Object.keys(a).forEach((t=>{i[t]=a[t]}));this.hiddenHeaders.forEach((t=>{const e=this.headers.find((a=>a.key===t));i._hiddenData.push({id:e===null||e===void 0?void 0:e.key,key:e===null||e===void 0?void 0:e.value,value:a[t]})}));t.push(i);return t}),[]);this._data=this._sortData(a);this.pagination=Object.assign(Object.assign({},this.pagination),{itemCount:this.data.length});this._validateProps(this._data[0]);this._handleScrollWidth();requestAnimationFrame((()=>{this._handleResize()}))}_getSelectionValue(t,a){var i;return!!this.selectionProperty?((i=t[this.selectionProperty])===null||i===void 0?void 0:i.value)||a:a}get _headers(){return this.headers.map((t=>Object.assign(Object.assign({},t),{pinned:!!t.pinned}))).filter((t=>!this.hiddenHeaders.includes(t.key)&&!t.hidden))}get _headerKeys(){return this._headers.map((t=>t.key))}get _hasHiddenData(){return!!this.hiddenHeaders.length}_emitChange(){this.selection.emit(this._selections)}_setIndeterminateStatus(){requestAnimationFrame((()=>{this._isIndeterminate=this._isPageIndeterminate();this._refresh()}))}_sortData(t){var a,i,e,o;if(!this.sortBy||this.externalData)return t;const s=t.sort(((t,a)=>{const i=t[this.sortBy].value;const e=a[this.sortBy].value;if(typeof i==="string"){if(this.sortDirection==="asc"){return i.toLowerCase().localeCompare(e.toLowerCase())}return e.toLowerCase().localeCompare(i.toLowerCase())}if(typeof i==="number"){if(this.sortDirection==="asc"){return i-e}return e-i}}));this._sortedData=s.map((t=>{const{_hiddenData:a}=t,i=v(t,["_hiddenData"]);const e=a.reduce(((t,a)=>{var i;t[a.id]=a.value.plainTextValue||((i=a.value.formattedValue)===null||i===void 0?void 0:i.trim())||a.value.value;return t}),{});const o=Object.entries(i).reduce(((t,[a,i])=>{var e;t[a]=i.plainTextValue||((e=i.formattedValue)===null||e===void 0?void 0:e.toString().trim())||i.value;return t}),{});return Object.assign(Object.assign({},o),e)}));return!this.hideFooter?s.slice((i=(a=this.pagination)===null||a===void 0?void 0:a.startFrom)!==null&&i!==void 0?i:0,((o=(e=this.pagination)===null||e===void 0?void 0:e.endTo)!==null&&o!==void 0?o:this.data.length)+1):s}_handleScrollWidth(){this.parentWidth=this.element.getBoundingClientRect().width}_handleResize(){if(this._isVisible){this._handleResponsiveHeaders()}}_getIndex(t){let a=t;if(!this.selectionProperty&&!!this.pagination&&typeof a==="number"){a+=this.pagination.startFrom;if(this.sortDirection==="desc"){a=this.pagination.itemCount-1-a}}return a}_getSelectionsForPage(){return this._selections.filter((t=>this._data.map(((t,a)=>this._getSelectionValue(t,this._getIndex(a)))).includes(t)))}_hasSelectionsOnPage(){return this._getSelectionsForPage().length>0}_isPageIndeterminate(){const t=this._getSelectionsForPage();return this._hasSelectionsOnPage()&&t.length<this._data.length}_onHeadingSelection(t){t===null||t===void 0?void 0:t.stopPropagation();t===null||t===void 0?void 0:t.preventDefault();if(t instanceof KeyboardEvent&&t.type==="keyup"&&t.key!==" "){return}if(this._debounce!==null){clearTimeout(this._debounce);this._debounce=null}this._debounce=setTimeout((()=>{if(this._data.length===this._getSelectionsForPage().length){this._selections=[...this._selections.filter((t=>!this._data.map(((t,a)=>this._getSelectionValue(t,this._getIndex(a)))).includes(t)))];this._setIndeterminateStatus();this._emitChange();return}this._selections=[...new Set([...this._selections,...this._data.map(((t,a)=>this._getSelectionValue(t,this._getIndex(a))))])];this._setIndeterminateStatus();this._emitChange()}),200)}_onPaginationChange(t){if(this.externalData){this.paginate.emit(t.detail);return}this.pagination=Object.assign(Object.assign({},this.pagination),t.detail);this._setIndeterminateStatus();this._getData()}_onSelection(t){if(this.singleSelection){this._selections=[t];this._emitChange();this._refresh();return}if(this._selections.includes(t)){this._selections=this._selections.filter((a=>a!==t))}else{this._selections=[...this._selections,t]}this._emitChange();this._setIndeterminateStatus()}_onSort(t){if(this.sortBy===t){this.sortDirection=this.sortDirection==="asc"?"desc":"asc"}else{this.sortDirection="asc"}this.sortBy=t;this.sort.emit({sortBy:this.sortBy,direction:this.sortDirection});this._getData();this._setIndeterminateStatus();this._refresh()}_onToggleAdditionalData(t,a,i){if(!this._hasHiddenData||t.target.tagName==="C-CHECKBOX")return;const e=this.singleExpansion?this._activeRows[0]===a:this._activeRows.includes(a);const{_hiddenData:o}=i,s=v(i,["_hiddenData"]);Object.keys(s).forEach((t=>{s[t]=s[t].value}));o.forEach((t=>{s[t.id]=t.value.value}));this.expand.emit({active:!e,row:s});if(this.singleExpansion){this._activeRows=e?[]:[a];return}if(e){this._activeRows=this._activeRows.filter((t=>t!==a));return}this._activeRows=[...this._activeRows,a]}_handleKeyUp(t,a,i){t.preventDefault();if(t.key==="Enter"){this._onToggleAdditionalData(t,a,i)}}_refresh(){this.forceRender=!this.forceRender}_renderAdditioanlDataRow(t,a={}){return this._hasHiddenData&&i("tr",{class:{"additional-data":true,active:this._activeRows.includes(t)}},i("td",{colSpan:100},i("div",null,i("ul",null,this._renderHiddenCells(t),this._renderHiddenHeaderChildren(t,a)))))}_renderCellData(t,a,e,o){var s;const r=a.component||((s=this._headers[e])===null||s===void 0?void 0:s.component);const n=(r===null||r===void 0?void 0:r.tag)||null;const l=!!(r===null||r===void 0?void 0:r.injectValue);const d=(r===null||r===void 0?void 0:r.params)||{};if(l){d.value=a.value}return!!n?i(n,Object.assign({},d,{onClick:i=>{var e;(e=d===null||d===void 0?void 0:d.onClick)===null||e===void 0?void 0:e.call(d,{index:o,value:a.value,data:this.data[o],event:i,key:t})}}),a.formattedValue||a.value):a.formattedValue||a.value}_renderCellChildren(t,a,e,o){return t.children.map((s=>{var r,n,l;const d=(r=s.component)===null||r===void 0?void 0:r.tag;const c=((n=s.component)===null||n===void 0?void 0:n.params)||{};const{_hiddenData:h=[]}=o,b=v(o,["_hiddenData"]);const u=Object.assign(Object.assign({},b),h.reduce(((t,a)=>{t[a.id]=a.value;return t}),{}));return!!d?i(d,Object.assign({},c,!(c===null||c===void 0?void 0:c.onClick)?{}:{onClick:i=>{c.onClick({value:t.value,index:a,event:i,key:e,data:u})}}),!!((l=s.children)===null||l===void 0?void 0:l.length)?this._renderCellChildren(s,a,e,o):s.value):s.value}))}_renderExpansionIndicator(t,a={}){return this._hasHiddenData&&i("td",null,i("div",{tabindex:"0",onKeyUp:i=>this._handleKeyUp(i,t,a)},i("svg",{width:"22",height:"22",viewBox:"0 0 24 24"},i("path",{d:r}))))}_renderHiddenCells(t){return this._data[t]._hiddenData.filter((t=>!this._extraHeaders.find((a=>a.key===t.id)))).map((({id:t,key:a,value:e})=>{const o=this._headers.findIndex((a=>a.key===t));return i("li",null,!!a&&i("div",{class:"title"},i("span",null,a,":"),this._renderCellData(t,e,o,o)),!!e.children&&i("div",{class:"children"},this._renderCellChildren(e,o,t,{})))}))}_renderHiddenHeaderChildren(t,a){return this._data[t]._hiddenData.map((({id:e,key:o})=>{var s;const r=this.headers.findIndex((t=>t.key===e));return!!((s=this.headers[r])===null||s===void 0?void 0:s.children)&&i("li",null,i("div",{class:"children"},this._renderCellChildren(this.headers[r],t,o,a)))}))}_renderLoaderRow(){return i("tr",null,i("td",{class:"loader",colSpan:100},this.loading&&i("div",{class:"c-data-table__loader"},i("div",{class:"loading-bar"}))))}_renderRows(){return!!this._data.length&&Object.values(this._data).map(((t,a)=>{let o=this._getSelectionValue(t,a);if(!this.selectionProperty&&typeof o==="number"){o=this._getIndex(o)}const s=!!this._selections.includes(o);return i(e,null,i("tr",{class:{active:this._activeRows.includes(a),parent:this._hasHiddenData,selected:s},onClick:i=>this._onToggleAdditionalData(i,a,t)},this._renderSelectionCell(s,o),this._renderExpansionIndicator(a,t),this._renderTableCells(a,t)),this._renderAdditioanlDataRow(a,t))}))}_renderSelectionCell(t,a){return this.selectable&&i("td",null,i("div",{class:"selection"},i("c-checkbox",{value:t,"hide-details":true,onChangeValue:()=>this._onSelection(a)})))}_renderSortIndicator(t){let a=d;if(t===this.sortBy&&this.sortDirection==="asc"){a=c}if(t===this.sortBy&&this.sortDirection==="desc"){a=h}return i("svg",{width:"24",height:"24",viewBox:"0 0 24 24",tabindex:0},i("path",{d:a}))}_renderStatusTextRow(){return!this._data.length&&i("tr",null,i("td",{class:"info",colSpan:100},i("div",null,this.loading?this.loadingText:this.noDataText)))}_renderTableBody(){return i("tbody",null,this._renderLoaderRow(),this._renderStatusTextRow(),this._renderRows())}_renderTableCell(t,a,e,o,s={}){var r;const n=this.headers.find((a=>a.key===t));const l=this.hiddenHeaders.includes(t);return!!n&&!l&&i("td",null,i("div",{"data-align":n===null||n===void 0?void 0:n.align,"data-justify":n===null||n===void 0?void 0:n.justify},this._renderCellData(t,a,e,o),!!a.children&&i("div",{class:"children"},this._renderCellChildren(a,o,t,s)),!!((r=this.headers.find((a=>a.key===t)))===null||r===void 0?void 0:r.children)&&i("div",{class:"children"},this._renderCellChildren(this.headers.find((a=>a.key===t)),o,t,s))))}_renderTableCells(t,a={}){return this._sortCellProperties(a).map((([i,e],o)=>this._renderTableCell(i,e,o,t,a)))}_renderTableFooter(){const t=this.horizontalScrolling?{maxWidth:`${this.parentWidth}px`,position:"sticky",left:"0"}:{};return!!this.pagination&&i("tfoot",null,i("tr",{ref:t=>this._footerElement=t},i("td",{colSpan:100},i("div",{class:"c-data-table__footer",style:t},i("c-pagination",Object.assign({},this.footerOptions,{value:this.pagination,simple:this._isPaginationSimple,onChangeValue:t=>this._onPaginationChange(t)}))))))}_renderTableHeader(){const t=this.horizontalScrolling?{width:`${this.parentWidth-8}px`,position:"sticky",left:"4px"}:{};return i("thead",{class:{sticky:this.stickyHeader}},i("tr",null,this.selectable&&i("th",{class:"selection"},!this.singleSelection&&i("div",{class:"selection--heading"},i("c-checkbox",{value:this._hasSelectionsOnPage(),indeterminate:this._isIndeterminate,"hide-details":true,onClick:t=>this._onHeadingSelection(t),onKeyUp:t=>this._onHeadingSelection(t)}))),this._hasHiddenData&&i("th",{class:"indicator"}),!!this._headers.length&&this._headers.map((t=>{const a=!!t.sortable||typeof t.sortable==="undefined";const e=Object.assign(Object.assign({"data-id":t.key,ref:a=>this._addHeaderRef(t.key,a)},!!t&&{style:Object.assign({},t.width&&{minWidth:t.width})}),a&&{onClick:()=>this._onSort(t.key),onKeyUp:()=>this._onSort(t.key)});return i("th",Object.assign({},e),i("div",{class:{sortable:a}},t.value,a&&this._renderSortIndicator(t.key)))}))),this.horizontalScrolling&&i("tr",{class:"c-data-table__header-indicators"},i("th",{colSpan:100},i("div",{style:t},this.firstCellHidden&&i("c-icon-button",{class:"first",size:"small",outlined:true,onClick:()=>this._scrollLeft()},i("c-icon",{path:n})),i("c-spacer",null),this.lastCellHidden&&i("c-icon-button",{class:"last",size:"small",outlined:true,onClick:()=>this._scrollRight()},i("c-icon",{path:l}))))))}_scrollLeft(){const t=this.element.getBoundingClientRect().left;const a=this._headerKeys.filter((a=>{var i;const e=(i=this._tableElement.querySelector(`[data-id="${a}"]`))===null||i===void 0?void 0:i.getBoundingClientRect().left;return e<t-2}));if(a.length){if(a.length===1){this._tableElement.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"});return}this._tableElement.querySelector(`[data-id="${a[a.length-1]}"]`).scrollIntoView({behavior:"smooth",block:"nearest"})}}_scrollRight(){const t=this.element.getBoundingClientRect().right;const a=this._headerKeys.filter((a=>{var i;const e=(i=this._tableElement.querySelector(`[data-id="${a}"]`))===null||i===void 0?void 0:i.getBoundingClientRect().right;return e>t+2}));if(a.length){this._tableElement.querySelector(`[data-id="${a[0]}"]`).scrollIntoView({behavior:"smooth",block:"nearest"})}}_sortCellProperties(t){const a=Object.entries(t).filter((([t])=>![...this.hiddenHeaders,"_hiddenData"].includes(t))).sort((([t],[a])=>this._headerKeys.indexOf(t)-this._headerKeys.indexOf(a)));return a}_validateProps(t){if(!!t&&!this._isValidated&&this.selectionProperty!==null&&!t[this.selectionProperty]){console.warn(`[C-DATA-TABLE] Invalid selection property '${this.selectionProperty}'. Using row index as a fallback. This may lead to unexpected behavior.`);this._isValidated=true}}render(){const t={"c-data-table":true,"c-data-table--hoverable":this.selectable||this._hasHiddenData,"c-data-table--scrollable":this.horizontalScrolling};return i(o,null,i("table",{class:t,ref:t=>this._tableElement=t},i("colgroup",null,[...this.selectable?["_selection"]:[],...this.hiddenHeaders.length?["_hidden"]:[],...this._headerKeys].map((t=>i("col",{class:this.sortBy===t&&"sorted-column"})))),this._renderTableHeader(),this._renderTableBody(),!this.hideFooter&&this._renderTableFooter()))}get element(){return s(this)}static get watchers(){return{hiddenHeaders:["onHiddenHeaderChange"],data:["onDataChange"],headers:["onHeaderChange"],singleSelection:["onSingleSelectionChange"],loading:["onLoadingChange"]}}};u.style=b;export{u as c_data_table};
//# sourceMappingURL=p-f216dda9.entry.js.map