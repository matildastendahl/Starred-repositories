{"version":3,"names":["cStepsCss","CSteps","this","_isInitialized","watchPropHandler","_handleDividers","_stepElements","host","querySelectorAll","dividers","forEach","item","index","current","value","complete","length","div","document","createElement","classList","toggle","add","after","label","textContent","componentDidLoad","_resizeObserver","ResizeObserver","entry","maxWidth","isMobile","contentRect","width","shadowRoot","querySelector","node","window","requestAnimationFrame","observe","_getA11yMessage","total","Math","min","render","h","Host","tabindex","class"],"sources":["src/components/c-steps/c-steps.scss?tag=c-steps&encapsulation=shadow","src/components/c-steps/c-steps.tsx"],"sourcesContent":[":host {\n  /**\n   * @prop --c-steps-outline-color: Steps outline color\n   */\n  --_c-steps-outline-color: var(--c-steps-outline-color, var(--c-primary-600));\n\n  // private\n  --_c-steps-color: var(--c-step-color, var(--c-tertiary-500));\n  --_c-steps-color-complete: var(--c-step-color-complete, var(--c-primary-600));\n\n  width: 100%;\n  display: grid;\n  gap: 8px;\n  border-radius: 6px;\n}\n\n@supports selector(:focus-visible) {\n  :host(:focus) {\n    outline: none;\n  }\n}\n\n:host(:focus-visible) {\n  outline: 2px var(--_c-steps-outline-color) solid;\n  outline-offset: 2px;\n}\n\n.c-steps {\n  --c-steps-divider-width: calc(100% + 160px);\n  --c-steps-divider-margin: 10px -80px 0;\n\n  width: 100%;\n  display: flex;\n  flex-wrap: nowrap;\n\n  slot {\n    display: flex;\n    justify-items: space-between;\n    width: 100%;\n  }\n\n  ::slotted(.divider) {\n    height: 2px;\n    flex: 1;\n    background-color: var(--_c-steps-color);\n    width: var(--c-steps-divider-width);\n    margin: var(--c-steps-divider-margin);\n  }\n\n  ::slotted(.divider.complete) {\n    background-color: var(--_c-steps-color-complete);\n    height: 4px;\n    margin-top: 9px;\n  }\n\n  &.mobile {\n    --c-steps-divider-width: calc(100% + 11px);\n    --c-steps-divider-margin: 10px -10px 0;\n  }\n}\n\n.visuallyhidden {\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n","import {\n  Component,\n  Host,\n  h,\n  Prop,\n  EventEmitter,\n  Event,\n  Element,\n  Watch,\n  State,\n} from '@stencil/core';\n\n/**\n * @group Indicators\n * @slot Default slot - Default slot\n */\n@Component({\n  tag: 'c-steps',\n  styleUrl: 'c-steps.scss',\n  shadow: true,\n})\nexport class CSteps {\n  @Element() host: HTMLCStepsElement;\n\n  /**\n   * Value of the accordion (current step number)\n   */\n  @Prop() value!: number | string;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  @State() isMobile = false;\n\n  @State() label = '';\n\n  @Watch('value')\n  watchPropHandler() {\n    this._handleDividers();\n  }\n\n  private _isInitialized = false;\n\n  private _resizeObserver: ResizeObserver;\n\n  private _stepElements: NodeListOf<HTMLCStepElement>;\n\n  private _handleDividers() {\n    this._stepElements = this.host.querySelectorAll('c-step');\n    const dividers: NodeListOf<HTMLDivElement> =\n      this.host.querySelectorAll('.divider');\n\n    this._stepElements.forEach((item, index) => {\n      item.current = index + 1 === +this.value;\n      item.complete = index + 1 < +this.value;\n\n      if (index + 1 < this._stepElements.length) {\n        const div = this._isInitialized\n          ? dividers[index]\n          : document.createElement('div');\n\n        div.classList.toggle('complete', !!item.complete);\n\n        if (!this._isInitialized) {\n          div.classList.add('divider');\n\n          item.after(div);\n        }\n      }\n\n      if (item.current) {\n        this.label = item.textContent;\n      }\n    });\n\n    this._isInitialized = true;\n  }\n\n  componentDidLoad() {\n    this._handleDividers();\n\n    this._resizeObserver = new ResizeObserver(([entry]) => {\n      const maxWidth = this._stepElements.length * 180;\n\n      this.isMobile = maxWidth > entry.contentRect.width;\n\n      this.host.shadowRoot\n        .querySelector('.c-steps')\n        .classList.toggle('mobile', this.isMobile);\n\n      this._stepElements.forEach((node) => {\n        node.classList.toggle('mobile', this.isMobile);\n      });\n    });\n\n    window.requestAnimationFrame(() => {\n      this._resizeObserver.observe(this.host);\n    });\n  }\n\n  private _getA11yMessage(total: number, current: number) {\n    return `\n      Steps, step ${Math.min(current, total)} of ${total}.\n      ${this.label}.\n      ${current - 1} step${current - 1 !== 1 ? 's' : ''} marked as completed.\n    `;\n  }\n\n  render() {\n    return (\n      <Host tabindex=\"0\">\n        {this._stepElements && (\n          <span class=\"visuallyhidden\">\n            {this._getA11yMessage(this._stepElements.length, +this.value)}\n          </span>\n        )}\n        <div class=\"c-steps\" aria-hidden=\"true\">\n          <slot></slot>\n        </div>\n        {this.isMobile && (\n          <div class=\"c-steps__label\" aria-hidden=\"true\">\n            {this.label}\n          </div>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"gEAAA,MAAMA,EAAY,+xC,MCqBLC,EAAM,M,kEAsBTC,KAAAC,eAAiB,M,mCATL,M,WAEH,E,CAGjB,gBAAAC,GACEF,KAAKG,iB,CASC,eAAAA,GACNH,KAAKI,cAAgBJ,KAAKK,KAAKC,iBAAiB,UAChD,MAAMC,EACJP,KAAKK,KAAKC,iBAAiB,YAE7BN,KAAKI,cAAcI,SAAQ,CAACC,EAAMC,KAChCD,EAAKE,QAAUD,EAAQ,KAAOV,KAAKY,MACnCH,EAAKI,SAAWH,EAAQ,GAAKV,KAAKY,MAElC,GAAIF,EAAQ,EAAIV,KAAKI,cAAcU,OAAQ,CACzC,MAAMC,EAAMf,KAAKC,eACbM,EAASG,GACTM,SAASC,cAAc,OAE3BF,EAAIG,UAAUC,OAAO,aAAcV,EAAKI,UAExC,IAAKb,KAAKC,eAAgB,CACxBc,EAAIG,UAAUE,IAAI,WAElBX,EAAKY,MAAMN,E,EAIf,GAAIN,EAAKE,QAAS,CAChBX,KAAKsB,MAAQb,EAAKc,W,KAItBvB,KAAKC,eAAiB,I,CAGxB,gBAAAuB,GACExB,KAAKG,kBAELH,KAAKyB,gBAAkB,IAAIC,gBAAe,EAAEC,MAC1C,MAAMC,EAAW5B,KAAKI,cAAcU,OAAS,IAE7Cd,KAAK6B,SAAWD,EAAWD,EAAMG,YAAYC,MAE7C/B,KAAKK,KAAK2B,WACPC,cAAc,YACdf,UAAUC,OAAO,SAAUnB,KAAK6B,UAEnC7B,KAAKI,cAAcI,SAAS0B,IAC1BA,EAAKhB,UAAUC,OAAO,SAAUnB,KAAK6B,SAAS,GAC9C,IAGJM,OAAOC,uBAAsB,KAC3BpC,KAAKyB,gBAAgBY,QAAQrC,KAAKK,KAAK,G,CAInC,eAAAiC,CAAgBC,EAAe5B,GACrC,MAAO,uBACS6B,KAAKC,IAAI9B,EAAS4B,SAAaA,aAC3CvC,KAAKsB,iBACLX,EAAU,SAASA,EAAU,IAAM,EAAI,IAAM,+B,CAInD,MAAA+B,GACE,OACEC,EAACC,EAAI,CAACC,SAAS,KACZ7C,KAAKI,eACJuC,EAAA,QAAMG,MAAM,kBACT9C,KAAKsC,gBAAgBtC,KAAKI,cAAcU,QAASd,KAAKY,QAG3D+B,EAAA,OAAKG,MAAM,UAAS,cAAa,QAC/BH,EAAA,cAED3C,KAAK6B,UACJc,EAAA,OAAKG,MAAM,iBAAgB,cAAa,QACrC9C,KAAKsB,O"}