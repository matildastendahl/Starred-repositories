{"version":3,"names":["cDataTableCss","CDataTable","this","_debounce","_extraHeaders","_isValidated","_isVisible","_sortedData","hideDetails","simple","hideRange","size","onHiddenHeaderChange","_getData","onDataChange","_handleInitialHeaders","onHeaderChange","onSingleSelectionChange","clearSelections","onLoadingChange","loading","_setIndeterminateStatus","_selections","_emitChange","getData","componentWillLoad","sortBy","_a","headers","key","sortDirection","_b","componentDidLoad","horizontalScrolling","_rootIntersectionObserver","IntersectionObserver","entry","isIntersecting","_handleResponsiveHeaders","_resizeObserver","ResizeObserver","_handleResize","observe","element","firstCell","_headerKeys","lastCell","length","_firstCellIntersectionObserver","firstCellHidden","threshold","rootMargin","root","_lastCellIntersectionObserver","lastCellHidden","_handleScrollWidth","_tableElement","querySelector","disconnectedCallback","disconnect","_c","_d","initiallyHiddenHeaders","filter","header","hidden","map","hiddenHeaders","Set","_handleHeaderVisibility","rootWidth","x","index","_headers","findIndex","h","dataset","id","position","getBoundingClientRect","isFullyVisible","right","isLastVisibleHeader","Array","from","_headerRefs","keys","at","isPinned","pinned","nextUnpinnedHeader","values","reverse","find","hdr","width","tableWidth","clearTimeout","breakpoints","setTimeout","footerWidth","_footerElement","markedFooterWidth","_isPaginationSimple","pop","displayHeader","includes","headerIndex","indexOf","splice","_addHeaderRef","el","Map","set","Object","data","extraCells","reduce","cells","assign","value","items","row","cell","item","_hiddenData","forEach","cellData","push","_data","_sortData","pagination","itemCount","_validateProps","requestAnimationFrame","_getSelectionValue","selectionProperty","_hasHiddenData","selection","emit","_isIndeterminate","_isPageIndeterminate","_refresh","externalData","sorted","sort","a","b","valueA","valueB","toLowerCase","localeCompare","_rowData","__rest","hiddenData","plainTextValue","formattedValue","trim","rowData","entries","toString","hideFooter","slice","startFrom","endTo","parentWidth","_getIndex","realIndex","_getSelectionsForPage","_hasSelectionsOnPage","selectionsInPage","_onHeadingSelection","event","stopPropagation","preventDefault","KeyboardEvent","type","_onPaginationChange","paginate","detail","_onSelection","singleSelection","_onSort","direction","_onToggleAdditionalData","target","tagName","isActive","singleExpansion","_activeRows","hiddenRow","expand","active","i","_handleKeyUp","forceRender","_renderAdditioanlDataRow","rowIndex","class","colSpan","_renderHiddenCells","_renderHiddenHeaderChildren","_renderCellData","options","colIndex","component","Tag","tag","injectValue","params","onClick","call","_renderCellChildren","children","child","rest","flatData","obj","_renderExpansionIndicator","tabindex","onKeyUp","height","viewBox","d","mdiChevronDown","_renderLoaderRow","_renderRows","selectionValue","isSelected","Fragment","parent","selected","_renderSelectionCell","_renderTableCells","selectable","onChangeValue","_renderSortIndicator","iconPath","mdiSwapVertical","mdiArrowUpThin","mdiArrowDownThin","_renderStatusTextRow","loadingText","noDataText","_renderTableBody","_renderTableCell","isHidden","align","justify","_sortCellProperties","_renderTableFooter","footerStyles","maxWidth","left","ref","style","footerOptions","e","_renderTableHeader","indicatorRowStyles","sticky","stickyHeader","indeterminate","isSortable","sortable","minWidth","outlined","_scrollLeft","path","mdiChevronLeft","_scrollRight","mdiChevronRight","leftBorder","hiddenHeaderKeys","headerCellLeftBorder","scrollIntoView","behavior","block","inline","rightBorder","headerCellRightBorder","keyA","keyB","console","warn","render","tableClasses","Host"],"sources":["src/components/c-data-table/c-data-table.scss?tag=c-data-table&encapsulation=shadow","src/components/c-data-table/c-data-table.tsx"],"sourcesContent":[":host {\n  /**\n   * @prop --c-data-table-background-color: Table background color\n   * @prop --c-data-table-border-color: Table border color\n   * @prop --c-data-table-background-color-hover: Table background color (affects row color, header cell background color etc.)\n   * @prop --c-data-table-selected-row-background-color: Table selected row background color\n   * @prop --c-data-table-highlighted-column-background-color: Table highlighted column background color\n   * @prop --c-data-table-active: Table active color (used in variety of places)\n   * @prop --c-data-table-checkbox-color: Table checkbox color\n   * @prop --c-data-table-checkbox-color-active: Active table checkbox color\n   * @prop --c-data-table-checkbox-background-color-hover: Table checkbox hover background color\n   */\n  --_c-data-table-background-color: var(--c-data-table-background-color, var(--c-white));\n  --_c-data-table-border-color: var(--c-data-table-border-color, var(--c-tertiary-200));\n  --_c-data-table-background-color-hover: var(--c-data-table-background-color-hover, var(--c-primary-100));\n  --_c-data-table-selected-row-background-color: var(--c-data-table-selected-row-background-color, rgba(var(--c-primary-rgb), 0.1));\n  --_c-data-table-highlighted-column-background-color: var(--c-data-table-highlighted-column-background-color, rgba(var(--c-primary-rgb), 0.1));\n  --_c-data-table-active: var(--c-data-table-active, var(--c-primary-600));\n  --_c-data-table-checkbox-color: var(--c-data-table-checkbox-color, var(--c-primary-600));\n  --_c-data-table-checkbox-color-active: var(--c-data-table-checkbox-color-active, var(--_c-data-table-checkbox-color));\n  --_c-data-table-checkbox-background-color-hover: var(--c-data-table-checkbox-background-color-hover, rgba(var(--c-primary-rgb), 0.1));\n\n  /**\n   * @prop --c-data-table-pagination-button-active-background-color: Table pagination button background color\n   * @prop --c-data-table-pagination-button-active-background-color-hover: Table pagination button hover background color\n   * @prop --c-data-table-pagination-button-active-text-color: Active table pagination button text color\n   * @prop --c-data-table-pagination-button-background-color: Table pagination button background color\n   * @prop --c-data-table-pagination-button-background-color-hover: Table pagination button hover background color\n   * @prop --c-data-table-pagination-button-text-color: Table pagination button text color\n   */\n  --_c-data-table-pagination-button-active-background-color: var(--c-data-table-pagination-button-active-background-color, var(--c-primary-600));\n  --_c-data-table-pagination-button-active-background-color-hover: var(--c-data-table-pagination-button-active-background-color-hover, var(--c-primary-400));\n  --_c-data-table-pagination-button-active-text-color: var(--c-data-table-pagination-button-active-text-color, var(--c-white));\n  --_c-data-table-pagination-button-background-color: var(--c-data-table-pagination-button-background-color, var(--c-transparent));\n  --_c-data-table-pagination-button-background-color-hover: var(--c-data-table-pagination-button-background-color-hover, rgba(var(--c-primary-rgb), 0.1));\n  --_c-data-table-pagination-button-text-color: var(--c-data-table-pagination-button-text-color, var(--_c-data-table-pagination-button-active-background-color));\n\n  /**\n   * @prop --c-data-table-menu-text-color: Table pagination menu text color\n   * @prop --c-data-table-menu-text-color-active: Active table pagination menu text color\n   * @prop --c-data-table-menu-background-color-hover: Table pagination menu hover background color\n   * @prop --c-data-table-menu-outline-color: Table pagination menu outline color\n   */\n  --_c-data-table-menu-text-color: var(--c-data-table-menu-text-color, var(--c-text-system));\n  --_c-data-table-menu-text-color-active: var(--c-data-table-menu-text-color-active, var(--c-primary-600));\n  --_c-data-table-menu-background-color-hover: var(--c-data-table-menu-background-color-hover, var(--c-primary-200));\n  --_c-data-table-menu-outline-color: var(--c-data-table-menu-outline-color, var(--c-primary-600));\n\n  c-checkbox {\n    --c-checkbox-color: var(--_c-data-table-checkbox-color);\n    --c-checkbox-color-active: var(--_c-data-table-checkbox-color-active);\n    --c-checkbox-background-color-hover: var(--_c-data-table-checkbox-background-color-hover);\n  }\n\n  display: block;\n  position: relative;\n  width: 100%;\n  max-width: 100%;\n\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td {\n    border: 0;\n    font-size: 100%;\n    font-family: inherit;\n    margin: 0;\n    padding: 0;\n  }\n\n  table {\n    background-color: var(--_c-data-table-background-color);\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n\n  .c-data-table {\n    box-shadow: inset 0 0 0 1px var(--_c-data-table-border-color);\n    width: 100%;\n\n    .children {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n      width: 100%;\n\n      pre {\n        font-family: inherit;\n        white-space: pre-wrap;\n      }\n    }\n\n    [data-justify=\"end\"],\n    [data-align=\"end\"] .children {\n      align-items: flex-end;\n    }\n\n    [data-justify=\"start\"],\n    [data-align=\"start\"] .children {\n      align-items: flex-start;\n    }\n\n    [data-justify=\"center\"],\n    [data-align=\"center\"] .children {\n      align-items: center;\n    }\n\n    [data-align=\"end\"],\n    [data-justify=\"end\"] .children {\n      justify-content: flex-end;\n    }\n\n    [data-align=\"start\"],\n    [data-justify=\"start\"] .children {\n      justify-content: flex-start;\n    }\n\n    [data-align=\"center\"],\n    [data-justify=\"center\"] .children {\n      justify-content: center;\n    }\n\n    th,\n    td {\n      font-weight: 400;\n\n      > div {\n        align-items: center;\n        box-sizing: border-box;\n        display: flex;\n        line-height: normal;\n        padding: 12px;\n        width: 100%;\n      }\n    }\n\n    th {\n      font-size: 14px;\n      padding: 4px;\n\n      &.selection {\n        width: 56px;\n      }\n\n      &.indicator {\n        width: 46px;\n      }\n\n      > div {\n        border-radius: 4px;\n        flex-wrap: nowrap;\n        gap: 8px;\n        height: 48px;\n        white-space: nowrap;\n\n        &.sortable:hover {\n          background-color: var(--_c-data-table-background-color-hover);\n          color: var(--_c-data-table-active);\n          cursor: pointer;\n\n          svg {\n            fill: var(--_c-data-table-active);\n          }\n        }\n\n        &.selection {\n          &--heading {\n            padding-left: 8px;\n            padding-right: 0;\n            margin-right: -8px;\n          }\n        }\n      }\n    }\n\n    td {\n      font-size: 16px;\n\n      > div {\n        align-items: flex-start;\n        flex-direction: column;\n        gap: 8px;\n        justify-content: center;\n        min-height: 56px;\n        padding: 12px;\n\n        &.selection {\n          margin-right: -4px;\n          padding: 7px 0 7px 12px;\n        }\n\n        c-tag {\n          --c-tag-margin: 0;\n        }\n      }\n\n      &.loader {\n        background-color: var(--_c-data-table-border-color);\n        height: 2px;\n        position: relative;\n\n        > div {\n          height: 2px;\n          min-height: auto;\n          padding: 0;\n        }\n      }\n\n      &.info {\n        > div {\n          height: 108px;\n          justify-content: center;\n        }\n      }\n\n      svg {\n        transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n      }\n    }\n\n    thead {\n      background-color: var(--_c-data-table-background-color);\n      position: relative;\n\n      &.sticky {\n        box-shadow: 0 2px 0 0 var(--_c-data-table-border-color);\n        position: sticky;\n        top: 0;\n        z-index: 3;\n      }\n\n      .c-data-table__header-indicators {\n        pointer-events: none;\n\n        th {\n          > div {\n            margin-top: -56px;\n            display: flex;\n            justify-items: space-between;\n          }\n        }\n\n        c-icon-button {\n          background-color: rgba(255, 255, 255, 0.75);\n          border-radius: 50%;\n          pointer-events: all;\n        }\n      }\n    }\n\n    tfoot {\n      background-color: var(--_c-data-table-background-color);\n\n      tr {\n        box-shadow: inset 0 1px 0 0 var(--_c-data-table-border-color);\n      }\n\n      td {\n        > div {\n          align-items: center;\n          flex-direction: row;\n          justify-content: flex-start;\n          min-height: 48px;\n        }\n\n        c-pagination {\n          --c-pagination-button-active-background-color: var(--_c-data-table-pagination-button-active-background-color);\n          --c-pagination-button-active-background-color-hover: var(--_c-data-table-pagination-button-active-background-color-hover);\n          --c-pagination-button-active-text-color: var(--_c-data-table-pagination-button-active-text-color);\n          --c-pagination-button-background-color: var(--_c-data-table-pagination-button-background-color);\n          --c-pagination-button-background-color-hover: var(--_c-data-table-pagination-button-background-color-hover);\n          --c-pagination-button-text-color: var(--_c-data-table-pagination-button-text-color);\n          --c-pagination-menu-text-color: var(--_c-data-table-menu-text-color);\n          --c-pagination-menu-text-color-active: var(--_c-data-table-menu-text-color-active);\n          --c-pagination-menu-background-color-hover: var(--_c-data-table-menu-background-color-hover);\n          --c-pagination-menu-outline-color: var(--_c-data-table-menu-text-color);\n\n          flex: 1;\n        }\n      }\n    }\n\n    tbody {\n      /* Safari box shadow replacement */\n      @supports (-webkit-hyphens: none) {\n        tr {\n          border-bottom: 1px solid var(--_c-data-table-border-color);\n        }\n      }\n\n      tr {\n        box-shadow: inset 0 1px 0 0 var(--_c-data-table-border-color);\n\n        &.actions {\n          box-shadow: none;\n\n          td > div {\n            background-color: rgba(0, 0, 0, 0.015);\n            height: auto;\n          }\n        }\n\n        &.active {\n          box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n            inset -2px 0 0 var(--_c-data-table-active),\n            inset 0 2px 0 var(--_c-data-table-active);\n          border-radius: 6px 6px 0 0;\n\n          svg {\n            transform: rotate(180deg);\n          }\n\n          + .additional-data {\n            border-radius: 0 0 6px 6px;\n            box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n              inset -2px 0 0 var(--_c-data-table-active),\n              inset 0 -2px 0 var(--_c-data-table-active);\n          }\n\n          &.selected {\n            box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n              inset -2px 0 0 var(--_c-data-table-active),\n              inset 0 2px 0 var(--_c-data-table-active);\n          }\n        }\n\n        &.selected {\n          background-color: var(--_c-data-table-selected-row-background-color);\n          box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n            inset 0 1px 0 0 var(--_c-data-table-border-color);\n\n          + .additional-data {\n            box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n              inset -2px 0 0 var(--_c-data-table-active),\n              inset 0 -2px 0 var(--_c-data-table-active);\n          }\n        }\n      }\n    }\n\n    &__loader {\n      background-color: var(--_c-data-table-border-color);\n      height: 2px;\n      overflow: hidden;\n      position: absolute;\n      width: 100%;\n    }\n\n    .loading-bar {\n      animation: loading 1s ease-in 0.5s infinite;\n      background-color: var(--_c-data-table-active);\n      height: 100%;\n      left: -50%;\n      position: absolute;\n      width: 50%;\n    }\n\n    @keyframes loading {\n      0% {\n        transform: translateX(0);\n      }\n\n      100% {\n        transform: translateX(400%);\n      }\n    }\n\n    .additional-data {\n      display: none;\n\n      &.active {\n        display: table-row;\n      }\n\n      ul {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        width: 100%;\n\n        li {\n          padding: 12px;\n\n          &:not(:last-child) {\n            box-shadow: inset 0 -1px 0 0 var(--_c-data-table-border-color);\n          }\n\n          span {\n            color: var(--_c-data-table-active);\n            font-weight: 600;\n          }\n\n          .title {\n            display: flex;\n            gap: 8px;\n\n            + .children {\n              margin-top: 8px;\n            }\n          }\n        }\n      }\n    }\n\n    &--scrollable {\n      position: relative;\n    }\n\n    &--hoverable {\n      tbody {\n        tr:not(.additional-data) {\n          cursor: pointer;\n\n          &:hover {\n            background-color: var(--_c-data-table-background-color-hover);\n            border-radius: 6px;\n            box-shadow: inset 0 0 0 2px var(--_c-data-table-active);\n            overflow: hidden;\n\n            c-button.text,\n            c-button.ghost {\n              --c-button-hover: var(--c-primary-200);\n            }\n          }\n\n          &.active:hover {\n            border-radius: 6px 6px 0 0;\n            box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n              inset -2px 0 0 var(--_c-data-table-active),\n              inset 0 2px 0 var(--_c-data-table-active);\n          }\n\n          &.selected.active:hover {\n            border-radius: 6px 6px 0 0;\n            box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n              inset -2px 0 0 var(--_c-data-table-active),\n              inset 0 2px 0 var(--_c-data-table-active);\n          }\n\n          &.selected:hover {\n            border-radius: 6px;\n            box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n              inset 0 0 0 2px var(--_c-data-table-active);\n          }\n        }\n      }\n    }\n  }\n\n  .sorted-column {\n    background-color: var(--_c-data-table-highlighted-column-background-color);\n  }\n}\n\n:host([horizontal-scrolling]) {\n  overflow-x: scroll;\n}\n\n// table,\n// caption,\n// tbody,\n// tfoot,\n// thead,\n// tr,\n// th,\n// td {\n//   border: 0;\n//   font-size: 100%;\n//   font: inherit;\n//   margin: 0;\n//   padding: 0;\n// }\n\n// table {\n//   background-color: var(--_c-data-table-background-color);\n//   border-collapse: collapse;\n//   border-spacing: 0;\n// }\n\n// .c-data-table {\n//   box-shadow: inset 0 0 0 1px var(--_c-data-table-border-color);\n//   width: 100%;\n\n//   .children {\n//     display: flex;\n//     flex-wrap: wrap;\n//     gap: 4px;\n//     width: 100%;\n\n//     pre {\n//       font-family: inherit;\n//       white-space: pre-wrap;\n//     }\n//   }\n\n//   [data-justify='end'],\n//   [data-align='end'] .children {\n//     align-items: flex-end;\n//   }\n\n//   [data-justify='start'],\n//   [data-align='start'] .children {\n//     align-items: flex-start;\n//   }\n\n//   [data-justify='center'],\n//   [data-align='center'] .children {\n//     align-items: center;\n//   }\n\n//   [data-align='end'],\n//   [data-justify='end'] .children {\n//     justify-content: flex-end;\n//   }\n\n//   [data-align='start'],\n//   [data-justify='start'] .children {\n//     justify-content: flex-start;\n//   }\n\n//   [data-align='center'],\n//   [data-justify='center'] .children {\n//     justify-content: center;\n//   }\n\n//   th,\n//   td {\n//     font-weight: 400;\n\n//     > div {\n//       align-items: center;\n//       box-sizing: border-box;\n//       display: flex;\n//       line-height: normal;\n//       padding: 12px;\n//       width: 100%;\n//     }\n//   }\n\n//   th {\n//     font-size: 14px;\n//     padding: 4px;\n\n//     &.selection {\n//       width: 56px;\n//     }\n\n//     &.indicator {\n//       width: 46px;\n//     }\n\n//     > div {\n//       border-radius: 4px;\n//       flex-wrap: nowrap;\n//       gap: 8px;\n//       height: 48px;\n//       white-space: nowrap;\n\n//       &.sortable:hover {\n//         background-color: var(--_c-data-table-background-color-hover);\n//         color: var(--_c-data-table-active);\n//         cursor: pointer;\n\n//         svg {\n//           fill: var(--_c-data-table-active);\n//         }\n//       }\n\n//       &.selection {\n//         &--heading {\n//           padding-left: 8px;\n//           padding-right: 0;\n//           margin-right: -8px;\n//         }\n//       }\n//     }\n//   }\n\n//   td {\n//     font-size: 16px;\n\n//     > div {\n//       align-items: flex-start;\n//       flex-direction: column;\n//       gap: 8px;\n//       justify-content: center;\n//       min-height: 56px;\n//       padding: 12px;\n\n//       &.selection {\n//         margin-right: -4px;\n//         padding: 7px 0 7px 12px;\n//       }\n\n//       c-tag {\n//         --c-tag-margin: 0px;\n//       }\n//     }\n\n//     &.loader {\n//       background-color: var(--_c-data-table-border-color);\n//       height: 2px;\n//       position: relative;\n\n//       > div {\n//         height: 2px;\n//         min-height: auto;\n//         padding: 0;\n//       }\n//     }\n\n//     &.info {\n//       > div {\n//         height: 108px;\n//         justify-content: center;\n//       }\n//     }\n\n//     svg {\n//       transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n//     }\n//   }\n\n//   thead {\n//     position: relative;\n\n//     &.sticky {\n//       box-shadow: 0 2px 0 0 var(--_c-data-table-border-color);\n//       position: sticky;\n//       top: 0;\n//       z-index: 3;\n//     }\n\n//     .c-data-table__header-indicators {\n//       pointer-events: none;\n\n//       th {\n//         > div {\n//           margin-top: -56px;\n//           display: flex;\n//           justify-items: space-between;\n//         }\n//       }\n\n//       c-icon-button {\n//         background-color: rgba(255, 255, 255, 0.75);\n//         border-radius: 50%;\n//         pointer-events: all;\n//       }\n//     }\n//   }\n\n//   tfoot {\n//     tr {\n//       box-shadow: inset 0 1px 0 0 var(--_c-data-table-border-color);\n//     }\n\n//     td {\n//       > div {\n//         align-items: center;\n//         flex-direction: row;\n//         justify-content: flex-start;\n//         min-height: 48px;\n//       }\n\n//       c-pagination {\n//         flex: 1;\n//       }\n//     }\n//   }\n\n//   tbody {\n//     /* Safari box shadow replacement */\n//     @supports (-webkit-hyphens: none) {\n//       tr {\n//         border-bottom: 1px solid var(--_c-data-table-border-color);\n//       }\n//     }\n\n//     tr {\n//       box-shadow: inset 0 1px 0 0 var(--_c-data-table-border-color);\n\n//       &.actions {\n//         box-shadow: none;\n\n//         td > div {\n//           background-color: rgba(0, 0, 0, 0.015);\n//           height: auto;\n//         }\n//       }\n\n//       &.active {\n//         box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n//           inset -2px 0 0 var(--_c-data-table-active),\n//           inset 0 2px 0 var(--_c-data-table-active);\n//         border-radius: 6px 6px 0 0;\n\n//         svg {\n//           transform: rotate(180deg);\n//         }\n\n//         + .additional-data {\n//           border-radius: 0 0 6px 6px;\n//           box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n//             inset -2px 0 0 var(--_c-data-table-active),\n//             inset 0 -2px 0 var(--_c-data-table-active);\n//         }\n\n//         &.selected {\n//           box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n//             inset -2px 0 0 var(--_c-data-table-active),\n//             inset 0 2px 0 var(--_c-data-table-active);\n//         }\n//       }\n\n//       &.selected {\n//         background-color: var(---_c-data-table-selected-row-background-color);\n//         box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n//           inset 0 1px 0 0 var(--_c-data-table-border-color);\n\n//         + .additional-data {\n//           box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n//             inset -2px 0 0 var(--_c-data-table-active),\n//             inset 0 -2px 0 var(--_c-data-table-active);\n//         }\n//       }\n//     }\n//   }\n\n//   &__loader {\n//     background-color: var(--_c-data-table-border-color);\n//     height: 2px;\n//     overflow: hidden;\n//     position: absolute;\n//     width: 100%;\n//   }\n\n//   .loading-bar {\n//     animation: loading 1s ease-in 0.5s infinite;\n//     background-color: var(--_c-data-table-active);\n//     height: 100%;\n//     left: -50%;\n//     position: absolute;\n//     width: 50%;\n//   }\n\n//   @keyframes loading {\n//     0% {\n//       transform: translateX(0);\n//     }\n//     to {\n//       transform: translateX(400%);\n//     }\n//   }\n\n//   .additional-data {\n//     display: none;\n\n//     &.active {\n//       display: table-row;\n//     }\n\n//     ul {\n//       list-style: none;\n//       margin: 0;\n//       padding: 0;\n//       width: 100%;\n\n//       li {\n//         padding: 12px;\n\n//         &:not(:last-child) {\n//           box-shadow: inset 0 -1px 0 0 var(--_c-data-table-border-color);\n//         }\n\n//         span {\n//           color: var(--_c-data-table-active);\n//           font-weight: 600;\n//         }\n\n//         .title {\n//           display: flex;\n//           gap: 8px;\n\n//           + .children {\n//             margin-top: 8px;\n//           }\n//         }\n//       }\n//     }\n//   }\n\n//   &--scrollable {\n//     position: relative;\n//   }\n\n//   &--hoverable {\n//     tbody {\n//       tr:not(.additional-data) {\n//         cursor: pointer;\n\n//         &:hover {\n//           background-color: var(--_c-data-table-background-color-hover);\n//           border-radius: 6px;\n//           box-shadow: inset 0 0 0 2px var(--_c-data-table-active);\n//           overflow: hidden;\n\n//           c-button.text,\n//           c-button.ghost {\n//             --c-button-hover: var(--c-primary-200);\n//           }\n//         }\n\n//         &.active:hover {\n//           border-radius: 6px 6px 0 0;\n//           box-shadow: inset 2px 0 0 var(--_c-data-table-active),\n//             inset -2px 0 0 var(--_c-data-table-active),\n//             inset 0 2px 0 var(--_c-data-table-active);\n//         }\n\n//         &.selected.active:hover {\n//           border-radius: 6px 6px 0 0;\n//           box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n//             inset -2px 0 0 var(--_c-data-table-active),\n//             inset 0 2px 0 var(--_c-data-table-active);\n//         }\n\n//         &.selected:hover {\n//           border-radius: 6px;\n//           box-shadow: inset 4px 0 0 var(--_c-data-table-active),\n//             inset 0 0 0 2px var(--_c-data-table-active);\n//         }\n//       }\n//     }\n//   }\n// }\n\n// .sorted-column {\n//   background-color: rgb(0 103 120 / 5%);\n// }\n","import {\n  mdiArrowDownThin,\n  mdiArrowUpThin,\n  mdiSwapVertical,\n  mdiChevronDown,\n  mdiChevronLeft,\n  mdiChevronRight,\n} from '@mdi/js';\nimport {\n  Component,\n  Host,\n  h,\n  Element,\n  Event,\n  EventEmitter,\n  Prop,\n  State,\n  Fragment,\n  Watch,\n  Method,\n} from '@stencil/core';\nimport {\n  CDataTableData,\n  CDataTableDataItem,\n  CDataTableFooterOptions,\n  CDataTableHeader,\n  CPaginationOptions,\n} from '../../types';\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions\ninterface CDataTableDataItemPrivate extends Omit<CDataTableDataItem, 'value'> {\n  _hiddenData?: {\n    id?: string;\n    key?: string;\n    value?: CDataTableDataItem;\n  }[];\n}\n\ntype HeaderRefs = Map<string, HTMLElement>;\n\n/**\n * @group Tables\n */\n@Component({\n  tag: 'c-data-table',\n  styleUrl: 'c-data-table.scss',\n  shadow: true,\n})\nexport class CDataTable {\n  @Element() element: HTMLCDataTableElement;\n\n  /**\n   * Data of the table\n   */\n  @Prop() data: CDataTableData[] = [];\n\n  /**\n   * Externally sorted and paginated data\n   */\n  @Prop() externalData = false;\n\n  /**\n   * Headers of the table\n   */\n  @Prop() headers: CDataTableHeader[] = [];\n\n  /**\n   * Hide the footer\n   */\n  @Prop() hideFooter = false;\n\n  /**\n   * Items per page options\n   */\n  @Prop() footerOptions: CDataTableFooterOptions = {\n    hideDetails: false,\n    simple: false,\n    hideRange: false,\n    size: 'default',\n  };\n\n  /**\n   * Show a loader on top of the table\n   */\n  @Prop() loading = false;\n\n  /**\n   * Text shown when there is no data and the table is loading\n   */\n  @Prop() loadingText = 'Loading data';\n\n  /**\n   * Text shown when there are no data available\n   */\n  @Prop() noDataText = 'No data';\n\n  /**\n   * Pagination options\n   */\n  @Prop({ mutable: true }) pagination: CPaginationOptions;\n\n  /**\n   * Make rows selectable\n   */\n  @Prop() selectable = false;\n\n  /**\n   * Select only a single row at a time\n   */\n  @Prop() singleSelection = false;\n\n  /**\n   * Property used in selections\n   */\n  @Prop() selectionProperty: string = null;\n\n  /**\n   * Allow only a single row expanded at a time\n   */\n  @Prop() singleExpansion = false;\n\n  /**\n   * Sort data by\n   */\n  @Prop({ mutable: true }) sortBy = null;\n\n  /**\n   * Sorting direction\n   */\n  @Prop({ mutable: true }) sortDirection: 'asc' | 'desc' | null = null;\n\n  /**\n   * Use sticky header\n   */\n  @Prop() stickyHeader = false;\n\n  /**\n   * Use horizontal scrolling\n   */\n  @Prop() horizontalScrolling = false;\n\n  /**\n   * Triggered on pagination\n   */\n  @Event() paginate: EventEmitter<CPaginationOptions>;\n\n  /**\n   * Triggered on row expansion\n   */\n  @Event() expand: EventEmitter;\n\n  /**\n   * Triggered on sort\n   */\n  @Event() sort: EventEmitter;\n\n  /**\n   * Triggered on selection\n   */\n  @Event() selection: EventEmitter;\n\n  @State() _activeRows: (number | string)[] = [];\n\n  @State() _data: CDataTableDataItemPrivate[] = [];\n\n  @State() _isIndeterminate = false;\n\n  @State() _isPaginationSimple = false;\n\n  @State() _selections: (string | number)[] = [];\n\n  @State() hasOverflow = false;\n\n  @State() hiddenHeaders: string[] = [];\n\n  @State() initiallyHiddenHeaders: string[] = [];\n\n  @State() forceRender = false;\n\n  @State() breakpoints: number[] = [];\n\n  @State() markedFooterWidth = 0;\n\n  @State() parentWidth = 0;\n\n  @State() firstCellHidden = false;\n\n  @State() lastCellHidden = false;\n\n  private _debounce = null;\n\n  private _extraHeaders: CDataTableHeader[] = [];\n\n  private _rootIntersectionObserver: IntersectionObserver;\n\n  private _firstCellIntersectionObserver: IntersectionObserver;\n\n  private _lastCellIntersectionObserver: IntersectionObserver;\n\n  private _resizeObserver: ResizeObserver;\n\n  private _tableElement: HTMLTableElement;\n\n  private _footerElement: HTMLTableRowElement;\n\n  private _headerRefs: HeaderRefs;\n\n  private _isValidated = false;\n\n  private _isVisible = false;\n\n  private _sortedData: Record<string, string | number | boolean>[] = [];\n\n  @Watch('hiddenHeaders')\n  onHiddenHeaderChange() {\n    this._getData();\n  }\n\n  @Watch('data')\n  onDataChange() {\n    this._getData();\n    this._handleInitialHeaders();\n  }\n\n  @Watch('headers')\n  onHeaderChange() {\n    this._handleInitialHeaders();\n  }\n\n  @Watch('singleSelection')\n  onSingleSelectionChange() {\n    this.clearSelections();\n  }\n\n  @Watch('loading')\n  onLoadingChange(loading: boolean) {\n    if (!loading) {\n      this._setIndeterminateStatus();\n    }\n  }\n\n  /**\n   * Clear selections externally\n   */\n  @Method()\n  async clearSelections() {\n    this._selections = [];\n    this._emitChange();\n    this._setIndeterminateStatus();\n  }\n\n  /**\n   * Provide sorted data\n   */\n  @Method()\n  async getData() {\n    return this._sortedData;\n  }\n\n  componentWillLoad() {\n    this.sortBy = this.sortBy ?? this.headers[0].key;\n    this.sortDirection = this.sortDirection ?? 'asc';\n    this._getData();\n\n    this._handleInitialHeaders();\n  }\n\n  componentDidLoad() {\n    if (!this.horizontalScrolling) {\n      this._rootIntersectionObserver = new IntersectionObserver(([entry]) => {\n        if (entry.isIntersecting) {\n          this._handleResponsiveHeaders();\n\n          this._isVisible = true;\n        }\n      });\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleResize();\n      });\n\n      this._rootIntersectionObserver.observe(this.element);\n    } else {\n      const [firstCell] = this._headerKeys;\n      const lastCell = this._headerKeys[this._headerKeys.length - 1];\n\n      this._firstCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.firstCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._lastCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.lastCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleScrollWidth();\n      });\n\n      this._firstCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${firstCell}\"]`),\n      );\n\n      this._lastCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${lastCell}\"]`),\n      );\n    }\n\n    this._resizeObserver.observe(this.element);\n  }\n\n  disconnectedCallback() {\n    this._resizeObserver?.disconnect();\n    this._rootIntersectionObserver?.disconnect();\n    this._firstCellIntersectionObserver?.disconnect();\n    this._lastCellIntersectionObserver?.disconnect();\n  }\n\n  private _handleInitialHeaders() {\n    this.initiallyHiddenHeaders = this.headers\n      .filter((header) => !!header.hidden)\n      .map((header) => header.key);\n\n    // Hide the initially hidden headers\n    this.hiddenHeaders = [\n      ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n    ];\n  }\n\n  private _handleHeaderVisibility(\n    header: HTMLElement,\n    rootWidth: number,\n    x: number,\n  ) {\n    const index = this._headers.findIndex((h) => h.key === header.dataset.id);\n    const position = header.getBoundingClientRect();\n    const isFullyVisible = position.right - x <= rootWidth;\n    const isLastVisibleHeader =\n      header.dataset.id === Array.from(this._headerRefs.keys()).at(0);\n    const isPinned = this._headers[index]?.pinned;\n\n    if (!isFullyVisible && isPinned && index >= 1) {\n      const nextUnpinnedHeader = Array.from(this._headerRefs.values())\n        .reverse()\n        .find((hdr) => {\n          if (!hdr) return false;\n\n          return !this._headers.find((h) => h.key === hdr.dataset.id)?.pinned;\n        });\n\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          (nextUnpinnedHeader || header).dataset.id, // hide the pinned header as a last resort\n        ]),\n      ];\n\n      return;\n    }\n\n    if (!isFullyVisible && !isLastVisibleHeader) {\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          header.dataset.id,\n        ]),\n      ];\n    }\n  }\n\n  private _handleResponsiveHeaders() {\n    const { width: tableWidth } = this._tableElement.getBoundingClientRect();\n    const { width: rootWidth, x } = this.element.getBoundingClientRect();\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    if (rootWidth < tableWidth) {\n      this.breakpoints = [...new Set([...this.breakpoints, tableWidth])];\n\n      setTimeout(() => {\n        for (const header of this._headerRefs.values()) {\n          if (header) {\n            this._handleHeaderVisibility(header, rootWidth, x);\n          }\n        }\n\n        this._debounce = setTimeout(() => {\n          const footerWidth =\n            this._footerElement?.getBoundingClientRect()?.width || 0;\n\n          if (rootWidth < footerWidth) {\n            this.markedFooterWidth = footerWidth;\n            this._isPaginationSimple = true;\n          }\n        }, 200);\n      }, 0);\n    } else if (\n      this.breakpoints.length > 0 &&\n      tableWidth >= this.breakpoints[this.breakpoints.length - 1]\n    ) {\n      this.breakpoints.pop();\n      // Header that can be unhided from current hiddenHeaders\n      const displayHeader = this.headers.find((header) =>\n        this.hiddenHeaders.includes(header.key),\n      );\n\n      if (!!displayHeader) {\n        const headerIndex = this.hiddenHeaders.indexOf(displayHeader.key);\n        this.hiddenHeaders.splice(headerIndex, 1);\n        this.hiddenHeaders = [\n          ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n        ];\n      }\n    }\n\n    this._debounce = setTimeout(() => {\n      if (rootWidth >= this.markedFooterWidth && this.markedFooterWidth > 0) {\n        this._isPaginationSimple = false;\n      }\n    }, 200);\n  }\n\n  private _addHeaderRef(key: string, el: HTMLElement) {\n    if (!this._headerRefs) {\n      this._headerRefs = new Map([[key, el]]);\n\n      return;\n    }\n\n    this._headerRefs.set(key, el);\n  }\n\n  private _getData() {\n    this._extraHeaders = this.headers.filter(\n      (header) => !Object.keys(this.data?.[0] || {}).includes(header.key),\n    );\n\n    // create cells for headers not present in the data\n    const extraCells = this._extraHeaders.reduce(\n      (cells, header) => ({\n        ...cells,\n        [header.key]: {\n          value: null,\n        },\n      }),\n      {},\n    );\n\n    const items = this.data\n      .map((row) => ({\n        ...row,\n        ...extraCells,\n      }))\n      .reduce<CDataTableDataItemPrivate[]>((data, cell) => {\n        const item: CDataTableDataItemPrivate = {\n          _hiddenData: [],\n        };\n\n        Object.keys(cell).forEach((key) => {\n          item[key] = cell[key];\n        });\n\n        this.hiddenHeaders.forEach((header) => {\n          const cellData = this.headers.find((h) => h.key === header);\n\n          item._hiddenData.push({\n            id: cellData?.key,\n            key: cellData?.value,\n            value: cell[header],\n          });\n        });\n\n        data.push(item);\n\n        return data;\n      }, []);\n\n    this._data = this._sortData(items);\n\n    this.pagination = { ...this.pagination, itemCount: this.data.length };\n\n    this._validateProps(this._data[0]);\n\n    this._handleScrollWidth();\n\n    requestAnimationFrame(() => {\n      this._handleResize();\n    });\n  }\n\n  private _getSelectionValue(\n    row: CDataTableDataItemPrivate,\n    index: number,\n  ): string | number {\n    return !!this.selectionProperty\n      ? row[this.selectionProperty]?.value || index\n      : index;\n  }\n\n  private get _headers() {\n    return this.headers\n      .map((header) => ({\n        ...header,\n        pinned: !!header.pinned,\n      }))\n      .filter(\n        (header) => !this.hiddenHeaders.includes(header.key) && !header.hidden,\n      );\n  }\n\n  private get _headerKeys() {\n    return this._headers.map((header) => header.key);\n  }\n\n  private get _hasHiddenData() {\n    return !!this.hiddenHeaders.length;\n  }\n\n  private _emitChange() {\n    this.selection.emit(this._selections);\n  }\n\n  private _setIndeterminateStatus() {\n    requestAnimationFrame(() => {\n      this._isIndeterminate = this._isPageIndeterminate();\n      this._refresh();\n    });\n  }\n\n  private _sortData(\n    data: CDataTableDataItem[] | CDataTableDataItemPrivate[],\n  ): CDataTableDataItemPrivate[] {\n    if (!this.sortBy || this.externalData) return data;\n\n    const sorted = data.sort((a, b) => {\n      const valueA = a[this.sortBy].value;\n      const valueB = b[this.sortBy].value;\n\n      if (typeof valueA === 'string') {\n        if (this.sortDirection === 'asc') {\n          return valueA.toLowerCase().localeCompare(valueB.toLowerCase());\n        }\n\n        return valueB.toLowerCase().localeCompare(valueA.toLowerCase());\n      }\n\n      if (typeof valueA === 'number') {\n        if (this.sortDirection === 'asc') {\n          return valueA - valueB;\n        }\n\n        return valueB - valueA;\n      }\n    });\n\n    this._sortedData = sorted.map((row) => {\n      const { _hiddenData, ..._rowData } = row;\n\n      const hiddenData = _hiddenData.reduce((items, item) => {\n        items[item.id] =\n          item.value.plainTextValue ||\n          item.value.formattedValue?.trim() ||\n          item.value.value;\n\n        return items;\n      }, {});\n\n      const rowData = Object.entries(_rowData).reduce(\n        (items, [key, item]: [string, CDataTableDataItem]) => {\n          items[key] =\n            item.plainTextValue ||\n            item.formattedValue?.toString().trim() ||\n            item.value;\n\n          return items;\n        },\n        {},\n      );\n\n      return {\n        ...rowData,\n        ...hiddenData,\n      };\n    });\n\n    return !this.hideFooter\n      ? sorted.slice(\n          this.pagination?.startFrom ?? 0,\n          (this.pagination?.endTo ?? this.data.length) + 1,\n        )\n      : sorted;\n  }\n\n  private _handleScrollWidth() {\n    this.parentWidth = this.element.getBoundingClientRect().width;\n  }\n\n  private _handleResize() {\n    if (this._isVisible) {\n      this._handleResponsiveHeaders();\n    }\n  }\n\n  private _getIndex(index: number) {\n    let realIndex = index;\n\n    if (\n      !this.selectionProperty &&\n      !!this.pagination &&\n      typeof realIndex === 'number'\n    ) {\n      realIndex += this.pagination.startFrom;\n\n      if (this.sortDirection === 'desc') {\n        realIndex = this.pagination.itemCount - 1 - realIndex;\n      }\n    }\n\n    return realIndex;\n  }\n\n  private _getSelectionsForPage() {\n    return this._selections.filter((selection) =>\n      this._data\n        .map((row, index) =>\n          this._getSelectionValue(row, this._getIndex(index)),\n        )\n        .includes(selection),\n    );\n  }\n\n  private _hasSelectionsOnPage() {\n    return this._getSelectionsForPage().length > 0;\n  }\n\n  private _isPageIndeterminate() {\n    const selectionsInPage = this._getSelectionsForPage();\n\n    return (\n      this._hasSelectionsOnPage() && selectionsInPage.length < this._data.length\n    );\n  }\n\n  private _onHeadingSelection(event: KeyboardEvent | MouseEvent) {\n    event?.stopPropagation();\n    event?.preventDefault();\n\n    if (\n      event instanceof KeyboardEvent &&\n      event.type === 'keyup' &&\n      event.key !== ' '\n    ) {\n      return;\n    }\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = setTimeout(() => {\n      if (this._data.length === this._getSelectionsForPage().length) {\n        this._selections = [\n          ...this._selections.filter(\n            (selection) =>\n              !this._data\n                .map((row, index) =>\n                  this._getSelectionValue(row, this._getIndex(index)),\n                )\n                .includes(selection),\n          ),\n        ];\n\n        this._setIndeterminateStatus();\n        this._emitChange();\n\n        this._tableElement;\n\n        return;\n      }\n\n      this._selections = [\n        ...new Set([\n          ...this._selections,\n          ...this._data.map((row, index) =>\n            this._getSelectionValue(row, this._getIndex(index)),\n          ),\n        ]),\n      ];\n\n      this._setIndeterminateStatus();\n      this._emitChange();\n    }, 200);\n  }\n\n  private _onPaginationChange(event: CustomEvent) {\n    if (this.externalData) {\n      this.paginate.emit(event.detail);\n\n      return;\n    }\n\n    this.pagination = {\n      ...this.pagination,\n      ...event.detail,\n    };\n\n    this._setIndeterminateStatus();\n\n    this._getData();\n  }\n\n  private _onSelection(value: string | number) {\n    if (this.singleSelection) {\n      this._selections = [value];\n\n      this._emitChange();\n      this._refresh();\n\n      return;\n    }\n\n    if (this._selections.includes(value)) {\n      this._selections = this._selections.filter(\n        (selection) => selection !== value,\n      );\n    } else {\n      this._selections = [...this._selections, value];\n    }\n\n    this._emitChange();\n\n    this._setIndeterminateStatus();\n  }\n\n  private _onSort(key: string) {\n    if (this.sortBy === key) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortDirection = 'asc';\n    }\n\n    this.sortBy = key;\n\n    this.sort.emit({ sortBy: this.sortBy, direction: this.sortDirection });\n\n    this._getData();\n\n    this._setIndeterminateStatus();\n    this._refresh();\n  }\n\n  private _onToggleAdditionalData(\n    event: KeyboardEvent | MouseEvent,\n    value: string | number,\n    row,\n  ) {\n    if (\n      !this._hasHiddenData ||\n      (event.target as HTMLElement).tagName === 'C-CHECKBOX'\n    )\n      return;\n\n    const isActive = this.singleExpansion\n      ? this._activeRows[0] === value\n      : this._activeRows.includes(value);\n\n    const { _hiddenData, ...data } = row;\n\n    Object.keys(data).forEach((key) => {\n      data[key] = data[key].value;\n    });\n\n    _hiddenData.forEach((hiddenRow) => {\n      data[hiddenRow.id] = hiddenRow.value.value;\n    });\n\n    this.expand.emit({\n      active: !isActive,\n      row: data,\n    });\n\n    if (this.singleExpansion) {\n      this._activeRows = isActive ? [] : [value];\n\n      return;\n    }\n\n    if (isActive) {\n      this._activeRows = this._activeRows.filter((i) => i !== value);\n\n      return;\n    }\n\n    this._activeRows = [...this._activeRows, value];\n  }\n\n  private _handleKeyUp(event: KeyboardEvent, value: string | number, row) {\n    event.preventDefault();\n\n    if (event.key === 'Enter') {\n      this._onToggleAdditionalData(event, value, row);\n    }\n  }\n\n  private _refresh() {\n    this.forceRender = !this.forceRender;\n  }\n\n  private _renderAdditioanlDataRow(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <tr\n          class={{\n            'additional-data': true,\n            active: this._activeRows.includes(rowIndex),\n          }}\n        >\n          <td colSpan={100}>\n            <div>\n              <ul>\n                {this._renderHiddenCells(rowIndex)}\n                {this._renderHiddenHeaderChildren(rowIndex, rowData)}\n              </ul>\n            </div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderCellData(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n  ) {\n    const component = options.component || this._headers[colIndex]?.component;\n    const Tag = component?.tag || null;\n    const injectValue = !!component?.injectValue;\n    const params = component?.params || {};\n\n    if (injectValue) {\n      params.value = options.value;\n    }\n\n    return !!Tag ? (\n      <Tag\n        {...params}\n        onClick={(event: MouseEvent) => {\n          params?.onClick?.({\n            index: rowIndex,\n            value: options.value,\n            data: this.data[rowIndex],\n            event,\n            key,\n          });\n        }}\n      >\n        {options.formattedValue || options.value}\n      </Tag>\n    ) : (\n      options.formattedValue || options.value\n    );\n  }\n\n  private _renderCellChildren(\n    options: CDataTableDataItem | CDataTableHeader,\n    index: number,\n    key: string,\n    data: CDataTableDataItemPrivate,\n  ) {\n    return options.children.map((child) => {\n      const Tag = child.component?.tag;\n      const params = child.component?.params || {};\n\n      const { _hiddenData = [], ...rest } = data;\n\n      const flatData: CDataTableData = {\n        ...(rest as Partial<CDataTableData>),\n        ..._hiddenData.reduce((obj, row) => {\n          obj[row.id] = row.value;\n\n          return obj;\n        }, {} as CDataTableData),\n      };\n\n      return !!Tag ? (\n        <Tag\n          {...params}\n          {...(!params?.onClick\n            ? {}\n            : {\n                onClick: (event: MouseEvent) => {\n                  params.onClick({\n                    value: options.value,\n                    index,\n                    event,\n                    key,\n                    data: flatData,\n                  });\n                },\n              })}\n        >\n          {!!child.children?.length\n            ? this._renderCellChildren(child, index, key, data)\n            : child.value}\n        </Tag>\n      ) : (\n        child.value\n      );\n    });\n  }\n\n  private _renderExpansionIndicator(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <td>\n          <div\n            tabindex=\"0\"\n            onKeyUp={(event: KeyboardEvent) =>\n              this._handleKeyUp(event, rowIndex, rowData)\n            }\n          >\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\">\n              <path d={mdiChevronDown} />\n            </svg>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderHiddenCells(index) {\n    return this._data[index]._hiddenData\n      .filter((d) => !this._extraHeaders.find((h) => h.key === d.id))\n      .map(({ id, key, value: options }) => {\n        const index = this._headers.findIndex((h) => h.key === id);\n\n        return (\n          <li>\n            {!!key && (\n              <div class=\"title\">\n                <span>{key}:</span>\n                {this._renderCellData(id, options, index, index)}\n              </div>\n            )}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, index, id, {})}\n              </div>\n            )}\n          </li>\n        );\n      });\n  }\n\n  private _renderHiddenHeaderChildren(index, rowData) {\n    return this._data[index]._hiddenData.map(({ id, key }) => {\n      const headerIndex = this.headers.findIndex((h) => h.key === id);\n\n      return (\n        !!this.headers[headerIndex]?.children && (\n          <li>\n            <div class=\"children\">\n              {this._renderCellChildren(\n                this.headers[headerIndex],\n                index,\n                key,\n                rowData,\n              )}\n            </div>\n          </li>\n        )\n      );\n    });\n  }\n\n  private _renderLoaderRow() {\n    return (\n      <tr>\n        <td class=\"loader\" colSpan={100}>\n          {this.loading && (\n            <div class=\"c-data-table__loader\">\n              <div class=\"loading-bar\" />\n            </div>\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  private _renderRows() {\n    return (\n      !!this._data.length &&\n      Object.values(this._data).map((rowData, rowIndex) => {\n        let selectionValue = this._getSelectionValue(rowData, rowIndex);\n\n        if (!this.selectionProperty && typeof selectionValue === 'number') {\n          selectionValue = this._getIndex(selectionValue);\n        }\n\n        const isSelected = !!this._selections.includes(selectionValue);\n\n        return (\n          <Fragment>\n            <tr\n              class={{\n                active: this._activeRows.includes(rowIndex),\n                parent: this._hasHiddenData,\n                selected: isSelected,\n              }}\n              onClick={(event) =>\n                this._onToggleAdditionalData(event, rowIndex, rowData)\n              }\n            >\n              {this._renderSelectionCell(isSelected, selectionValue)}\n              {this._renderExpansionIndicator(rowIndex, rowData)}\n              {this._renderTableCells(rowIndex, rowData)}\n            </tr>\n\n            {this._renderAdditioanlDataRow(rowIndex, rowData)}\n          </Fragment>\n        );\n      })\n    );\n  }\n\n  private _renderSelectionCell(\n    isSelected: boolean,\n    selectionValue: string | number,\n  ) {\n    return (\n      this.selectable && (\n        <td>\n          <div class=\"selection\">\n            <c-checkbox\n              value={isSelected}\n              hide-details\n              onChangeValue={() => this._onSelection(selectionValue)}\n            ></c-checkbox>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderSortIndicator(key: string) {\n    let iconPath = mdiSwapVertical;\n\n    if (key === this.sortBy && this.sortDirection === 'asc') {\n      iconPath = mdiArrowUpThin;\n    }\n\n    if (key === this.sortBy && this.sortDirection === 'desc') {\n      iconPath = mdiArrowDownThin;\n    }\n\n    return (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" tabindex={0}>\n        <path d={iconPath} />\n      </svg>\n    );\n  }\n\n  private _renderStatusTextRow() {\n    return (\n      !this._data.length && (\n        <tr>\n          <td class=\"info\" colSpan={100}>\n            <div>{this.loading ? this.loadingText : this.noDataText}</div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderTableBody() {\n    return (\n      <tbody>\n        {this._renderLoaderRow()}\n        {this._renderStatusTextRow()}\n        {this._renderRows()}\n      </tbody>\n    );\n  }\n\n  private _renderTableCell(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n    rowData = {},\n  ) {\n    const header = this.headers.find((header) => header.key === key);\n    const isHidden = this.hiddenHeaders.includes(key);\n\n    // Render only if key is present in headers\n    return (\n      !!header &&\n      !isHidden && (\n        <td>\n          <div data-align={header?.align} data-justify={header?.justify}>\n            {this._renderCellData(key, options, colIndex, rowIndex)}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, rowIndex, key, rowData)}\n              </div>\n            )}\n\n            {!!this.headers.find((header) => header.key === key)?.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(\n                  this.headers.find((header) => header.key === key),\n                  rowIndex,\n                  key,\n                  rowData,\n                )}\n              </div>\n            )}\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderTableCells(rowIndex: number, rowData = {}) {\n    return this._sortCellProperties(rowData).map(([key, options], index) =>\n      this._renderTableCell(key, options, index, rowIndex, rowData),\n    );\n  }\n\n  private _renderTableFooter() {\n    const footerStyles = this.horizontalScrolling\n      ? {\n          maxWidth: `${this.parentWidth}px`,\n          position: 'sticky',\n          left: '0',\n        }\n      : {};\n\n    return (\n      !!this.pagination && (\n        <tfoot>\n          <tr ref={(el) => (this._footerElement = el as HTMLTableRowElement)}>\n            <td colSpan={100}>\n              <div class=\"c-data-table__footer\" style={footerStyles}>\n                <c-pagination\n                  {...this.footerOptions}\n                  value={this.pagination}\n                  simple={this._isPaginationSimple}\n                  onChangeValue={(e) => this._onPaginationChange(e)}\n                ></c-pagination>\n              </div>\n            </td>\n          </tr>\n        </tfoot>\n      )\n    );\n  }\n\n  private _renderTableHeader() {\n    const indicatorRowStyles = this.horizontalScrolling\n      ? {\n          width: `${this.parentWidth - 8}px`,\n          position: 'sticky',\n          left: '4px',\n        }\n      : {};\n\n    return (\n      <thead class={{ sticky: this.stickyHeader }}>\n        <tr>\n          {this.selectable && (\n            <th class=\"selection\">\n              {!this.singleSelection && (\n                <div class=\"selection--heading\">\n                  <c-checkbox\n                    value={this._hasSelectionsOnPage()}\n                    indeterminate={this._isIndeterminate}\n                    hide-details\n                    onClick={(event: MouseEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                    onKeyUp={(event: KeyboardEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                  ></c-checkbox>\n                </div>\n              )}\n            </th>\n          )}\n\n          {this._hasHiddenData && <th class=\"indicator\"></th>}\n\n          {!!this._headers.length &&\n            this._headers.map((header) => {\n              const isSortable =\n                !!header.sortable || typeof header.sortable === 'undefined';\n              const params = {\n                'data-id': header.key,\n                ref: (el) => this._addHeaderRef(header.key, el),\n                ...(!!header && {\n                  style: {\n                    ...(header.width && { minWidth: header.width }),\n                  },\n                }),\n                ...(isSortable && {\n                  onClick: () => this._onSort(header.key),\n                  onKeyUp: () => this._onSort(header.key),\n                }),\n              };\n\n              return (\n                <th {...params}>\n                  <div class={{ sortable: isSortable }}>\n                    {header.value}\n                    {isSortable && this._renderSortIndicator(header.key)}\n                  </div>\n                </th>\n              );\n            })}\n        </tr>\n\n        {this.horizontalScrolling && (\n          <tr class=\"c-data-table__header-indicators\">\n            <th colSpan={100}>\n              <div style={indicatorRowStyles}>\n                {this.firstCellHidden && (\n                  <c-icon-button\n                    class=\"first\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollLeft()}\n                  >\n                    <c-icon path={mdiChevronLeft}></c-icon>\n                  </c-icon-button>\n                )}\n\n                <c-spacer />\n\n                {this.lastCellHidden && (\n                  <c-icon-button\n                    class=\"last\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollRight()}\n                  >\n                    <c-icon path={mdiChevronRight}></c-icon>\n                  </c-icon-button>\n                )}\n              </div>\n            </th>\n          </tr>\n        )}\n      </thead>\n    );\n  }\n\n  private _scrollLeft() {\n    const leftBorder = this.element.getBoundingClientRect().left;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellLeftBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().left;\n\n      return headerCellLeftBorder < leftBorder - 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      if (hiddenHeaderKeys.length === 1) {\n        this._tableElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest',\n          inline: 'start',\n        });\n\n        return;\n      }\n\n      this._tableElement\n        .querySelector(\n          `[data-id=\"${hiddenHeaderKeys[hiddenHeaderKeys.length - 1]}\"]`,\n        )\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  private _scrollRight() {\n    const rightBorder = this.element.getBoundingClientRect().right;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellRightBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().right;\n\n      return headerCellRightBorder > rightBorder + 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      this._tableElement\n        .querySelector(`[data-id=\"${hiddenHeaderKeys[0]}\"]`)\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  /**\n   * Order table row properties by the header keys\n   */\n  private _sortCellProperties(row: CDataTableDataItemPrivate) {\n    const sorted = Object.entries(row)\n      .filter(([key]) => ![...this.hiddenHeaders, '_hiddenData'].includes(key))\n      .sort(\n        ([keyA], [keyB]) =>\n          this._headerKeys.indexOf(keyA) - this._headerKeys.indexOf(keyB),\n      );\n\n    return sorted;\n  }\n\n  private _validateProps(data) {\n    if (\n      !!data &&\n      !this._isValidated &&\n      this.selectionProperty !== null &&\n      !data[this.selectionProperty]\n    ) {\n      console.warn(\n        `[C-DATA-TABLE] Invalid selection property '${this.selectionProperty}'. Using row index as a fallback. This may lead to unexpected behavior.`,\n      );\n\n      this._isValidated = true;\n    }\n  }\n\n  render() {\n    const tableClasses = {\n      'c-data-table': true,\n      'c-data-table--hoverable': this.selectable || this._hasHiddenData,\n      'c-data-table--scrollable': this.horizontalScrolling,\n    };\n\n    return (\n      <Host>\n        <table\n          class={tableClasses}\n          ref={(el) => (this._tableElement = el as HTMLTableElement)}\n        >\n          <colgroup>\n            {[\n              ...(this.selectable ? ['_selection'] : []),\n              ...(this.hiddenHeaders.length ? ['_hidden'] : []),\n              ...this._headerKeys,\n            ].map((key) => (\n              <col class={this.sortBy === key && 'sorted-column'}></col>\n            ))}\n          </colgroup>\n          {this._renderTableHeader()}\n          {this._renderTableBody()}\n          {!this.hideFooter && this._renderTableFooter()}\n        </table>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}