{"version":3,"names":["cMenuCss","CMenu","handleKeyDown","ev","openKeys","this","active","includes","key","preventDefault","currentIndex","items","length","_onClick","_hideMenu","_createWrapperElement","existingOverlay","document","querySelector","overlay","createElement","classList","add","overlayContent","appendChild","body","_getNativeChild","parent","host","element","shadowRoot","children","_addMenuItemsComponentListeners","height","width","menuItemsComponent","onclose","focus","addEventListener","event","_onOpen","once","_getHostPosition","getBoundingClientRect","_a","remove","window","requestAnimationFrame","isInView","menuHeight","menuWidth","detail","y","posY","parseFloat","style","top","x","left","_c","_b","bottom","minWidth","small","itemsPerPage","id","_uniqueId","index","setAttribute","contentClass","setTimeout","_d","componentWillLoad","disconnectedCallback","render","hostClasses","custom","flat","h","Host","class","toString","tabindex","type","onClick","path","mdiChevronDown","getScrollParent","Promise","resolve","undefined","parentNode","overflow","overflowX","getComputedStyle","split","every","o","documentElement","cMenuItemsCss","CMenuItems","_parentTop","_itemHeight","_itemHeightSmall","_renderItem","item","classes","disabled","iconPosition","onItemClick","stopPropagation","action","close","emit","role","name","icon","viewBox","d","onIndexChange","listItems","forEach","i","toggle","parentType","Math","max","min","Array","from","querySelectorAll","_handleItemsPerPage","itemHeight","containerHeight","_listElement","maxHeight","setProperty","async","viewportHeight","innerHeight","viewportWidth","innerWidth","right","parentTop","scrollingParent","_boundFn","_onScroll","bind","open","differenceY","_handleClick","composedPath","_handleZIndex","styles","assignedSlot","parentElement","zIndex","getPropertyValue","componentDidLoad","_boundClickFn","removeEventListener","listClasses","ref","el","map"],"sources":["src/components/c-menu/c-menu.scss?tag=c-menu&encapsulation=shadow","src/components/c-menu/c-menu.tsx","src/utils/getScrollParent.ts","src/components/c-menu-items/c-menu-items.scss?tag=c-menu-items&encapsulation=shadow","src/components/c-menu-items/c-menu-items.tsx"],"sourcesContent":[":host {\n  /**\n   * @prop --c-menu-text-color: Menu text color\n   * @prop --c-menu-text-color-active: Menu active text color\n   * @prop --c-menu-background-color-hover: Menu hover background color\n   * @prop --c-menu-outline-color: Menu outline color\n   */\n  --_c-menu-text-color: var(--c-menu-text-color, var(--c-text-system));\n  --_c-menu-text-color-active: var(\n    --c-menu-text-color-active,\n    var(--c-primary-600)\n  );\n  --_c-menu-background-color-hover: var(\n    --c-menu-background-color-hover,\n    var(--c-primary-200)\n  );\n  --_c-menu-outline-color: var(--c-menu-outline-color, var(--c-primary-600));\n\n  // private\n  --_c-menu-header-height: 38px;\n  --_c-menu-padding: 0 14px;\n\n  border-radius: 4px;\n  display: block;\n  font-size: 14px;\n  position: relative;\n  user-select: none;\n  height: fit-content;\n\n  button {\n    background: none;\n    border-radius: 4px;\n    border: none;\n    color: var(--_c-menu-text-color);\n    cursor: pointer;\n    display: block;\n    font-family: var(--c-font-family);\n    margin: 0;\n    padding: var(--_c-menu-padding);\n    position: relative;\n    user-select: none;\n\n    &:focus {\n      outline: 2px var(--_c-menu-outline-color) solid;\n      outline-offset: 2px;\n    }\n\n    @supports selector(:focus-visible) {\n      &:focus {\n        outline: none;\n      }\n    }\n\n    &:focus-visible {\n      outline: 2px var(--_c-menu-outline-color) solid;\n      outline-offset: 2px;\n    }\n\n    &:hover {\n      background-color: var(--_c-menu-background-color-hover);\n    }\n  }\n\n  .c-menu__icon {\n    line-height: 20px;\n    transition: transform 0.25s;\n\n    &--rotated {\n      transform: rotate(180deg);\n    }\n  }\n\n  .c-menu__header {\n    display: flex;\n    flex: 1 1 auto;\n    margin-left: 0;\n    align-items: center;\n    gap: 8px;\n    height: var(--_c-menu-header-height);\n  }\n}\n\n:host(.c-menu--custom) {\n  --_c-menu-padding: 0;\n  --_c-menu-background-color-hover: transparent !important;\n\n  background: transparent !important;\n}\n\n:host(.c-menu--small) {\n  --_c-menu-header-height: 32px;\n}\n\n:host(.c-menu--active) c-icon,\n:host(:hover) c-icon {\n  color: var(--_c-menu-text-color-active);\n}\n\n:host(.c-menu--no-hover) {\n  --_c-menu-background-color-hover: transparent !important;\n}\n\n.c-menu-overlay {\n  position: fixed;\n  inset: 0;\n  pointer-events: none;\n\n  &__content {\n    position: relative;\n    height: 100%;\n    width: 100%;\n  }\n}\n","import {\n  Component,\n  Host,\n  h,\n  Element,\n  State,\n  Prop,\n  Listen,\n} from '@stencil/core';\nimport { mdiChevronDown } from '@mdi/js';\nimport { CMenuOption } from '../../types';\n\n/**\n * @group Navigation\n * @slot Default slot - Menu title / activator element (simple variant)\n */\n@Component({\n  tag: 'c-menu',\n  styleUrl: 'c-menu.scss',\n  shadow: true,\n})\nexport class CMenu {\n  @Element() host: HTMLCMenuElement;\n\n  /**\n   * Menu items\n   */\n  @Prop() items: CMenuOption[] = [];\n\n  /**\n   * Menu content css class\n   */\n  @Prop() contentClass = '';\n\n  /**\n   * No chevron and background, E.g. when a button is the activator\n   */\n  @Prop() custom = false;\n\n  /**\n   * Small variant\n   */\n  @Prop() small = false;\n\n  /**\n   * No hover background\n   */\n  @Prop() flat = false;\n\n  /**\n   * Items per page before adding scroll\n   */\n  @Prop() itemsPerPage = 6;\n\n  @State() menuItemsComponent: HTMLCMenuItemsElement | null = null;\n\n  @State() menuWrapperComponent: HTMLDivElement | null = null;\n\n  @State() currentIndex: number = null;\n\n  @State() active = false;\n\n  @Listen('keydown', { capture: true })\n  handleKeyDown(ev: KeyboardEvent) {\n    const openKeys = ['ArrowDown', 'ArrowUp', 'Enter', ' '];\n\n    if (!this.active && openKeys.includes(ev.key)) {\n      ev.preventDefault();\n\n      this.currentIndex = null;\n\n      if (ev.key === 'ArrowDown') {\n        this.currentIndex = 0;\n      }\n\n      if (ev.key === 'ArrowUp') {\n        this.currentIndex = this.items.length - 1;\n      }\n\n      this._onClick();\n    }\n\n    if (ev.key === 'Escape') {\n      this._hideMenu();\n    }\n  }\n\n  private static _uniqueId = 0;\n\n  private _createWrapperElement() {\n    const existingOverlay = document.querySelector('.c-menu-overlay__content');\n\n    if (existingOverlay) return existingOverlay;\n\n    const overlay = document.createElement('div');\n\n    overlay.classList.add('c-menu-overlay');\n\n    const overlayContent = document.createElement('div');\n\n    overlayContent.classList.add('c-menu-overlay__content');\n\n    overlay.appendChild(overlayContent);\n\n    document.body.appendChild(overlay);\n\n    return overlayContent;\n  }\n\n  private _getNativeChild(parent = this.host as Element) {\n    let element = parent.shadowRoot.children[0];\n\n    if (!!element.shadowRoot) {\n      element = this._getNativeChild(element);\n    }\n\n    return element as HTMLElement;\n  }\n\n  private _addMenuItemsComponentListeners(height: number, width: number) {\n    this.menuItemsComponent.onclose = () => {\n      this._hideMenu();\n\n      const element = this._getNativeChild();\n\n      element.focus();\n    };\n\n    this.menuItemsComponent.addEventListener(\n      'open',\n      (event: CustomEvent) => this._onOpen(event, height, width),\n      {\n        once: true,\n      },\n    );\n  }\n\n  private _getHostPosition() {\n    return this.host.getBoundingClientRect();\n  }\n\n  private _hideMenu() {\n    this.menuItemsComponent?.remove();\n    this.menuItemsComponent = null;\n    this.active = false;\n  }\n\n  private _onOpen(event: CustomEvent, height: number, width: number) {\n    window.requestAnimationFrame(() => {\n      const { isInView, height: menuHeight, width: menuWidth } = event.detail;\n\n      if (!isInView.y) {\n        const posY =\n          parseFloat(this.menuItemsComponent.style.top) - menuHeight - height;\n\n        this.menuItemsComponent.style.top = `${posY}px`;\n        this.menuItemsComponent.top = posY;\n      }\n\n      if (!isInView.x) {\n        this.menuItemsComponent.style.left = `${\n          parseFloat(this.menuItemsComponent.style.left) - menuWidth + width\n        }px`;\n      }\n\n      this.active = true;\n      this.menuItemsComponent.active = true;\n\n      this.menuItemsComponent?.shadowRoot?.querySelector('ul')?.focus();\n    });\n  }\n\n  private _onClick() {\n    if (this.menuItemsComponent) return;\n\n    const { bottom, left, width, height } = this._getHostPosition();\n\n    this.menuItemsComponent = document.createElement('c-menu-items');\n\n    this.menuItemsComponent.style.top = `${bottom}px`;\n    this.menuItemsComponent.style.left = `${left}px`;\n    this.menuItemsComponent.style.minWidth = `${width}px`;\n    this.menuItemsComponent.parent = this.host;\n    this.menuItemsComponent.items = this.items;\n    this.menuItemsComponent.small = this.small;\n    this.menuItemsComponent.itemsPerPage = this.itemsPerPage;\n    this.menuItemsComponent.top = bottom;\n    this.menuItemsComponent.id = `c-menu-items-${CMenu._uniqueId}`;\n    this.menuItemsComponent.index = this.currentIndex;\n    this.menuItemsComponent.setAttribute('tabindex', '-1');\n    this.menuItemsComponent.setAttribute('role', 'listbox');\n\n    if (this.contentClass) {\n      this.menuItemsComponent.classList.add(this.contentClass);\n    }\n\n    this._addMenuItemsComponentListeners(height, width);\n\n    this._createWrapperElement().appendChild(this.menuItemsComponent);\n\n    window.setTimeout(() => {\n      (\n        (this.menuItemsComponent?.shadowRoot?.children[0] as HTMLUListElement)\n          ?.children[0] as HTMLLIElement\n      )?.focus();\n    }, 200);\n  }\n\n  componentWillLoad() {\n    CMenu._uniqueId += 1;\n  }\n\n  disconnectedCallback() {\n    this._hideMenu();\n  }\n\n  render() {\n    const hostClasses = {\n      'c-menu': true,\n      'c-menu--custom': this.custom,\n      'c-menu--active': this.active,\n      'c-menu--no-hover': this.flat,\n      'c-menu--small': this.small,\n    };\n\n    return (\n      <Host class={hostClasses}>\n        <button\n          aria-expanded={this.active.toString()}\n          aria-haspopup=\"listbox\"\n          aria-controls={`c-menu-items-${CMenu._uniqueId}`}\n          class={{\n            'c-menu-wrapper': !this.custom,\n            custom: this.custom,\n          }}\n          tabindex=\"0\"\n          type=\"button\"\n          onClick={() => this._onClick()}\n        >\n          {this.custom ? (\n            <slot></slot>\n          ) : (\n            <div class=\"c-menu__header\">\n              <slot></slot>\n\n              <c-icon\n                path={mdiChevronDown}\n                class={\n                  this.active\n                    ? 'c-menu__icon c-menu__icon--rotated'\n                    : 'c-menu__icon'\n                }\n              />\n            </div>\n          )}\n        </button>\n      </Host>\n    );\n  }\n}\n","export const getScrollParent = (element): Promise<HTMLElement> => {\n  return new Promise((resolve) => {\n    if (!element) {\n      resolve(undefined);\n    }\n\n    let parent = element.parentNode;\n\n    while (parent) {\n      if (parent.shadowRoot === undefined) {\n        parent = parent.host;\n      } else {\n        const { overflow, overflowX } = window.getComputedStyle(parent);\n\n        if (\n          overflowX !== 'scroll' &&\n          overflow.split(' ').every((o) => o === 'auto' || o === 'scroll')\n        ) {\n          resolve(parent);\n        }\n\n        parent = parent.parentNode;\n      }\n    }\n\n    resolve(document.documentElement);\n  });\n};\n",":host,\n:root {\n  /**\n   * @prop --c-menu-items-background-color-hover: Menu item hover background color\n   * @prop --c-menu-items-text-color: Menu item text color\n   * @prop --c-menu-items-text-color-active: Active menu item text color\n   */\n  --_c-menu-items-background-color-hover: var(--c-menu-items-background-color-hover, var(--c-primary-200));\n  --_c-menu-items-text-color: var(--c-menu-items-text-color, var(--c-text-body));\n  --_c-menu-items-text-color-active: var(--c-menu-items-text-color-active, var(--c-primary-600));\n\n  position: absolute;\n  border-radius: inherit;\n  display: flex;\n  pointer-events: none;\n  inset: inherit;\n}\n\nul.c-menu-items {\n  --_c-menu-item-font-size: 14px;\n\n  margin: 0;\n  padding: 0;\n  background-color: var(--c-white);\n  list-style: none;\n  animation: 0.1s 1 fade-in cubic-bezier(0.25, 0.8, 0.5, 1);\n  box-shadow: 2px 4px 10px #00000029;\n  width: 100%;\n  overflow-y: scroll;\n  pointer-events: auto;\n  border-radius: 4px;\n  visibility: hidden;\n\n  &--small {\n    --_c-menu-item-font-size: 12px;\n  }\n\n  &--active {\n    visibility: visible;\n  }\n}\n\nli {\n  align-items: center;\n  background: var(--c-white);\n  column-gap: 12px;\n  cursor: pointer;\n  display: flex;\n  flex-wrap: nowrap;\n  font-size: var(--_c-menu-item-font-size);\n  height: var(--_c-menu-item-height);\n  padding-left: 10px;\n  padding-right: 10px;\n  outline: none;\n  white-space: nowrap;\n  pointer-events: auto;\n\n  &:not(.disabled):hover,\n  &.active {\n    background: var(--_c-menu-items-background-color-hover);\n    color: var(--_c-menu-items-text-color-active);\n  }\n\n  &.icon-start {\n    flex-direction: row-reverse;\n    justify-content: flex-end;\n  }\n\n  &.icon-end {\n    justify-content: space-between;\n  }\n\n  &.disabled {\n    cursor: default;\n    color: var(--c-tertiary-400);\n  }\n}\n\n@keyframes fade-in {\n  from {\n    opacity: 0;\n    transform: translateY(-8px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n","import {\n  Component,\n  Host,\n  h,\n  Element,\n  Event,\n  EventEmitter,\n  Prop,\n  State,\n  Listen,\n  Watch,\n} from '@stencil/core';\nimport { CMenuOption } from '../../types';\nimport { getScrollParent } from '../../utils';\n\n/**\n * @parent c-menu\n */\n@Component({\n  tag: 'c-menu-items',\n  styleUrl: 'c-menu-items.scss',\n  shadow: true,\n})\nexport class CMenuItems {\n  @Element() host: HTMLCMenuItemsElement;\n\n  /**\n   * Menu items\n   * @private\n   */\n  @Prop() items: CMenuOption[] = [];\n\n  /**\n   * Small variant\n   * @private\n   */\n  @Prop() small = false;\n\n  /**\n   * Menu is opened and positioned\n   * @private\n   */\n  @Prop() active = false;\n\n  /**\n   * Type of parent\n   * @private\n   */\n  @Prop() parentType = 'menu';\n\n  /**\n   * Menu parent\n   * @private\n   */\n  @Prop() parent: HTMLCMenuElement;\n\n  /**\n   * Initial top position\n   * @private\n   */\n  @Prop() top = 0;\n\n  /**\n   * is active\n   * @private\n   */\n  @Prop() index: number | null = null;\n\n  /**\n   * Items per page before adding scroll\n   * @private\n   */\n  @Prop() itemsPerPage = 6;\n\n  /**\n   * Triggered when the menu is closed\n   * @private\n   */\n  @Event() close: EventEmitter;\n\n  /**\n   * Triggered when the menu is opened\n   * @private\n   */\n  @Event() open: EventEmitter<{\n    height: number;\n    width: number;\n    isInView: {\n      x: boolean;\n      y: boolean;\n    };\n  }>;\n\n  @State() scrollingParent: Element;\n\n  @State() isInView = true;\n\n  @State() currentIndex: number = null;\n\n  @Watch('currentIndex')\n  onIndexChange(index: number) {\n    this.listItems.forEach((item, i) => {\n      item.classList.toggle('active', i === index);\n\n      if (i === index) {\n        item.focus();\n      }\n    });\n  }\n\n  @Listen('keydown', { capture: true })\n  handleKeyDown(event: KeyboardEvent) {\n    if (event.key === 'ArrowDown') {\n      event.preventDefault();\n\n      if (this.currentIndex === null) {\n        this.currentIndex = 0;\n      } else if (this.currentIndex + 1 < this.items.length) {\n        this.currentIndex += 1;\n      }\n    }\n\n    if (event.key === 'ArrowUp') {\n      event.preventDefault();\n\n      if (this.currentIndex === null) {\n        this.currentIndex = this.items.length - 1;\n      } else if (this.currentIndex > 0) {\n        this.currentIndex -= 1;\n      }\n    }\n\n    if (event.key === 'Escape') {\n      this.close.emit();\n      this.currentIndex = null;\n    }\n\n    if (event.key === 'Enter') {\n      event.preventDefault();\n\n      if (this.currentIndex !== null) {\n        const item = this.items[this.currentIndex];\n\n        if (!item.disabled) {\n          item.action();\n          this.close.emit();\n        }\n\n        return;\n      }\n\n      this.currentIndex = 0;\n    }\n\n    if (event.key === ' ') {\n      event.preventDefault();\n\n      if (this.currentIndex !== null) {\n        const item = this.items[this.currentIndex];\n\n        if (item?.disabled) return;\n\n        item?.action();\n      }\n\n      this.close.emit();\n    }\n\n    if (event.key === 'Tab') {\n      if (this.parentType !== 'menu' && this.currentIndex !== null) {\n        const item = this.items[this.currentIndex];\n\n        if (!item?.disabled) {\n          item?.action();\n        }\n      }\n\n      this.close.emit();\n    }\n\n    if (event.key === 'PageUp') {\n      this.currentIndex = Math.max(0, this.currentIndex - this.itemsPerPage);\n    }\n\n    if (event.key === 'PageDown') {\n      this.currentIndex = Math.min(\n        this.items.length - 1,\n        this.currentIndex + this.itemsPerPage,\n      );\n    }\n  }\n\n  private _listElement: HTMLUListElement;\n\n  private _boundFn: () => void;\n\n  private _boundClickFn: () => void;\n\n  private _parentTop = 0;\n\n  private _itemHeight = 42;\n\n  private _itemHeightSmall = 36;\n\n  get listItems(): HTMLLIElement[] {\n    return Array.from(this.host?.shadowRoot?.querySelectorAll('li') || []);\n  }\n\n  private _handleItemsPerPage() {\n    const itemHeight = this.small ? this._itemHeightSmall : this._itemHeight;\n\n    const containerHeight = this.itemsPerPage * itemHeight + itemHeight / 2;\n\n    this._listElement.style.maxHeight = `${containerHeight}px`;\n    this._listElement.style.setProperty(\n      '--_c-menu-item-height',\n      `${itemHeight}px`,\n    );\n  }\n\n  private _onOpen() {\n    this._handleItemsPerPage();\n\n    window.requestAnimationFrame(async () => {\n      const viewportHeight = window.innerHeight;\n      const viewportWidth = window.innerWidth;\n\n      const { bottom, right, height, width } =\n        this._listElement.getBoundingClientRect();\n\n      const { top: parentTop } = this.parent.getBoundingClientRect();\n\n      this._parentTop = parentTop;\n\n      this.scrollingParent = await getScrollParent(this.parent);\n\n      this._boundFn = this._onScroll.bind(this);\n\n      this.scrollingParent.addEventListener('scroll', this._boundFn);\n\n      this.open.emit({\n        height,\n        isInView: {\n          x: right < viewportWidth,\n          y: bottom < viewportHeight,\n        },\n        width,\n      });\n    });\n  }\n\n  private _onScroll() {\n    const { top: parentTop } = this.parent.getBoundingClientRect();\n\n    const differenceY = this._parentTop - parentTop;\n\n    this.host.style.top = `${this.top - differenceY}px`;\n  }\n\n  private _handleClick(event) {\n    if (!event.composedPath().includes(this.host)) {\n      this.close.emit();\n    }\n  }\n\n  private _handleZIndex() {\n    const styles = window.getComputedStyle(\n      (this.parent.assignedSlot || this.parent).parentElement,\n    );\n\n    const zIndex = styles.getPropertyValue('z-index');\n\n    this.host.style.zIndex = zIndex === 'auto' ? '1' : zIndex;\n  }\n\n  componentDidLoad() {\n    this._boundClickFn = this._handleClick.bind(this);\n\n    window.addEventListener('click', this._boundClickFn, {\n      once: true,\n    });\n\n    this._handleZIndex();\n\n    this._onOpen();\n\n    this.currentIndex = this.index;\n  }\n\n  disconnectedCallback() {\n    this.scrollingParent.removeEventListener('scroll', this._boundFn);\n    window.removeEventListener('click', this._boundClickFn);\n  }\n\n  private _renderItem = (item) => {\n    const classes = {\n      disabled: item.disabled,\n      'icon-start': item.iconPosition === 'start',\n      'icon-end': item.iconPosition === 'end',\n    };\n\n    const onItemClick = (event, item) => {\n      event.stopPropagation();\n\n      if (!item.disabled) {\n        item.action();\n\n        this.close.emit();\n      }\n    };\n\n    return (\n      <li\n        aria-disabled={(!!item.disabled).toString()}\n        class={classes}\n        tabindex=\"-1\"\n        role=\"menuitem\"\n        onClick={(event) => onItemClick(event, item)}\n      >\n        {item.name}\n\n        {item.icon && (\n          <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n            <path d={item.icon} />\n          </svg>\n        )}\n      </li>\n    );\n  };\n\n  render() {\n    const listClasses = {\n      'c-menu-items': true,\n      'c-menu-items--small': this.small,\n      'c-menu-items--active': this.active,\n    };\n\n    return (\n      <Host>\n        <ul class={listClasses} ref={(el) => (this._listElement = el)}>\n          {this.items.map((item) => this._renderItem(item))}\n        </ul>\n      </Host>\n    );\n  }\n}\n"],"mappings":"oGAAA,MAAMA,EAAW,86D,MCqBJC,EAAK,M,oCAMe,G,kBAKR,G,YAKN,M,WAKD,M,UAKD,M,kBAKQ,E,wBAEqC,K,0BAEL,K,kBAEvB,K,YAEd,K,CAGlB,aAAAC,CAAcC,GACZ,MAAMC,EAAW,CAAC,YAAa,UAAW,QAAS,KAEnD,IAAKC,KAAKC,QAAUF,EAASG,SAASJ,EAAGK,KAAM,CAC7CL,EAAGM,iBAEHJ,KAAKK,aAAe,KAEpB,GAAIP,EAAGK,MAAQ,YAAa,CAC1BH,KAAKK,aAAe,C,CAGtB,GAAIP,EAAGK,MAAQ,UAAW,CACxBH,KAAKK,aAAeL,KAAKM,MAAMC,OAAS,C,CAG1CP,KAAKQ,U,CAGP,GAAIV,EAAGK,MAAQ,SAAU,CACvBH,KAAKS,W,EAMD,qBAAAC,GACN,MAAMC,EAAkBC,SAASC,cAAc,4BAE/C,GAAIF,EAAiB,OAAOA,EAE5B,MAAMG,EAAUF,SAASG,cAAc,OAEvCD,EAAQE,UAAUC,IAAI,kBAEtB,MAAMC,EAAiBN,SAASG,cAAc,OAE9CG,EAAeF,UAAUC,IAAI,2BAE7BH,EAAQK,YAAYD,GAEpBN,SAASQ,KAAKD,YAAYL,GAE1B,OAAOI,C,CAGD,eAAAG,CAAgBC,EAAStB,KAAKuB,MACpC,IAAIC,EAAUF,EAAOG,WAAWC,SAAS,GAEzC,KAAMF,EAAQC,WAAY,CACxBD,EAAUxB,KAAKqB,gBAAgBG,E,CAGjC,OAAOA,C,CAGD,+BAAAG,CAAgCC,EAAgBC,GACtD7B,KAAK8B,mBAAmBC,QAAU,KAChC/B,KAAKS,YAEL,MAAMe,EAAUxB,KAAKqB,kBAErBG,EAAQQ,OAAO,EAGjBhC,KAAK8B,mBAAmBG,iBACtB,QACCC,GAAuBlC,KAAKmC,QAAQD,EAAON,EAAQC,IACpD,CACEO,KAAM,M,CAKJ,gBAAAC,GACN,OAAOrC,KAAKuB,KAAKe,uB,CAGX,SAAA7B,G,OACN8B,EAAAvC,KAAK8B,sBAAkB,MAAAS,SAAA,SAAAA,EAAEC,SACzBxC,KAAK8B,mBAAqB,KAC1B9B,KAAKC,OAAS,K,CAGR,OAAAkC,CAAQD,EAAoBN,EAAgBC,GAClDY,OAAOC,uBAAsB,K,UAC3B,MAAMC,SAAEA,EAAUf,OAAQgB,EAAYf,MAAOgB,GAAcX,EAAMY,OAEjE,IAAKH,EAASI,EAAG,CACf,MAAMC,EACJC,WAAWjD,KAAK8B,mBAAmBoB,MAAMC,KAAOP,EAAahB,EAE/D5B,KAAK8B,mBAAmBoB,MAAMC,IAAM,GAAGH,MACvChD,KAAK8B,mBAAmBqB,IAAMH,C,CAGhC,IAAKL,EAASS,EAAG,CACfpD,KAAK8B,mBAAmBoB,MAAMG,KAAO,GACnCJ,WAAWjD,KAAK8B,mBAAmBoB,MAAMG,MAAQR,EAAYhB,K,CAIjE7B,KAAKC,OAAS,KACdD,KAAK8B,mBAAmB7B,OAAS,MAEjCqD,GAAAC,GAAAhB,EAAAvC,KAAK8B,sBAAkB,MAAAS,SAAA,SAAAA,EAAEd,cAAU,MAAA8B,SAAA,SAAAA,EAAE1C,cAAc,SAAK,MAAAyC,SAAA,SAAAA,EAAEtB,OAAO,G,CAI7D,QAAAxB,GACN,GAAIR,KAAK8B,mBAAoB,OAE7B,MAAM0B,OAAEA,EAAMH,KAAEA,EAAIxB,MAAEA,EAAKD,OAAEA,GAAW5B,KAAKqC,mBAE7CrC,KAAK8B,mBAAqBlB,SAASG,cAAc,gBAEjDf,KAAK8B,mBAAmBoB,MAAMC,IAAM,GAAGK,MACvCxD,KAAK8B,mBAAmBoB,MAAMG,KAAO,GAAGA,MACxCrD,KAAK8B,mBAAmBoB,MAAMO,SAAW,GAAG5B,MAC5C7B,KAAK8B,mBAAmBR,OAAStB,KAAKuB,KACtCvB,KAAK8B,mBAAmBxB,MAAQN,KAAKM,MACrCN,KAAK8B,mBAAmB4B,MAAQ1D,KAAK0D,MACrC1D,KAAK8B,mBAAmB6B,aAAe3D,KAAK2D,aAC5C3D,KAAK8B,mBAAmBqB,IAAMK,EAC9BxD,KAAK8B,mBAAmB8B,GAAK,gBAAgBhE,EAAMiE,YACnD7D,KAAK8B,mBAAmBgC,MAAQ9D,KAAKK,aACrCL,KAAK8B,mBAAmBiC,aAAa,WAAY,MACjD/D,KAAK8B,mBAAmBiC,aAAa,OAAQ,WAE7C,GAAI/D,KAAKgE,aAAc,CACrBhE,KAAK8B,mBAAmBd,UAAUC,IAAIjB,KAAKgE,a,CAG7ChE,KAAK2B,gCAAgCC,EAAQC,GAE7C7B,KAAKU,wBAAwBS,YAAYnB,KAAK8B,oBAE9CW,OAAOwB,YAAW,K,aAChBC,GACEZ,GAACC,GAAAhB,EAAAvC,KAAK8B,sBAAkB,MAAAS,SAAA,SAAAA,EAAEd,cAAU,MAAA8B,SAAA,SAAAA,EAAE7B,SAAS,MAAuB,MAAA4B,SAAA,SAAAA,EAClE5B,SAAS,MACd,MAAAwC,SAAA,SAAAA,EAAElC,OAAO,GACT,I,CAGL,iBAAAmC,GACEvE,EAAMiE,WAAa,C,CAGrB,oBAAAO,GACEpE,KAAKS,W,CAGP,MAAA4D,GACE,MAAMC,EAAc,CAClB,SAAU,KACV,iBAAkBtE,KAAKuE,OACvB,iBAAkBvE,KAAKC,OACvB,mBAAoBD,KAAKwE,KACzB,gBAAiBxE,KAAK0D,OAGxB,OACEe,EAACC,EAAI,CAACC,MAAOL,GACXG,EAAA,0BACiBzE,KAAKC,OAAO2E,WAAU,gBACvB,UAAS,gBACR,gBAAgBhF,EAAMiE,YACrCc,MAAO,CACL,kBAAmB3E,KAAKuE,OACxBA,OAAQvE,KAAKuE,QAEfM,SAAS,IACTC,KAAK,SACLC,QAAS,IAAM/E,KAAKQ,YAEnBR,KAAKuE,OACJE,EAAA,aAEAA,EAAA,OAAKE,MAAM,kBACTF,EAAA,aAEAA,EAAA,UACEO,KAAMC,EACNN,MACE3E,KAAKC,OACD,qCACA,mB,6BAnKLL,EAAAiE,UAAY,E,UCvFtB,MAAMqB,EAAmB1D,GACvB,IAAI2D,SAASC,IAClB,IAAK5D,EAAS,CACZ4D,EAAQC,U,CAGV,IAAI/D,EAASE,EAAQ8D,WAErB,MAAOhE,EAAQ,CACb,GAAIA,EAAOG,aAAe4D,UAAW,CACnC/D,EAASA,EAAOC,I,KACX,CACL,MAAMgE,SAAEA,EAAQC,UAAEA,GAAc/C,OAAOgD,iBAAiBnE,GAExD,GACEkE,IAAc,UACdD,EAASG,MAAM,KAAKC,OAAOC,GAAMA,IAAM,QAAUA,IAAM,WACvD,CACAR,EAAQ9D,E,CAGVA,EAASA,EAAOgE,U,EAIpBF,EAAQxE,SAASiF,gBAAgB,ICzBrC,MAAMC,EAAgB,imD,MCuBTC,EAAU,M,iFA+Kb/F,KAAAgG,WAAa,EAEbhG,KAAAiG,YAAc,GAEdjG,KAAAkG,iBAAmB,GA4FnBlG,KAAAmG,YAAeC,IACrB,MAAMC,EAAU,CACdC,SAAUF,EAAKE,SACf,aAAcF,EAAKG,eAAiB,QACpC,WAAYH,EAAKG,eAAiB,OAGpC,MAAMC,EAAc,CAACtE,EAAOkE,KAC1BlE,EAAMuE,kBAEN,IAAKL,EAAKE,SAAU,CAClBF,EAAKM,SAEL1G,KAAK2G,MAAMC,M,GAIf,OACEnC,EAAA,yBACoB2B,EAAKE,UAAU1B,WACjCD,MAAO0B,EACPxB,SAAS,KACTgC,KAAK,WACL9B,QAAU7C,GAAUsE,EAAYtE,EAAOkE,IAEtCA,EAAKU,KAELV,EAAKW,MACJtC,EAAA,OAAKE,MAAM,OAAO9C,MAAM,KAAKD,OAAO,KAAKoF,QAAQ,aAC/CvC,EAAA,QAAMwC,EAAGb,EAAKW,QAGf,E,WAxSsB,G,WAMf,M,YAMC,M,gBAMI,O,+BAYP,E,WAMiB,K,kBAMR,E,6CAuBH,K,kBAEY,I,CAGhC,aAAAG,CAAcpD,GACZ9D,KAAKmH,UAAUC,SAAQ,CAAChB,EAAMiB,KAC5BjB,EAAKpF,UAAUsG,OAAO,SAAUD,IAAMvD,GAEtC,GAAIuD,IAAMvD,EAAO,CACfsC,EAAKpE,O,KAMX,aAAAnC,CAAcqC,GACZ,GAAIA,EAAM/B,MAAQ,YAAa,CAC7B+B,EAAM9B,iBAEN,GAAIJ,KAAKK,eAAiB,KAAM,CAC9BL,KAAKK,aAAe,C,MACf,GAAIL,KAAKK,aAAe,EAAIL,KAAKM,MAAMC,OAAQ,CACpDP,KAAKK,cAAgB,C,EAIzB,GAAI6B,EAAM/B,MAAQ,UAAW,CAC3B+B,EAAM9B,iBAEN,GAAIJ,KAAKK,eAAiB,KAAM,CAC9BL,KAAKK,aAAeL,KAAKM,MAAMC,OAAS,C,MACnC,GAAIP,KAAKK,aAAe,EAAG,CAChCL,KAAKK,cAAgB,C,EAIzB,GAAI6B,EAAM/B,MAAQ,SAAU,CAC1BH,KAAK2G,MAAMC,OACX5G,KAAKK,aAAe,I,CAGtB,GAAI6B,EAAM/B,MAAQ,QAAS,CACzB+B,EAAM9B,iBAEN,GAAIJ,KAAKK,eAAiB,KAAM,CAC9B,MAAM+F,EAAOpG,KAAKM,MAAMN,KAAKK,cAE7B,IAAK+F,EAAKE,SAAU,CAClBF,EAAKM,SACL1G,KAAK2G,MAAMC,M,CAGb,M,CAGF5G,KAAKK,aAAe,C,CAGtB,GAAI6B,EAAM/B,MAAQ,IAAK,CACrB+B,EAAM9B,iBAEN,GAAIJ,KAAKK,eAAiB,KAAM,CAC9B,MAAM+F,EAAOpG,KAAKM,MAAMN,KAAKK,cAE7B,GAAI+F,IAAI,MAAJA,SAAI,SAAJA,EAAME,SAAU,OAEpBF,IAAI,MAAJA,SAAI,SAAJA,EAAMM,Q,CAGR1G,KAAK2G,MAAMC,M,CAGb,GAAI1E,EAAM/B,MAAQ,MAAO,CACvB,GAAIH,KAAKuH,aAAe,QAAUvH,KAAKK,eAAiB,KAAM,CAC5D,MAAM+F,EAAOpG,KAAKM,MAAMN,KAAKK,cAE7B,KAAK+F,IAAI,MAAJA,SAAI,SAAJA,EAAME,UAAU,CACnBF,IAAI,MAAJA,SAAI,SAAJA,EAAMM,Q,EAIV1G,KAAK2G,MAAMC,M,CAGb,GAAI1E,EAAM/B,MAAQ,SAAU,CAC1BH,KAAKK,aAAemH,KAAKC,IAAI,EAAGzH,KAAKK,aAAeL,KAAK2D,a,CAG3D,GAAIzB,EAAM/B,MAAQ,WAAY,CAC5BH,KAAKK,aAAemH,KAAKE,IACvB1H,KAAKM,MAAMC,OAAS,EACpBP,KAAKK,aAAeL,KAAK2D,a,EAiB/B,aAAIwD,G,QACF,OAAOQ,MAAMC,OAAKrE,GAAAhB,EAAAvC,KAAKuB,QAAI,MAAAgB,SAAA,SAAAA,EAAEd,cAAU,MAAA8B,SAAA,SAAAA,EAAEsE,iBAAiB,QAAS,G,CAG7D,mBAAAC,GACN,MAAMC,EAAa/H,KAAK0D,MAAQ1D,KAAKkG,iBAAmBlG,KAAKiG,YAE7D,MAAM+B,EAAkBhI,KAAK2D,aAAeoE,EAAaA,EAAa,EAEtE/H,KAAKiI,aAAa/E,MAAMgF,UAAY,GAAGF,MACvChI,KAAKiI,aAAa/E,MAAMiF,YACtB,wBACA,GAAGJ,M,CAIC,OAAA5F,GACNnC,KAAK8H,sBAELrF,OAAOC,uBAAsB0F,UAC3B,MAAMC,EAAiB5F,OAAO6F,YAC9B,MAAMC,EAAgB9F,OAAO+F,WAE7B,MAAMhF,OAAEA,EAAMiF,MAAEA,EAAK7G,OAAEA,EAAMC,MAAEA,GAC7B7B,KAAKiI,aAAa3F,wBAEpB,MAAQa,IAAKuF,GAAc1I,KAAKsB,OAAOgB,wBAEvCtC,KAAKgG,WAAa0C,EAElB1I,KAAK2I,sBAAwBzD,EAAgBlF,KAAKsB,QAElDtB,KAAK4I,SAAW5I,KAAK6I,UAAUC,KAAK9I,MAEpCA,KAAK2I,gBAAgB1G,iBAAiB,SAAUjC,KAAK4I,UAErD5I,KAAK+I,KAAKnC,KAAK,CACbhF,SACAe,SAAU,CACRS,EAAGqF,EAAQF,EACXxF,EAAGS,EAAS6E,GAEdxG,SACA,G,CAIE,SAAAgH,GACN,MAAQ1F,IAAKuF,GAAc1I,KAAKsB,OAAOgB,wBAEvC,MAAM0G,EAAchJ,KAAKgG,WAAa0C,EAEtC1I,KAAKuB,KAAK2B,MAAMC,IAAM,GAAGnD,KAAKmD,IAAM6F,K,CAG9B,YAAAC,CAAa/G,GACnB,IAAKA,EAAMgH,eAAehJ,SAASF,KAAKuB,MAAO,CAC7CvB,KAAK2G,MAAMC,M,EAIP,aAAAuC,GACN,MAAMC,EAAS3G,OAAOgD,kBACnBzF,KAAKsB,OAAO+H,cAAgBrJ,KAAKsB,QAAQgI,eAG5C,MAAMC,EAASH,EAAOI,iBAAiB,WAEvCxJ,KAAKuB,KAAK2B,MAAMqG,OAASA,IAAW,OAAS,IAAMA,C,CAGrD,gBAAAE,GACEzJ,KAAK0J,cAAgB1J,KAAKiJ,aAAaH,KAAK9I,MAE5CyC,OAAOR,iBAAiB,QAASjC,KAAK0J,cAAe,CACnDtH,KAAM,OAGRpC,KAAKmJ,gBAELnJ,KAAKmC,UAELnC,KAAKK,aAAeL,KAAK8D,K,CAG3B,oBAAAM,GACEpE,KAAK2I,gBAAgBgB,oBAAoB,SAAU3J,KAAK4I,UACxDnG,OAAOkH,oBAAoB,QAAS3J,KAAK0J,c,CAuC3C,MAAArF,GACE,MAAMuF,EAAc,CAClB,eAAgB,KAChB,sBAAuB5J,KAAK0D,MAC5B,uBAAwB1D,KAAKC,QAG/B,OACEwE,EAACC,EAAI,KACHD,EAAA,MAAIE,MAAOiF,EAAaC,IAAMC,GAAQ9J,KAAKiI,aAAe6B,GACvD9J,KAAKM,MAAMyJ,KAAK3D,GAASpG,KAAKmG,YAAYC,M"}