import{r as t,h as i,H as e,g as s,c as o}from"./p-565ec8e4.js";import{m as n}from"./p-d32e42fe.js";const r="html{box-sizing:border-box}body{margin:0}*,*:before,*:after{box-sizing:inherit;-webkit-tap-highlight-color:transparent}:host{font-family:var(--c-font-family)}::-ms-reveal{display:none}:host{--_c-menu-text-color:var(--c-menu-text-color, var(--c-text-system));--_c-menu-text-color-active:var(\n    --c-menu-text-color-active,\n    var(--c-primary-600)\n  );--_c-menu-background-color-hover:var(\n    --c-menu-background-color-hover,\n    var(--c-primary-200)\n  );--_c-menu-outline-color:var(--c-menu-outline-color, var(--c-primary-600));--_c-menu-header-height:38px;--_c-menu-padding:0 14px;border-radius:4px;display:block;font-size:14px;position:relative;user-select:none;height:fit-content}:host button{background:none;border-radius:4px;border:none;color:var(--_c-menu-text-color);cursor:pointer;display:block;font-family:var(--c-font-family);margin:0;padding:var(--_c-menu-padding);position:relative;user-select:none}:host button:focus{outline:2px var(--_c-menu-outline-color) solid;outline-offset:2px}@supports selector(:focus-visible){:host button:focus{outline:none}}:host button:focus-visible{outline:2px var(--_c-menu-outline-color) solid;outline-offset:2px}:host button:hover{background-color:var(--_c-menu-background-color-hover)}:host .c-menu__icon{line-height:20px;transition:transform 0.25s}:host .c-menu__icon--rotated{transform:rotate(180deg)}:host .c-menu__header{display:flex;flex:1 1 auto;margin-left:0;align-items:center;gap:8px;height:var(--_c-menu-header-height)}:host(.c-menu--custom){--_c-menu-padding:0;--_c-menu-background-color-hover:transparent !important;background:transparent !important}:host(.c-menu--small){--_c-menu-header-height:32px}:host(.c-menu--active) c-icon,:host(:hover) c-icon{color:var(--_c-menu-text-color-active)}:host(.c-menu--no-hover){--_c-menu-background-color-hover:transparent !important}.c-menu-overlay{position:fixed;inset:0;pointer-events:none}.c-menu-overlay__content{position:relative;height:100%;width:100%}";const h=class{constructor(i){t(this,i);this.items=[];this.contentClass="";this.custom=false;this.small=false;this.flat=false;this.itemsPerPage=6;this.menuItemsComponent=null;this.menuWrapperComponent=null;this.currentIndex=null;this.active=false}handleKeyDown(t){const i=["ArrowDown","ArrowUp","Enter"," "];if(!this.active&&i.includes(t.key)){t.preventDefault();this.currentIndex=null;if(t.key==="ArrowDown"){this.currentIndex=0}if(t.key==="ArrowUp"){this.currentIndex=this.items.length-1}this._onClick()}if(t.key==="Escape"){this._hideMenu()}}_createWrapperElement(){const t=document.querySelector(".c-menu-overlay__content");if(t)return t;const i=document.createElement("div");i.classList.add("c-menu-overlay");const e=document.createElement("div");e.classList.add("c-menu-overlay__content");i.appendChild(e);document.body.appendChild(i);return e}_getNativeChild(t=this.host){let i=t.shadowRoot.children[0];if(!!i.shadowRoot){i=this._getNativeChild(i)}return i}_addMenuItemsComponentListeners(t,i){this.menuItemsComponent.onclose=()=>{this._hideMenu();const t=this._getNativeChild();t.focus()};this.menuItemsComponent.addEventListener("open",(e=>this._onOpen(e,t,i)),{once:true})}_getHostPosition(){return this.host.getBoundingClientRect()}_hideMenu(){var t;(t=this.menuItemsComponent)===null||t===void 0?void 0:t.remove();this.menuItemsComponent=null;this.active=false}_onOpen(t,i,e){window.requestAnimationFrame((()=>{var s,o,n;const{isInView:r,height:h,width:c}=t.detail;if(!r.y){const t=parseFloat(this.menuItemsComponent.style.top)-h-i;this.menuItemsComponent.style.top=`${t}px`;this.menuItemsComponent.top=t}if(!r.x){this.menuItemsComponent.style.left=`${parseFloat(this.menuItemsComponent.style.left)-c+e}px`}this.active=true;this.menuItemsComponent.active=true;(n=(o=(s=this.menuItemsComponent)===null||s===void 0?void 0:s.shadowRoot)===null||o===void 0?void 0:o.querySelector("ul"))===null||n===void 0?void 0:n.focus()}))}_onClick(){if(this.menuItemsComponent)return;const{bottom:t,left:i,width:e,height:s}=this._getHostPosition();this.menuItemsComponent=document.createElement("c-menu-items");this.menuItemsComponent.style.top=`${t}px`;this.menuItemsComponent.style.left=`${i}px`;this.menuItemsComponent.style.minWidth=`${e}px`;this.menuItemsComponent.parent=this.host;this.menuItemsComponent.items=this.items;this.menuItemsComponent.small=this.small;this.menuItemsComponent.itemsPerPage=this.itemsPerPage;this.menuItemsComponent.top=t;this.menuItemsComponent.id=`c-menu-items-${h._uniqueId}`;this.menuItemsComponent.index=this.currentIndex;this.menuItemsComponent.setAttribute("tabindex","-1");this.menuItemsComponent.setAttribute("role","listbox");if(this.contentClass){this.menuItemsComponent.classList.add(this.contentClass)}this._addMenuItemsComponentListeners(s,e);this._createWrapperElement().appendChild(this.menuItemsComponent);window.setTimeout((()=>{var t,i,e,s;(s=(e=(i=(t=this.menuItemsComponent)===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.children[0])===null||e===void 0?void 0:e.children[0])===null||s===void 0?void 0:s.focus()}),200)}componentWillLoad(){h._uniqueId+=1}disconnectedCallback(){this._hideMenu()}render(){const t={"c-menu":true,"c-menu--custom":this.custom,"c-menu--active":this.active,"c-menu--no-hover":this.flat,"c-menu--small":this.small};return i(e,{class:t},i("button",{"aria-expanded":this.active.toString(),"aria-haspopup":"listbox","aria-controls":`c-menu-items-${h._uniqueId}`,class:{"c-menu-wrapper":!this.custom,custom:this.custom},tabindex:"0",type:"button",onClick:()=>this._onClick()},this.custom?i("slot",null):i("div",{class:"c-menu__header"},i("slot",null),i("c-icon",{path:n,class:this.active?"c-menu__icon c-menu__icon--rotated":"c-menu__icon"}))))}get host(){return s(this)}};h._uniqueId=0;h.style=r;const c=t=>new Promise((i=>{if(!t){i(undefined)}let e=t.parentNode;while(e){if(e.shadowRoot===undefined){e=e.host}else{const{overflow:t,overflowX:s}=window.getComputedStyle(e);if(s!=="scroll"&&t.split(" ").every((t=>t==="auto"||t==="scroll"))){i(e)}e=e.parentNode}}i(document.documentElement)}));const l="html{box-sizing:border-box}body{margin:0}*,*:before,*:after{box-sizing:inherit;-webkit-tap-highlight-color:transparent}:host{font-family:var(--c-font-family)}::-ms-reveal{display:none}:host,:root{--_c-menu-items-background-color-hover:var(--c-menu-items-background-color-hover, var(--c-primary-200));--_c-menu-items-text-color:var(--c-menu-items-text-color, var(--c-text-body));--_c-menu-items-text-color-active:var(--c-menu-items-text-color-active, var(--c-primary-600));position:absolute;border-radius:inherit;display:flex;pointer-events:none;inset:inherit}ul.c-menu-items{--_c-menu-item-font-size:14px;margin:0;padding:0;background-color:var(--c-white);list-style:none;animation:0.1s 1 fade-in cubic-bezier(0.25, 0.8, 0.5, 1);box-shadow:2px 4px 10px rgba(0, 0, 0, 0.1607843137);width:100%;overflow-y:scroll;pointer-events:auto;border-radius:4px;visibility:hidden}ul.c-menu-items--small{--_c-menu-item-font-size:12px}ul.c-menu-items--active{visibility:visible}li{align-items:center;background:var(--c-white);column-gap:12px;cursor:pointer;display:flex;flex-wrap:nowrap;font-size:var(--_c-menu-item-font-size);height:var(--_c-menu-item-height);padding-left:10px;padding-right:10px;outline:none;white-space:nowrap;pointer-events:auto}li:not(.disabled):hover,li.active{background:var(--_c-menu-items-background-color-hover);color:var(--_c-menu-items-text-color-active)}li.icon-start{flex-direction:row-reverse;justify-content:flex-end}li.icon-end{justify-content:space-between}li.disabled{cursor:default;color:var(--c-tertiary-400)}@keyframes fade-in{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}";const a=class{constructor(e){t(this,e);this.close=o(this,"close",7);this.open=o(this,"open",7);this._parentTop=0;this._itemHeight=42;this._itemHeightSmall=36;this._renderItem=t=>{const e={disabled:t.disabled,"icon-start":t.iconPosition==="start","icon-end":t.iconPosition==="end"};const s=(t,i)=>{t.stopPropagation();if(!i.disabled){i.action();this.close.emit()}};return i("li",{"aria-disabled":(!!t.disabled).toString(),class:e,tabindex:"-1",role:"menuitem",onClick:i=>s(i,t)},t.name,t.icon&&i("svg",{class:"icon",width:"20",height:"20",viewBox:"0 0 24 24"},i("path",{d:t.icon})))};this.items=[];this.small=false;this.active=false;this.parentType="menu";this.parent=undefined;this.top=0;this.index=null;this.itemsPerPage=6;this.scrollingParent=undefined;this.isInView=true;this.currentIndex=null}onIndexChange(t){this.listItems.forEach(((i,e)=>{i.classList.toggle("active",e===t);if(e===t){i.focus()}}))}handleKeyDown(t){if(t.key==="ArrowDown"){t.preventDefault();if(this.currentIndex===null){this.currentIndex=0}else if(this.currentIndex+1<this.items.length){this.currentIndex+=1}}if(t.key==="ArrowUp"){t.preventDefault();if(this.currentIndex===null){this.currentIndex=this.items.length-1}else if(this.currentIndex>0){this.currentIndex-=1}}if(t.key==="Escape"){this.close.emit();this.currentIndex=null}if(t.key==="Enter"){t.preventDefault();if(this.currentIndex!==null){const t=this.items[this.currentIndex];if(!t.disabled){t.action();this.close.emit()}return}this.currentIndex=0}if(t.key===" "){t.preventDefault();if(this.currentIndex!==null){const t=this.items[this.currentIndex];if(t===null||t===void 0?void 0:t.disabled)return;t===null||t===void 0?void 0:t.action()}this.close.emit()}if(t.key==="Tab"){if(this.parentType!=="menu"&&this.currentIndex!==null){const t=this.items[this.currentIndex];if(!(t===null||t===void 0?void 0:t.disabled)){t===null||t===void 0?void 0:t.action()}}this.close.emit()}if(t.key==="PageUp"){this.currentIndex=Math.max(0,this.currentIndex-this.itemsPerPage)}if(t.key==="PageDown"){this.currentIndex=Math.min(this.items.length-1,this.currentIndex+this.itemsPerPage)}}get listItems(){var t,i;return Array.from(((i=(t=this.host)===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelectorAll("li"))||[])}_handleItemsPerPage(){const t=this.small?this._itemHeightSmall:this._itemHeight;const i=this.itemsPerPage*t+t/2;this._listElement.style.maxHeight=`${i}px`;this._listElement.style.setProperty("--_c-menu-item-height",`${t}px`)}_onOpen(){this._handleItemsPerPage();window.requestAnimationFrame((async()=>{const t=window.innerHeight;const i=window.innerWidth;const{bottom:e,right:s,height:o,width:n}=this._listElement.getBoundingClientRect();const{top:r}=this.parent.getBoundingClientRect();this._parentTop=r;this.scrollingParent=await c(this.parent);this._boundFn=this._onScroll.bind(this);this.scrollingParent.addEventListener("scroll",this._boundFn);this.open.emit({height:o,isInView:{x:s<i,y:e<t},width:n})}))}_onScroll(){const{top:t}=this.parent.getBoundingClientRect();const i=this._parentTop-t;this.host.style.top=`${this.top-i}px`}_handleClick(t){if(!t.composedPath().includes(this.host)){this.close.emit()}}_handleZIndex(){const t=window.getComputedStyle((this.parent.assignedSlot||this.parent).parentElement);const i=t.getPropertyValue("z-index");this.host.style.zIndex=i==="auto"?"1":i}componentDidLoad(){this._boundClickFn=this._handleClick.bind(this);window.addEventListener("click",this._boundClickFn,{once:true});this._handleZIndex();this._onOpen();this.currentIndex=this.index}disconnectedCallback(){this.scrollingParent.removeEventListener("scroll",this._boundFn);window.removeEventListener("click",this._boundClickFn)}render(){const t={"c-menu-items":true,"c-menu-items--small":this.small,"c-menu-items--active":this.active};return i(e,null,i("ul",{class:t,ref:t=>this._listElement=t},this.items.map((t=>this._renderItem(t)))))}get host(){return s(this)}static get watchers(){return{currentIndex:["onIndexChange"]}}};a.style=l;export{h as c_menu,a as c_menu_items};
//# sourceMappingURL=p-33c354c4.entry.js.map