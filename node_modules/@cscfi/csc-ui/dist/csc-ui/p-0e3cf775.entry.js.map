{"version":3,"names":["cTabButtonsCss","CTabButtons","this","_focusedTabValue","value","onValueChange","buttons","forEach","button","disabled","setAttribute","find","btn","removeAttribute","changeValue","emit","_b","_a","tabFocusHandler","event","stopPropagation","detail","handleKeyUp","isArrowLeft","key","isArrowRight","tabIndex","_getTabIndex","dataset","index","firstAvailableValue","availableValues","at","lastAvailableValue","isBeginning","isEnd","nextValue","previousValue","item","shadowRoot","querySelector","requestAnimationFrame","focus","onTabChange","tabs","isActive","_isIndexBased","mandatory","nullValue","map","Array","from","el","querySelectorAll","findIndex","buttonValue","componentDidLoad","every","String","outlined","hostDisabled","size","render","classes","h","Host","class"],"sources":["src/components/c-tab-buttons/c-tab-buttons.scss?tag=c-tab-buttons&encapsulation=shadow","src/components/c-tab-buttons/c-tab-buttons.tsx"],"sourcesContent":[":host {\n  /**\n   * @prop --c-tab-buttons-background-color-active-hover: Active tab button hover background color\n   * @prop --c-tab-buttons-background-color-active: Active tab button background color\n   * @prop --c-tab-buttons-text-color-active: Active tab button text color\n   */\n  --_c-tab-buttons-background-color-active-hover: var(--c-tab-buttons-background-color-active-hover, var(--c-primary-400));\n  --_c-tab-buttons-background-color-active: var(--c-tab-buttons-background-color-active, var(--c-primary-600));\n  --_c-tab-buttons-text-color-active: var(--c-tab-buttons-text-color-active, var(--c-white));\n\n  /**\n   * @prop --c-tab-buttons-background-color-hover: Tab button hover background color\n   * @prop --c-tab-buttons-background-color: Tab button background color\n   * @prop --c-tab-buttons-border-color: Tab button border color\n   * @prop --c-tab-buttons-text-color: Tab button text color\n   */\n  --_c-tab-buttons-background-color-hover: var(--c-tab-buttons-background-color-hover, var(--c-primary-200));\n  --_c-tab-buttons-background-color: var(--c-tab-buttons-background-color, var(--c-white));\n  --_c-tab-buttons-border-color: var(--c-tab-buttons-border-color, var(--c-primary-600));\n  --_c-tab-buttons-text-color: var(--c-tab-buttons-text-color, var(--c-primary-600));\n\n  /**\n   * @prop --c-tab-buttons-background-color: Disabled tab buttons border color\n   */\n  --_c-tab-buttons-border-color-disabled: var(--c-tab-buttons-border-color-disabled, var(--c-tertiary-400));\n\n  /**\n   * @prop --c-tab-buttons-border-radius: Tab buttons border radius\n   */\n  --_c-tab-buttons-border-radius: var(--c-tab-buttons-border-radius, 4px);\n\n  background-color: var(--_c-tab-buttons-border-color);\n  border-radius: var(--_c-tab-buttons-border-radius);\n  box-shadow: 0 0 0 2px var(--_c-tab-buttons-border-color);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 2px;\n  margin: 2px;\n\n  ::slotted(c-button) {\n    --c-button-background-color-hover: var(--_c-tab-buttons-background-color-active-hover);\n    --c-button-background-color: var(--_c-tab-buttons-background-color-active);\n    --c-button-text-color: var(--_c-tab-buttons-text-color-active);\n    --_c-button-border-radius: 0;\n    --_c-button-min-width: auto;\n    --_c-button-padding: 0 8px;\n    --_c-button-outline-offset: 4px;\n\n    flex-grow: 1;\n  }\n\n  ::slotted(c-button.c-button--outlined) {\n    --c-button-outlined-background-color-hover: var(--_c-tab-buttons-background-color-hover);\n    --c-button-outlined-background-color: var(--_c-tab-buttons-background-color);\n    --c-button-outlined-border-color: var(--_c-tab-buttons-border-color);\n    --c-button-outlined-text-color: var(--_c-tab-buttons-text-color);\n\n    box-shadow: none;\n\n    &::before,\n    &::after {\n      background-color: #ffffff;\n      border-radius: inherit;\n      content: \"\";\n      height: 100%;\n      left: 0;\n      position: absolute;\n      top: 0;\n      transition: background-color 0.3s ease-in-out;\n      width: 100%;\n      z-index: -1;\n    }\n\n    &:hover {\n      background-color: var(--c-tab-button-background-color);\n    }\n  }\n\n  ::slotted(c-button:first-child) {\n    --_c-button-border-radius: var(--_c-tab-buttons-border-radius) 0 0 var(--_c-tab-buttons-border-radius);\n  }\n\n  ::slotted(c-button:last-child) {\n    --_c-button-border-radius: 0 var(--_c-tab-buttons-border-radius) var(--_c-tab-buttons-border-radius) 0;\n  }\n\n  ::slotted(*) {\n    flex-grow: 1;\n  }\n}\n\n:host(.disabled) {\n  --_c-tab-buttons-border-color: var(--_c-tab-buttons-border-color-disabled) !important;\n\n  pointer-events: none;\n}\n\n:host(.c-tab-buttons) {\n  ::slotted(c-button:focus) {\n    outline: none;\n  }\n\n  ::slotted(c-button:focus-visible) {\n    outline: 2px var(--_c-tab-buttons-border-color) solid;\n    outline-offset: 4px;\n    z-index: 1;\n  }\n}\n","import {\n  Component,\n  h,\n  Element,\n  Prop,\n  Event,\n  EventEmitter,\n  Watch,\n  Listen,\n  Host,\n} from '@stencil/core';\n\n/**\n * @group Content Selectors\n * @slot Default slot - Default slot for the c-button elements\n */\n@Component({\n  tag: 'c-tab-buttons',\n  styleUrl: 'c-tab-buttons.scss',\n  shadow: true,\n})\nexport class CTabButtons {\n  /**\n   * Value of tab buttons\n   */\n  @Prop({ mutable: true }) value: number | string = 0;\n\n  /**\n   * Always require a selection\n   */\n  @Prop() mandatory = false;\n\n  /**\n   * Used as controller for c-tabs\n   * @private\n   */\n  @Prop() tabs = false;\n\n  /**\n   * Size of the buttons\n   */\n  @Prop() size: 'default' | 'small' = 'default';\n\n  /**\n   * Disable tab buttons\n   */\n  @Prop({ attribute: 'disabled' }) hostDisabled = false;\n\n  /**\n   * Emit changes to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  @Element() el: HTMLCTabButtonsElement;\n\n  private _isIndexBased: boolean;\n\n  private _focusedTabValue = this.value;\n\n  @Watch('value')\n  onValueChange(value: string | number) {\n    this.buttons.forEach((button: HTMLCButtonElement) => {\n      if (!button.disabled) {\n        button.setAttribute('outlined', 'true');\n      }\n    });\n\n    if (value !== null) {\n      this.buttons.forEach((button: HTMLCButtonElement) => {\n        if (!button.disabled) {\n          button.setAttribute('outlined', 'true');\n        }\n      });\n\n      const button =\n        this.buttons.find((btn) => btn.value === value) || this.buttons[value];\n\n      if (button) {\n        button.removeAttribute('outlined');\n      }\n    }\n\n    this.changeValue.emit(this.buttons[value]?.value ?? value);\n  }\n\n  @Listen('tabFocus', { passive: true })\n  tabFocusHandler(event: CustomEvent) {\n    event.stopPropagation();\n\n    this._focusedTabValue = event.detail;\n  }\n\n  @Listen('keyup', { capture: true })\n  handleKeyUp(event: KeyboardEvent) {\n    event.stopPropagation();\n\n    const isArrowLeft = event.key === 'ArrowLeft';\n    const isArrowRight = event.key === 'ArrowRight';\n\n    if (!isArrowRight && !isArrowLeft) return;\n\n    const tabIndex =\n      this._getTabIndex(this._focusedTabValue) ??\n      +this.buttons[this._focusedTabValue]?.dataset.index;\n\n    const firstAvailableValue = this.availableValues.at(0);\n    const lastAvailableValue = this.availableValues.at(-1);\n\n    const isBeginning = this._focusedTabValue === firstAvailableValue;\n    const isEnd = this._focusedTabValue === lastAvailableValue;\n\n    const nextValue = isEnd\n      ? firstAvailableValue\n      : this.availableValues[tabIndex + 1];\n\n    const previousValue = isBeginning\n      ? lastAvailableValue\n      : this.availableValues[tabIndex - 1];\n\n    const value = isArrowLeft ? previousValue : nextValue;\n\n    const item = this.buttons\n      .find(\n        (button) => button.value === value || button.dataset.index === value,\n      )\n      .shadowRoot.querySelector('button');\n\n    requestAnimationFrame(() => {\n      item?.focus();\n    });\n  }\n\n  @Listen('tabChange', { passive: true })\n  onTabChange(\n    event: CustomEvent<{\n      value: number | string;\n      element: HTMLCButtonElement;\n    }>,\n  ) {\n    if (!this.tabs) event.stopPropagation();\n\n    const isActive =\n      this.value !== null &&\n      (this._isIndexBased\n        ? +event.detail.value === +this.value\n        : event.detail.value === this.value);\n\n    // Disable deselection if mandatory prop is set to true\n    if (this.mandatory && isActive) {\n      return;\n    }\n\n    const nullValue = this._isIndexBased ? null : '';\n    const value = this._isIndexBased ? +event.detail.value : event.detail.value;\n\n    this.value = isActive ? nullValue : value;\n  }\n\n  get availableValues() {\n    return this.buttons.map((button) => button.value ?? button.dataset.index);\n  }\n\n  get buttons() {\n    return Array.from(\n      this.el.querySelectorAll(':scope > c-button'),\n    ) as HTMLCButtonElement[];\n  }\n\n  private _getTabIndex(value: string | number) {\n    const index = this.availableValues.findIndex(\n      (buttonValue) => buttonValue === value,\n    );\n\n    return index;\n  }\n\n  componentDidLoad() {\n    this._isIndexBased = this.buttons.every(\n      (button) => typeof button.value === 'undefined',\n    );\n\n    this.buttons.forEach((button: HTMLCButtonElement, index) => {\n      button.setAttribute('data-index', String(index));\n      button.setAttribute('tabs', 'true');\n\n      if (!button.disabled) {\n        button.setAttribute('outlined', 'true');\n        button.outlined = true;\n      }\n\n      button.disabled = this.hostDisabled || button.disabled;\n      button.size = this.size;\n\n      const isActive =\n        this.value !== null &&\n        (this._isIndexBased\n          ? index === +this.value\n          : button.value === this.value);\n\n      button.shadowRoot\n        .querySelector('button')\n        ?.setAttribute('tabindex', isActive && !this.hostDisabled ? '0' : '-1');\n\n      if (isActive) {\n        button.removeAttribute('outlined');\n      }\n    });\n  }\n\n  render() {\n    const classes = {\n      'c-tab-buttons': true,\n      disabled: this.hostDisabled,\n    };\n\n    return (\n      <Host class={classes}>\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}